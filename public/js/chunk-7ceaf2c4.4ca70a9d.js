(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ceaf2c4"],{"00b4":function(e,t,r){"use strict";r("ac1f");var c=r("23e7"),s=r("da84"),a=r("c65b"),n=r("e330"),o=r("1626"),l=r("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=s.Error,d=n(/./.test);c({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!o(t))return d(this,e);var r=a(t,this,e);if(null!==r&&!l(r))throw new u("RegExp exec method returned something other than an Object or null");return!!r}})},"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var c=r("6b75");function s(e,t){if(e){if("string"===typeof e)return Object(c["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(c["a"])(e,t):void 0}}},"40ea":function(e,t,r){"use strict";r("4f9c")},"4f9c":function(e,t,r){},"5ca6":function(e,t,r){"use strict";r.r(t);var c=r("7a23"),s={id:"GlobalSearch",class:"mt-4"},a=Object(c["createElementVNode"])("h2",{class:"title is-2",translate:"yes"},"Global search",-1),n=Object(c["createElementVNode"])("h3",{class:"mb-5",translate:"yes"},"Search for products, pages and categories",-1),o={class:"columns is-centered mb-5"},l={class:"column is-4"},i={class:"field"},u={class:"control has-icons-left has-icons-right"},d=Object(c["createElementVNode"])("span",{class:"icon is-small is-left"},[Object(c["createElementVNode"])("i",{class:"fas fa-search"})],-1),m=Object(c["createElementVNode"])("i",{class:"fas fa-plus"},null,-1),g=[m],h={key:0,class:"columns is-8 is-centered mx-6 searchResults"},b={key:0,class:"column is-4"},p=Object(c["createElementVNode"])("h3",{class:"title is-4",translate:"yes"},"Pages",-1),j={key:1,class:"column is-4"},O=Object(c["createElementVNode"])("h3",{class:"title is-4",translate:"yes"},"Products",-1),f={key:2,class:"column is-4"},y=Object(c["createElementVNode"])("h3",{class:"title is-4",translate:"yes"},"Categories",-1);function E(e,t,r,m,E,v){var k=Object(c["resolveComponent"])("global-search-result-row");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",s,[a,n,Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("p",u,[Object(c["createElementVNode"])("input",{class:"input is-rounded",onKeyup:t[0]||(t[0]=Object(c["withModifiers"])((function(e){return v.inputSearch(e)}),["prevent"])),ref:"searchQuery",type:"text",placeholder:"Search Products or Pages"},null,544),d,Object(c["createElementVNode"])("a",{href:"#",class:"icon is-small is-right rc-45 pointer",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return v.updateInput("")}),["prevent"]))},g)])])])]),null!==E.searchResults?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,[E.searchResults.pages&&E.searchResults.pages.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",b,[p,Object(c["createVNode"])(k,{results:E.searchResults.pages,type:"page"},null,8,["results"])])):Object(c["createCommentVNode"])("",!0),E.searchResults.products&&E.searchResults.products.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",j,[O,Object(c["createVNode"])(k,{results:E.searchResults.products,type:"product"},null,8,["results"])])):Object(c["createCommentVNode"])("",!0),E.searchResults.categories&&E.searchResults.categories.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",f,[y,Object(c["createVNode"])(k,{results:E.searchResults.categories,type:"category"},null,8,["results"])])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])}var v=r("6b75");function k(e){if(Array.isArray(e))return Object(v["a"])(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function N(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var V=r("06c5");function B(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e){return k(e)||N(e)||Object(V["a"])(e)||B()}r("498a"),r("25f0"),r("ac1f"),r("1276"),r("4de4"),r("fb6a"),r("a15b"),r("b0c0");var $={key:0,id:"GlobalSearchResults"},R={key:0,class:"is-4"},w={class:"media"},I={class:"media-left"},C={class:"image is-48x48"},L=["src","alt"],x={class:"media-content"},P={key:1,class:"is-4"},T={class:"media"},_={class:"media-left"},D={class:"image is-48x48"},Q=["src","alt"],A={class:"media-content"},q={key:2,class:"is-4"},G={class:"media"},F={class:"media-left"},M={class:"image is-48x48"},J=["src","alt"],U={class:"media-content"};function K(e,t,r,s,a,n){var o=Object(c["resolveComponent"])("router-link");return r.results?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",$,["product"===r.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",R,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(r.results,(function(t,r){return Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:t._id+"pro"+r,tag:"a",class:"result-link py-4",to:{name:"productDetail",params:{category:t.categories[0],product:t._id,slug:t.slug}}},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("article",w,[Object(c["createElementVNode"])("figure",I,[Object(c["createElementVNode"])("p",C,[Object(c["createElementVNode"])("img",{src:n.getImage(t,e.listType),alt:t.name[n.getLang],onerror:"this.src='/assets/_site/logo-product.svg'"},null,8,L)])]),Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(t.name[n.getLang]),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(t.descriptionShort[n.getLang]),1)])])]})),_:2},1032,["to"])})),128))])):"page"===r.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",P,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(r.results,(function(t,r){return Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:t._id+"pag"+r,tag:"a",class:"result-link py-4",to:{name:"pageDetail",params:{category:t.categories[0],product:t._id,slug:t.slug}}},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("article",T,[Object(c["createElementVNode"])("figure",_,[Object(c["createElementVNode"])("p",D,[Object(c["createElementVNode"])("img",{src:n.getImage(t,e.listType),alt:t.name[n.getLang],onerror:"this.src='/assets/_site/logo-product.svg'"},null,8,Q)])]),Object(c["createElementVNode"])("div",A,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(t.name[n.getLang]),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(t.descriptionShort[n.getLang]),1)])])]})),_:2},1032,["to"])})),128))])):"category"===r.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",q,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(r.results,(function(t,r){return Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:t._id+"cat"+r,tag:"a",class:"result-link py-4",to:{name:"categoryList",params:{category:t.pathSlug}}},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("article",G,[Object(c["createElementVNode"])("figure",F,[Object(c["createElementVNode"])("p",M,[Object(c["createElementVNode"])("img",{src:n.getImage(t,e.listType),alt:t.name[n.getLang],onerror:"this.src='/assets/_site/logo-product.svg'"},null,8,J)])]),Object(c["createElementVNode"])("div",U,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(t.name[n.getLang]),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(t.descriptionShort[n.getLang]),1)])])]})),_:2},1032,["to"])})),128))])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)}var z={name:"GlobalSearchResultRow",props:["results","type"],data:function(){return{searchTimeout:null,searchQuery:"",searchResults:null}},created:function(){},mounted:function(){console.log("------",this.results)},computed:{getLang:function(){return this.$store&&this.$store.state&&this.$store.state.language.code?this.$store.state.language.code:this.propLang?this.propLang:"en"}},methods:{getImage:function(e,t){return e.price>0?this.getProductImagePath(e.orderCode):this.getPageImagePath(e.slug)},getProductImagePath:function(e){return e&&this.$store&&this.$store.state&&this.$store.state.coredata&&this.$store.state.coredata.settings&&this.$store.state.coredata.settings.assets&&this.$store.state.coredata.settings.assets.url?this.$helpers.getProductImagePath(this.$store.state.coredata,e):null},getPageImagePath:function(e){return e&&this.$store&&this.$store.state&&this.$store.state.coredata&&this.$store.state.coredata.settings&&this.$store.state.coredata.settings.assets&&this.$store.state.coredata.settings.assets.url?this.$helpers.getImagePath("pages",this.$store.state.coredata,"cover/"+e,"cover.jpg"):null}}},H=(r("40ea"),r("6b0d")),W=r.n(H);const X=W()(z,[["render",K]]);var Y=X,Z={name:"GlobalSearch",components:{"global-search-result-row":Y},data:function(){return{searchTimeout:null,searchQuery:"",searchResults:null}},created:function(){},mounted:function(){if(console.log("url query: ",this.$route),this.$route.params&&this.$route.params.query){var e=this.$route.params.query;e=this.cleanQuery(e),""!==e&&(this.updateInput(e),this.globalSearch(e))}},methods:{inputSearch:function(e){var t=this.cleanQuery(e.target.value);t&&this.globalSearch(t)},cleanQuery:function(e){return e=e.toString().trim(),e.indexOf("/")>-1&&(e=e.split("/")[0]),e},globalSearch:function(e){var t=this,r=this;null!==this.searchTimeout&&clearTimeout(this.searchTimeout),e.length>3?(this.searchQuery=e,this.searchTimeout=setTimeout((function(){t.$httpc.post("find",{query:e}).then((function(t){if(t&&t.data){r.searchResults=t.data;var c=r.$route.path.split("/");c=c.filter(Boolean);var s=S(c);c.length>2&&(s=c.slice(0,2)),history.pushState({},null,"/"+s.join("/")+"/"+encodeURIComponent(e))}}))}),1e3)):console.error("query too short")},updateInput:function(e){this.$refs.searchQuery.value=e}}};r("6617");const ee=W()(Z,[["render",E]]);t["default"]=ee},6617:function(e,t,r){"use strict";r("99b9")},"6b75":function(e,t,r){"use strict";function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,c=new Array(t);r<t;r++)c[r]=e[r];return c}r.d(t,"a",(function(){return c}))},"99b9":function(e,t,r){},d28b:function(e,t,r){var c=r("746f");c("iterator")}}]);
//# sourceMappingURL=chunk-7ceaf2c4.4ca70a9d.js.map