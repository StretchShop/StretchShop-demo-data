(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d97db4d"],{"00b4":function(e,t,r){"use strict";r("ac1f");var o=r("23e7"),a=r("da84"),c=r("c65b"),n=r("e330"),l=r("1626"),s=r("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=a.Error,u=n(/./.test);o({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!l(t))return u(this,e);var r=c(t,this,e);if(null!==r&&!s(r))throw new d("RegExp exec method returned something other than an Object or null");return!!r}})},"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var o=r("6b75");function a(e,t){if(e){if("string"===typeof e)return Object(o["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(o["a"])(e,t):void 0}}},1128:function(e,t,r){"use strict";r("7249")},2532:function(e,t,r){"use strict";var o=r("23e7"),a=r("e330"),c=r("5a34"),n=r("1d80"),l=r("577e"),s=r("ab13"),i=a("".indexOf);o({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~i(l(n(this)),l(c(e)),arguments.length>1?arguments[1]:void 0)}})},"3c98":function(e,t,r){"use strict";r.r(t);r("b0c0");var o=r("7a23"),a=function(e){return Object(o["pushScopeId"])("data-v-ddaf9ee2"),e=e(),Object(o["popScopeId"])(),e},c={key:0,class:"container product-detail",id:"product-new-edit"},n={class:"field product-edit-language hidden"},l=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Edit Language",-1)})),s={class:"control select"},i=["value"],d={key:0,class:"product-hidden-properties"},u={class:"title is-3","aria-controls":"contentHiddenProperties",translate:"yes"},p=a((function(){return Object(o["createElementVNode"])("span",{translate:"yes"},"Product's hidden properties",-1)})),m=Object(o["createTextVNode"])(),b={class:"editableByAuthor-hidden collapse-content",id:"contentHiddenProperties","aria-expanded":"true"},g={class:"columns"},h={class:"column is-12"},f={key:0,class:"columns"},O={class:"column is-3"},j={class:"field"},y=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Type",-1)})),v={class:"control"},V={class:"column is-3"},N={class:"field"},E=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Subtype",-1)})),k={class:"control"},w={class:"column is-3"},x={class:"field"},C=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"External Id",-1)})),P={class:"control"},$={class:"column is-3"},L={class:"field"},S=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Variation Group Id",-1)})),B={class:"control"},I={class:"columns"},D={class:"column is-12"},T={key:0,class:"columns"},A={class:"column is-3"},M={class:"field"},F=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Slug",-1)})),U={class:"control"},_={class:"column is-6"},K={class:"field"},R=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Note",-1)})),q={class:"control"},H={class:"columns"},G={class:"column is-12"},z={key:0,class:"columns"},J={class:"column is-3"},W={class:"field"},Y=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Activity Start",-1)})),Q={class:"control"},X={class:"column is-3"},Z={class:"field"},ee=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Activity End",-1)})),te={class:"control"},re={class:"column is-6"},oe={key:0,class:"columns"},ae={class:"column is-4"},ce={class:"field"},ne=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Subscription Period",-1)})),le={class:"control"},se={class:"column is-4"},ie={class:"field"},de=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Subscription Duration",-1)})),ue={class:"control"},pe={class:"column is-4"},me={class:"field"},be=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Subscription Cycles",-1)})),ge={class:"control"},he={key:0},fe={class:"title is-3","aria-controls":"contentHiddenProperties",translate:"yes"},Oe=a((function(){return Object(o["createElementVNode"])("span",{translate:"yes"},"Editable by admin user",-1)})),je=Object(o["createTextVNode"])(),ye={class:"editableByAdmin-hidden"},ve={class:"columns"},Ve={class:"column is-4 is-offset-4"},Ne={class:"field"},Ee=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Publisher",-1)})),ke={class:"control"},we={class:"columns reversed"},xe={class:"column is-7"},Ce={class:"product-image-wrapper"},Pe=["src","alt"],$e={class:"file is-primary action edit"},Le={class:"file-label"},Se=a((function(){return Object(o["createElementVNode"])("span",{class:"file-cta"},[Object(o["createElementVNode"])("span",{class:"file-icon"},[Object(o["createElementVNode"])("i",{class:"fa fa-file-upload"})]),Object(o["createElementVNode"])("span",{class:"file-label",translate:"yes"}," Click to upload ")],-1)})),Be=a((function(){return Object(o["createElementVNode"])("i",{class:"fa fa-trash"},null,-1)})),Ie=Object(o["createTextVNode"])("  "),De=a((function(){return Object(o["createElementVNode"])("span",{translate:"yes"},"Click to remove",-1)})),Te=[Be,Ie,De],Ae={class:"column is-5 data-main"},Me={key:0,class:"breadcrumb","aria-label":"breadcrumbs"},Fe={key:0},Ue={class:"is-active"},_e={key:1},Ke={class:"field"},Re=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Name",-1)})),qe={class:"control"},He={class:"content"},Ge={class:"columns"},ze=a((function(){return Object(o["createElementVNode"])("div",{class:"column is-6 has-text-right"},[Object(o["createElementVNode"])("span",{translate:"yes"},"Order code")],-1)})),Je={class:"column is-6"},We={class:"field"},Ye=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Order code",-1)})),Qe={class:"control"},Xe=a((function(){return Object(o["createElementVNode"])("p",{class:"help is-danger",translate:"yes"},"Changing OrderCode may disable images and other external dependecies",-1)})),Ze={class:"columns"},et=a((function(){return Object(o["createElementVNode"])("div",{class:"column is-6 has-text-right"},[Object(o["createElementVNode"])("span",{translate:"yes"},"In stock")],-1)})),tt={class:"column is-6"},rt={class:"field"},ot=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"In stock",-1)})),at={class:"control"},ct={class:"columns"},nt={class:"column is-6"},lt={class:"field"},st={class:"label"},it=a((function(){return Object(o["createElementVNode"])("span",{translate:"yes"},"Price",-1)})),dt={class:"control"},ut={class:"column is-6"},pt=["data-id"],mt=Object(o["createTextVNode"])("   "),bt=a((function(){return Object(o["createElementVNode"])("span",{translate:"yes"},"Add to Cart",-1)})),gt={class:"columns"},ht={class:"column is-12"},ft={key:0},Ot=a((function(){return Object(o["createElementVNode"])("span",{id:"productPriceLevels"},"Edit Price Levels",-1)})),jt=[Ot],yt={class:"column is-6"},vt={class:"column is-6"},Vt=["onUpdate:modelValue","onKeyup"],Nt={key:1,class:"columns product-descriptions reversed-desktop"},Et={class:"column is-5"},kt={class:"field"},wt=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Description Short",-1)})),xt={class:"control"},Ct={key:0},Pt=a((function(){return Object(o["createElementVNode"])("p",{class:"variations-title",translate:"yes"}," Variations ",-1)})),$t={class:"image is-32x32"},Lt=["src","alt"],St={class:"column is-7"},Bt=["innerHTML"],It={key:2,class:"product-properties bg-grey"},Dt={class:"columns"},Tt=a((function(){return Object(o["createElementVNode"])("div",{class:"column is-6"},[Object(o["createElementVNode"])("h3",{class:"title is-3 has-text-left",translate:"yes"},"Properties")],-1)})),At={class:"column is-6 has-text-right"},Mt=a((function(){return Object(o["createElementVNode"])("i",{class:"fa fa-plus"},null,-1)})),Ft=Object(o["createTextVNode"])("  "),Ut=a((function(){return Object(o["createElementVNode"])("span",{translate:"yes"},"Add New Property",-1)})),_t=[Mt,Ft,Ut],Kt={class:"columns"},Rt={class:"column is-12"},qt={class:"table"},Ht=["data-key"],Gt={class:"field property-key"},zt=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Property Key",-1)})),Jt={class:"control"},Wt=["disabled","data-orig","value","onKeyup"],Yt=a((function(){return Object(o["createElementVNode"])("div",{class:"form-messages is-hidden"},[Object(o["createElementVNode"])("div",{class:"form-message","data-message":"exists",translate:"yes"},"This key already exists")],-1)})),Qt={class:"field property-name"},Xt=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Property Name",-1)})),Zt={class:"control"},er=["data-orig","value","onKeyup"],tr=Object(o["createTextVNode"])("Lang"),rr=a((function(){return Object(o["createElementVNode"])("div",{class:"form-messages is-hidden"},[Object(o["createElementVNode"])("div",{class:"form-message","data-message":"exists",translate:"yes"},"This key already exists")],-1)})),or={class:"field property-value"},ar=a((function(){return Object(o["createElementVNode"])("label",{class:"label",translate:"yes"},"Property Value",-1)})),cr={class:"control"},nr=["data-orig","value","onKeyup"],lr=Object(o["createTextVNode"])("Lang"),sr={width:"50",class:"has-text-centered"},ir=["onClick"],dr={key:3},ur={key:4,class:"columns product-related"},pr={class:"column is-12"},mr=a((function(){return Object(o["createElementVNode"])("h3",{class:"title is-3 has-text-left",translate:"yes"},"Related",-1)})),br={class:"tile is-ancestor"},gr={key:5,class:"columns product-delete"},hr={class:"column is-12"},fr=a((function(){return Object(o["createElementVNode"])("p",{translate:"yes"},"Warning: This action cannot be undone!",-1)}));function Or(e,t,r,a,Be,Ie){var De=Object(o["resolveComponent"])("font-awesome-icon"),Ot=Object(o["resolveComponent"])("o-autocomplete"),Mt=Object(o["resolveComponent"])("o-datepicker"),Ft=Object(o["resolveComponent"])("o-collapse"),Ut=Object(o["resolveComponent"])("o-inputitems"),Or=Object(o["resolveComponent"])("o-field"),jr=Object(o["resolveComponent"])("router-link"),yr=Object(o["resolveComponent"])("o-switch"),vr=Object(o["resolveComponent"])("slider-carousel"),Vr=Object(o["resolveComponent"])("product-box"),Nr=Object(o["resolveComponent"])("product-property");return Be.product&&Be.userEditAllowed?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",n,[l,Object(o["createElementVNode"])("div",s,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return Be.newLanguage=e}),onChange:t[1]||(t[1]=function(e){return Ie.changeEditedLang()})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.$store.state.coredata.langs,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:t+"langs",value:e},Object(o["toDisplayString"])(e.name),9,i)})),128))],544),[[o["vModelSelect"],Be.newLanguage]])])]),Be.editing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,[Object(o["createVNode"])(Ft,{open:!1,"aria-id":"contentHiddenProperties"},{trigger:Object(o["withCtx"])((function(e){return[Object(o["createElementVNode"])("h3",u,[p,m,Object(o["createVNode"])(De,{icon:(e.open,"angle-up")},null,8,["icon"])])]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("div",h,[Be.editing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("div",j,[y,Object(o["createElementVNode"])("div",v,[Object(o["createVNode"])(Ot,{modelValue:Be.product.type,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Be.product.type=e}),placeholder:"e.g. product","keep-first":!0,"open-on-focus":!0,data:Be.productTypes,onBlur:Ie.checkForSubscriptionData,field:"product.type",clearable:!1},null,8,["modelValue","data","onBlur"])])])]),Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("div",N,[E,Object(o["createElementVNode"])("div",k,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return Be.product.subtype=e}),translate:"yes",placeholder:"Subtype"},null,512),[[o["vModelText"],Be.product.subtype]])])])]),Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",x,[C,Object(o["createElementVNode"])("div",P,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return Be.product.externalId=e}),translate:"yes",placeholder:"External Id"},null,512),[[o["vModelText"],Be.product.externalId]])])])]),Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",L,[S,Object(o["createElementVNode"])("div",B,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return Be.product.variationGroupId=e}),translate:"yes",placeholder:"Variation Group Id"},null,512),[[o["vModelText"],Be.product.variationGroupId]])])])])])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",I,[Object(o["createElementVNode"])("div",D,[Be.editing?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",T,[Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("div",M,[F,Object(o["createElementVNode"])("div",U,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"text","onUpdate:modelValue":t[6]||(t[6]=function(e){return Be.product.slug=e}),translate:"yes",placeholder:"Slug"},null,512),[[o["vModelText"],Be.product.slug]])])])]),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("div",K,[R,Object(o["createElementVNode"])("div",q,[Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{class:"textarea","onUpdate:modelValue":t[7]||(t[7]=function(e){return Be.product.note=e}),translate:"yes",placeholder:"Note"},null,512),[[o["vModelText"],Be.product.note]])])])])])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",H,[Object(o["createElementVNode"])("div",G,[Be.product?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,[Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("div",W,[Y,Object(o["createElementVNode"])("div",Q,[Object(o["createVNode"])(Mt,{value:Ie.getActivity().start,onInput:t[8]||(t[8]=function(e){return Ie.setActivity("start",e)}),placeholder:"Activity Start DateTime",icon:"calendar-alt","trap-focus":""},null,8,["value"])])])]),Object(o["createElementVNode"])("div",X,[Object(o["createElementVNode"])("div",Z,[ee,Object(o["createElementVNode"])("div",te,[Object(o["createVNode"])(Mt,{value:Ie.getActivity().end,onInput:t[9]||(t[9]=function(e){return Ie.setActivity("end",e)}),placeholder:"Activity End DateTime",icon:"calendar-alt","trap-focus":""},null,8,["value"])])])]),Object(o["createElementVNode"])("div",re,["subscription"===Be.product.type&&Be.product.data&&Be.product.data.subscription?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",oe,[Object(o["createElementVNode"])("div",ae,[Object(o["createElementVNode"])("div",ce,[ne,Object(o["createElementVNode"])("div",le,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"text","onUpdate:modelValue":t[10]||(t[10]=function(e){return Be.product.data.subscription.period=e}),translate:"yes",placeholder:"Slug"},null,512),[[o["vModelText"],Be.product.data.subscription.period]])])])]),Object(o["createElementVNode"])("div",se,[Object(o["createElementVNode"])("div",ie,[de,Object(o["createElementVNode"])("div",ue,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"number","onUpdate:modelValue":t[11]||(t[11]=function(e){return Be.product.data.subscription.duration=e}),translate:"yes",placeholder:"Slug"},null,512),[[o["vModelText"],Be.product.data.subscription.duration]])])])]),Object(o["createElementVNode"])("div",pe,[Object(o["createElementVNode"])("div",me,[be,Object(o["createElementVNode"])("div",ge,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"number","onUpdate:modelValue":t[12]||(t[12]=function(e){return Be.product.data.subscription.cycles=e}),translate:"yes",placeholder:"Slug"},null,512),[[o["vModelText"],Be.product.data.subscription.cycles]])])])])])):Object(o["createCommentVNode"])("",!0)])])):Object(o["createCommentVNode"])("",!0)])])])]})),_:1}),Ie.user&&null!=Ie.user&&Ie.user.type&&"admin"==Ie.user.type?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",he,[Object(o["createVNode"])(Ft,{open:!1,"aria-id":"contentHiddenPropertiesAdmin"},{trigger:Object(o["withCtx"])((function(e){return[Object(o["createElementVNode"])("h3",fe,[Oe,je,Object(o["createVNode"])(De,{icon:e.open?"angle-down":"angle-up"},null,8,["icon"])])]})),default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ye,[Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("div",Ve,[Object(o["createElementVNode"])("div",Ne,[Ee,Object(o["createElementVNode"])("div",ke,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input",type:"text","onUpdate:modelValue":t[13]||(t[13]=function(e){return Be.product.publisher=e}),translate:"yes",placeholder:"Publisher"},null,512),[[o["vModelText"],Be.product.publisher]])])])])])])]})),_:1})])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",we,[Object(o["createElementVNode"])("div",xe,[Object(o["createElementVNode"])("div",Ce,[Object(o["createElementVNode"])("img",{src:Ie.getProductImagePath(Be.product.orderCode),alt:Be.product.name[Be.language.code],class:"image-main",onerror:"this.src='/assets/_site/logo-product.svg'"},null,8,Pe),Object(o["createElementVNode"])("div",$e,[Object(o["createElementVNode"])("label",Le,[Object(o["createElementVNode"])("input",{class:"file-input",type:"file",name:"resume",onInput:t[14]||(t[14]=function(e){return Ie.productMainImageUpload(e)})},null,32),Se])]),Object(o["createElementVNode"])("a",{class:"action remove button is-danger is-outlined",onClick:t[15]||(t[15]=Object(o["withModifiers"])((function(e){return Ie.productMainImageDelete()}),["prevent"]))},Te)])]),Object(o["createElementVNode"])("div",Ae,[Object(o["createElementVNode"])("section",null,[Object(o["createVNode"])(Or,{label:"Enter categories' url slugs"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Ut,{modelValue:Be.product.categories,"onUpdate:modelValue":t[16]||(t[16]=function(e){return Be.product.categories=e}),data:Be.filteredCategoriesSlugs,autocomplete:"","allow-new":!1,field:"user.first_name",icon:"tags",placeholder:"Categories",type:"is-info",onTyping:Ie.getFilteredCategories},null,8,["modelValue","data","onTyping"])]})),_:1})]),Be.parentCategoryDetail?(Object(o["openBlock"])(),Object(o["createElementBlock"])("nav",Me,[Be.parentCategoryDetail.parentCategories?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",Fe,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Be.parentCategoryDetail.parentCategories,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:t},[Object(o["createVNode"])(jr,{title:e.name[Be.language.code],to:{name:"categoryList",params:{category:e.pathSlug}}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name[Be.language.code]),1)]})),_:2},1032,["title","to"])])})),128)),Object(o["createElementVNode"])("li",Ue,[Object(o["createVNode"])(jr,{title:Be.parentCategoryDetail.name[Be.language.code],to:{name:"categoryList",params:{category:Be.parentCategoryDetail.pathSlug}},"aria-current":"page"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Be.parentCategoryDetail.name[Be.language.code]),1)]})),_:1},8,["title","to"])])])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),Be.product&&null!=Be.product?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_e,[Object(o["createElementVNode"])("div",Ke,[Re,Object(o["createElementVNode"])("div",qe,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input is-size-1 has-text-weight-semibold has-text-centered",type:"text","onUpdate:modelValue":t[17]||(t[17]=function(e){return Be.product.name[Be.language.code]=e}),onKeyup:t[18]||(t[18]=function(e){return Ie.checkNameDependents()}),translate:"yes",placeholder:"Name"},null,544),[[o["vModelText"],Be.product.name[Be.language.code]]])])]),Object(o["createElementVNode"])("div",He,[Object(o["createElementVNode"])("div",Ge,[ze,Object(o["createElementVNode"])("div",Je,[Object(o["createElementVNode"])("div",We,[Ye,Object(o["createElementVNode"])("div",Qe,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input has-text-weight-normal has-text-left",type:"text","onUpdate:modelValue":t[19]||(t[19]=function(e){return Be.product.orderCode=e}),translate:"yes",placeholder:"Order code"},null,512),[[o["vModelText"],Be.product.orderCode]])]),Xe])])]),Object(o["createElementVNode"])("div",Ze,[et,Object(o["createElementVNode"])("div",tt,[Object(o["createElementVNode"])("div",rt,[ot,Object(o["createElementVNode"])("div",at,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input has-text-weight-normal has-text-left",type:"text","onUpdate:modelValue":t[20]||(t[20]=function(e){return Be.product.stockAmount=e}),translate:"yes",placeholder:"In stock"},null,512),[[o["vModelText"],Be.product.stockAmount]])])])])]),Object(o["createElementVNode"])("div",ct,[Object(o["createElementVNode"])("div",nt,[Object(o["createElementVNode"])("div",lt,[Object(o["createElementVNode"])("label",st,[it,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$store.state.currency.symbol),1)]),Object(o["createElementVNode"])("div",dt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input is-size-2 has-text-weight-normal has-text-right",type:"number","onUpdate:modelValue":t[21]||(t[21]=function(e){return Be.product.price=e}),translate:"yes",placeholder:"Price"},null,512),[[o["vModelText"],Be.product.price]])])])]),Object(o["createElementVNode"])("div",ut,[Object(o["createElementVNode"])("button",{class:"button add-to-cart is-primary","data-id":Be.product._id,onClick:t[22]||(t[22]=Object(o["withModifiers"])((function(t){return e.addToCart(t)}),["prevent"])),disabled:""},[Object(o["createVNode"])(De,{icon:"cart-plus"}),mt,bt],8,pt)])]),Object(o["createElementVNode"])("div",gt,[Object(o["createElementVNode"])("div",ht,[Be.product.priceLevels?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ft,[Object(o["createVNode"])(Ft,{open:!1,"aria-id":"contentIdForA11y2",animation:"slide",modelValue:Be.showPriceLevels,"onUpdate:modelValue":t[25]||(t[25]=function(e){return Be.showPriceLevels=e})},{trigger:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("a",{href:"#",onClick:t[23]||(t[23]=Object(o["withModifiers"])((function(e){return Be.showPriceLevels=!Be.showPriceLevels}),["prevent"])),"aria-controls":"contentIdForA11y2"},jt)]})),default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Be.product.priceLevels,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:t},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e,(function(e,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"columns",key:r},[Object(o["createElementVNode"])("div",yt,Object(o["toDisplayString"])(t+"."+r),1),Object(o["createElementVNode"])("div",vt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input has-text-weight-normal has-text-right",type:"number","onUpdate:modelValue":function(e){return Be.product.priceLevels[t][r].price=e},placeholder:"Price",onKeyup:function(e){return Be.product.priceLevels[t][r].type="defined"}},null,40,Vt),[[o["vModelText"],Be.product.priceLevels[t][r].price]])])])})),128))])})),128)),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("button",{class:"button add-to-cart",onClick:t[24]||(t[24]=Object(o["withModifiers"])((function(e){return Ie.recalculatePriceLevels(Be.product._id)}),["prevent"])),translate:"yes"}," Recalculate Price Levels ")])]})),_:1},8,["modelValue"])])):Object(o["createCommentVNode"])("",!0)])])])])):Object(o["createCommentVNode"])("",!0)])]),Be.product&&null!=Be.product?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Nt,[Object(o["createElementVNode"])("div",Et,[Object(o["createElementVNode"])("div",kt,[wt,Object(o["createElementVNode"])("div",xt,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{class:"input is-size-5 has-text-weight-normal has-text-centered",type:"text","onUpdate:modelValue":t[26]||(t[26]=function(e){return Be.product.descriptionShort[Be.language.code]=e}),translate:"yes",placeholder:"Description Short"},null,512),[[o["vModelText"],Be.product.descriptionShort[Be.language.code]]])])]),Be.product.data&&Be.product.data.variations?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ct,[Object(o["createElementVNode"])("section",null,[Object(o["createElementVNode"])("section",null,[Pt,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Be.product.data.variations,(function(t,r){return Object(o["openBlock"])(),Object(o["createBlock"])(jr,{key:t._id+r,class:"content",title:t.name[e.$store.state.language.code],to:{name:"productDetail",params:{category:t.categories[0],product:t._id,slug:t.slug}}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("figure",$t,[Object(o["createElementVNode"])("img",{src:Ie.getProductImagePath(t.orderCode),alt:t.name[e.$store.state.language.code]},null,8,Lt)]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.name[e.$store.state.language.code]),1)]})),_:2},1032,["title","to"])})),128))])])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",St,[Object(o["createElementVNode"])("div",{class:"productContent","data-editable":"","data-name":"description",innerHTML:Be.product.descriptionLong[Be.language.code]},null,8,Bt)])])):Object(o["createCommentVNode"])("",!0),Be.product&&null!=Be.product&&Be.product.properties?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",It,[Object(o["createElementVNode"])("div",Dt,[Tt,Object(o["createElementVNode"])("div",At,[Object(o["createElementVNode"])("a",{class:"button is-primary is-info",onClick:t[27]||(t[27]=Object(o["withModifiers"])((function(e){return Ie.newPropertyCardModal()}),["prevent"]))},_t)])]),Object(o["createElementVNode"])("div",Kt,[Object(o["createElementVNode"])("div",Rt,[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("table",qt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Be.product.properties,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t,"data-key":t},[Object(o["createElementVNode"])("th",null,[Object(o["createElementVNode"])("div",Gt,[zt,Object(o["createElementVNode"])("div",Jt,[Object(o["createElementVNode"])("input",{class:"input has-text-weight-normal has-text-left",disabled:Ie.getPropertyStrings(e,t).name===t,type:"text",translate:"yes",placeholder:"Property Key","data-orig":t,value:t,onKeyup:function(e){return Ie.changePropertyValue(t,"key")}},null,40,Wt)]),Yt])]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",Qt,[Xt,Object(o["createElementVNode"])("div",Zt,[Object(o["createElementVNode"])("input",{class:"input has-text-weight-normal has-text-left",type:"text",translate:"yes",placeholder:"Property Name","data-orig":Ie.getPropertyStrings(e,t).name,value:Ie.getPropertyStrings(e,t).name,onKeyup:function(e){return Ie.changePropertyValue(t,"name")}},null,40,er),Object(o["createVNode"])(yr,{type:"is-info",value:Ie.checkIfPropertyHasLang(e,"name"),onInput:function(r){return Ie.changePropertyLangOption(e,t,"name")},translate:"yes"},{default:Object(o["withCtx"])((function(){return[tr]})),_:2},1032,["value","onInput"])]),rr])]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",or,[ar,Object(o["createElementVNode"])("div",cr,[Object(o["createElementVNode"])("input",{class:"input has-text-weight-normal has-text-left",type:"text",translate:"yes",placeholder:"Property Value","data-orig":Ie.getPropertyStrings(e,t).value,value:Ie.getPropertyStrings(e,t).value,onKeyup:function(e){return Ie.changePropertyValue(t,"value")}},null,40,nr),Object(o["createVNode"])(yr,{type:"is-info",value:Ie.checkIfPropertyHasLang(e,"value"),onInput:function(r){return Ie.changePropertyLangOption(e,t,"value")}},{default:Object(o["withCtx"])((function(){return[lr]})),_:2},1032,["value","onInput"])])])]),Object(o["createElementVNode"])("td",sr,[Object(o["createElementVNode"])("a",{href:"#revemoProperty",class:"is-size-4 has-text-danger",onClick:Object(o["withModifiers"])((function(e){return Ie.removeProperty(t)}),["prevent"])},[Object(o["createVNode"])(De,{icon:"minus"})],8,ir)])],8,Ht)})),128))])])])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(vr,{product:Be.product,editable:!0},null,8,["product"]),Be.product&&Be.product.data&&Be.product.data.related&&Be.product.data.related.products?(Object(o["openBlock"])(),Object(o["createElementBlock"])("section",dr,[Object(o["createVNode"])(Or,{label:"Enter order codes of related products"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Ut,{modelValue:Be.product.data.related.products,"onUpdate:modelValue":t[28]||(t[28]=function(e){return Be.product.data.related.products=e}),data:Be.filteredProductCodes,autocomplete:"","allow-new":!1,field:"user.first_name",icon:"tags",placeholder:"Related",type:"is-info",onTyping:Ie.getFilteredRelatedProducts},null,8,["modelValue","data","onTyping"])]})),_:1})])):Object(o["createCommentVNode"])("",!0),Be.product&&null!=Be.product&&Be.product.data&&Be.product.data.related&&Be.product.data.related.productResults&&Be.product.data.related.productResults.length>0&&e.$store&&e.$store.state&&e.$store.state.coredata?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ur,[Object(o["createElementVNode"])("div",pr,[mr,Object(o["createElementVNode"])("div",br,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Be.product.data.related.productResults,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(jr,{key:e._id+t,class:"tile is-parent is-3",title:e.descriptionShort[Be.language.code],to:{name:"productDetail",params:{category:Be.parentCategoryDetail.pathSlug,product:e._id,slug:e.slug}}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(Vr,{product:e},null,8,["product"])]})),_:2},1032,["title","to"])})),128))])])])):Object(o["createCommentVNode"])("",!0),Be.product&&null!=Be.product?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",gr,[Object(o["createElementVNode"])("div",hr,[Object(o["createElementVNode"])("section",null,[Object(o["createElementVNode"])("button",{class:"button is-danger",onClick:t[29]||(t[29]=function(e){return Ie.deleteProduct()}),translate:"yes"},"DELETE This Product"),fr])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(Nr,{modal:Be.modal},null,8,["modal"])])):Object(o["createCommentVNode"])("",!0)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");var jr=r("06c5");function yr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Object(jr["a"])(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,n=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return n=e.done,e},e:function(e){l=!0,c=e},f:function(){try{n||null==r["return"]||r["return"]()}finally{if(l)throw c}}}}r("498a"),r("25f0"),r("b64b"),r("4de4"),r("caad"),r("2532"),r("a15b"),r("ac1f"),r("1276"),r("159b");var vr=r("77b6"),Vr=r.n(vr),Nr=(r("2b31"),r("7918")),Er=r("5ac7"),kr={key:0,class:"modal is-active"},wr=Object(o["createElementVNode"])("div",{class:"modal-background"},null,-1),xr={class:"animation-content"},Cr={action:""},Pr={class:"modal-card",style:{width:"auto"}},$r=Object(o["createElementVNode"])("header",{class:"modal-card-head"},[Object(o["createElementVNode"])("p",{class:"modal-card-title",translate:"yes"},"New Product Property")],-1),Lr={class:"modal-card-body"},Sr={class:"control select"},Br=Object(o["createElementVNode"])("option",{disabled:"disabled",value:"",translate:"yes"},"Select language",-1),Ir=Object(o["createElementVNode"])("option",{value:""},[Object(o["createTextVNode"])("-- "),Object(o["createElementVNode"])("span",{translate:"yes"},"None"),Object(o["createTextVNode"])(" --")],-1),Dr=["value"],Tr={class:"modal-card-foot"};function Ar(e,t,r,a,c,n){var l=Object(o["resolveComponent"])("o-field");return r.modal?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",kr,[wr,Object(o["createElementVNode"])("div",xr,[Object(o["createElementVNode"])("form",Cr,[Object(o["createElementVNode"])("div",Pr,[$r,Object(o["createElementVNode"])("section",Lr,[e.$store.state.coredata&&e.$store.state.coredata.langs?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,label:"Language"},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Sr,[Object(o["withDirectives"])(Object(o["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.propertyLang=e})},[Br,Ir,(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.$store.state.coredata.langs,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{value:e.code,key:e.code},Object(o["toDisplayString"])(e.name),9,Dr)})),128))],512),[[o["vModelSelect"],c.propertyLang]])])]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,{label:"Property key"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.propertyKey=e}),placeholder:"Property key",required:""},null,512),[[o["vModelText"],c.propertyKey]])]})),_:1}),c.propertyLang?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,label:"Property Name"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.propertyName=e}),placeholder:"Property Name"},null,512),[[o["vModelText"],c.propertyName]])]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,{label:"Property value"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.propertyValue=e}),placeholder:"Property value",required:""},null,512),[[o["vModelText"],c.propertyValue]])]})),_:1})]),Object(o["createElementVNode"])("footer",Tr,[Object(o["createElementVNode"])("button",{class:"button",type:"button",onClick:t[4]||(t[4]=function(t){return e.$parent.modal=!1}),translate:"yes"},"Close"),Object(o["createElementVNode"])("button",{class:"button is-primary",onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(e){return n.setProperty()}),["prevent"])),translate:"yes"},"Add Property")])])])])])):Object(o["createCommentVNode"])("",!0)}var Mr={props:["modal"],name:"ProductNewEditProperty",data:function(){return{propertyKey:null,propertyName:null,propertyValue:null,propertyLang:null}},mounted:function(){},methods:{setProperty:function(){console.log(this.$parent.setProperty(this.propertyKey,this.propertyValue,this.propertyLang,this.propertyName))}}},Fr=r("6b0d"),Ur=r.n(Fr);const _r=Ur()(Mr,[["render",Ar]]);var Kr=_r,Rr={name:"ProductNewEdit",data:function(){return{product:null,productMainImageFile:null,productPropertyLangSwitches:{},parentCategoryDetail:null,language:{code:"en",longCode:"en-US",name:"English"},newLanguage:null,variationModel:null,editor:null,editing:!1,userEditAllowed:!1,filteredCategoriesSlugs:[],filteredProductCodes:[],renderComponent:!0,modal:null,fireCounter:0,showPriceLevels:!1,dataToGenerateFromName:{slug:!0,externalId:!0},productTypes:["product","subscription"]}},components:{"slider-carousel":Nr["a"],"product-box":Er["a"],"product-property":Kr},created:function(){this.language=this.$store.state.language},computed:{user:function(){return this.$store.getters.getUserProfile}},beforeRouteLeave:function(e,t,r){this.editor&&this.editor.destroy(),r()},watch:{user:function(e,t){console.log("new & old",e,t),e&&null!==e&&(this.getUserEditAllowed(),this.userEditAllowed&&this.getProductDetail())}},mounted:function(){this.getUserEditAllowed(),console.log("mounted this.userEditAllowed",this.userEditAllowed),this.userEditAllowed&&this.getProductDetail()},methods:{getUserEditAllowed:function(){if(this.language=this.$store.state.language,this.user&&null!==this.user&&this.user.type&&"admin"===this.user.type)return this.userEditAllowed=!0,void(this.user.settings.language&&(this.language=this.$store.state.language));this.userEditAllowed=!1},getProductDetail:function(){var e=this;this.$route.params&&this.$route.params.category&&""!==this.$route.params.category.toString().trim()&&this.$route.params.product&&""!==this.$route.params.product.toString().trim()&&("---new"===this.$route.params.product.toString().trim()&&"---new"===this.$route.params.slug.toString().trim()?setTimeout((function(){e.product=e.getEmptyProduct(),e.runEditor()}),1e3):this.$httpc.get("products/"+this.$route.params.category+"/detail/"+this.$route.params.product+"?edit=true").then((function(t){if(t.data){if(e.product=t.data,e.product.name&&e.$store.state&&"undefined"!==typeof e.product.name[e.language.code]&&(document.title=e.product.name[e.language.code]+" - StretchShop"),e.product&&e.product.categories&&(e.filteredCategoriesSlugs=e.product.categories),e.product&&e.product.properties){var r=Object.keys(e.product.properties);if(r&&r.length>0)for(var o=0;o<r.length;o++){var a=r[o];e.productPropertyLangSwitches[a]={name:e.checkIfPropertyHasLang(e.product.properties[a],"name"),value:e.checkIfPropertyHasLang(e.product.properties[a],"value")}}}e.runEditor()}t.data.products&&(e.products=t.data.products),t.data.parentCategoryDetail&&(e.parentCategoryDetail=t.data.parentCategoryDetail)})).catch((function(e){console.log(e)})).then((function(){})))},getProductImagePath:function(e){if(e&&this.$store.state.coredata&&this.$store.state.coredata.settings&&this.$store.state.coredata.settings.assets&&this.$store.state.coredata.settings.assets.url){var t=new Date;return this.$helpers.getProductImagePath(this.$store.state.coredata,e)+"?"+t.getTime()}return null},getProductGalleryImagePath:function(e,t){return e&&this.$store.state.coredata&&this.$store.state.coredata.settings&&this.$store.state.coredata.settings.assets&&this.$store.state.coredata.settings.assets.url?this.$helpers.getProductImagePath(this.$store.state.coredata,e,t):null},newPropertyCardModal:function(){this.modal=!0},checkIfPropertyHasLang:function(e,t){var r=this;if(e&&e[t]&&this.$store&&this.$store.state&&this.$store.state.coredata&&this.$store.state.coredata.langCodes){var o=Object.keys(e[t]),a=o.filter((function(e){return r.$store.state.coredata.langCodes.includes(e)}));if(a&&a.length>0)return!0}return!1},changePropertyLangOption:function(e,t,r){console.log("value query:",".product-properties .table data-key["+t+"] .field.property-"+r+" input[text]");var o=this.$el.querySelector('.product-properties .table [data-key="'+t+'"] .field.property-'+r+" input[type=text]").value,a=this.productPropertyLangSwitches[t],c="remove";!1===a[r]&&(c="add");var n=this.product.properties[t];if(console.log("changePropertyLangOption params and value:",e,t,r,o,c),r&&"name"===r){if("remove"===c)!0===a.name&&!0===a.value?(delete n.name,delete this.product.properties[t],this.product.properties[o]=n):!0===a.name&&!1===a.value&&(delete this.product.properties[t],this.product.properties[o]=n.value);else if("add"===c){this.product.properties[t].constructor!==Object&&(this.product.properties[t]={value:this.product.properties[t]}),this.product.properties[t][r]={};for(var l=0;l<this.$store.state.coredata.langCodes.length;l++)this.product.properties[t][r][this.$store.state.coredata.langCodes[l]]=null;this.product.properties[t][r][this.language.code]=o}}else if(r&&"value"===r)if("remove"===c)!0===a.name?this.product.properties[t].value=o:!1===a.name&&(this.product.properties[t]=o);else if("add"===c){this.product.properties[t].constructor===Object?(delete n.value,this.product.properties[t]=n):(this.product.properties[t]={},this.product.properties[t][r]={});for(var s=0;s<this.$store.state.coredata.langCodes.length;s++)this.product.properties[t][r][this.$store.state.coredata.langCodes[s]]=null;n.value&&n.value.constructor===Array?this.product.properties[t][r][this.language.code]=n.value:n&&n.constructor===Array?this.product.properties[t][r][this.language.code]=n:this.product.properties[t][r][this.language.code]=o}this.productPropertyLangSwitches[t]&&(console.log("this.productPropertyLangSwitches[key][type]:",this.productPropertyLangSwitches[t][r]),this.productPropertyLangSwitches[t][r]=!this.productPropertyLangSwitches[t][r])},changePropertyValue:function(e,t){var r=this.$el.querySelector('.product-properties .table [data-key="'+e+'"] .field.property-'+t+" input[type=text]").value,o=this.productPropertyLangSwitches[e];if(console.log("incoming type & nameLangOptions",t,o),"key"===t)"undefined"!==typeof this.product.properties[r]?this.$helpers.formUndecorateAndDecorateFields(["property-key"],[{name:"property-key",action:"exists"}]):this.renamePropertyKey(e,r);else if(o&&"undefined"!==typeof o[t])if("name"===t)if(!0===o[t])console.log("change for lang version of "+t+"."+this.language.code+":",r),this.product.properties[e][t][this.language.code]=r;else if(console.log("change for key:value version of "+t+":",r),"undefined"!==typeof this.product.properties[r])this.$helpers.formUndecorateAndDecorateFields(["property-name"],[{name:"property-name",action:"exists"}]);else{var a=document.querySelector(".field.property-name");this.$helpers.undecorateFormField(a,"exists"),this.renamePropertyKey(e,r)}else"value"===t&&(!0===o[t]?(console.log("change for lang version of "+t+" - this.product.properties["+e+"]["+t+"]["+this.language.code+"]:",r),this.product.properties[e][t][this.language.code]=r):(console.log("change for key:value version of "+t+":",r),"undefined"!==typeof this.product.properties[e].value?this.product.properties[e].value=r:this.product.properties[e]=r))},renamePropertyKey:function(e,t){var r=this.product.properties[e],o=this.productPropertyLangSwitches[e];delete this.product.properties[e],delete this.productPropertyLangSwitches[e],this.product.properties[t]=r,this.productPropertyLangSwitches[t]=o;var a=this.$el.querySelector('.product-properties .table [data-key="'+e+'"]');a&&a.setAttribute("data-key",t),this.$forceUpdate()},getPropertyStrings:function(e,t){if(e.constructor===Array)return{name:t,value:e.join(", ")};if(e.constructor===Object){if("undefined"!==typeof e.name&&"undefined"!==typeof e.value&&this.$store&&this.$store.state&&this.$store.state.language){var r=this.getPropertyNameResult(e,t),o=this.getPropertyValueResult(e,t);if(""!==r&&""!==o)return{name:r,value:o}}else if("undefined"!==typeof e.value&&this.$store&&this.$store.state&&this.$store.state.language){var a=t,c=this.getPropertyValueResult(e);if(""!==a&&""!==c)return{name:a,value:c}}return{name:t,value:e}}return{name:t,value:e}},getPropertyNameResult:function(e,t){return"undefined"!==typeof e.name[this.$store.state.language.code]?e.name[this.$store.state.language.code]:t.name},getPropertyValueResult:function(e){return"undefined"!==typeof e.value[this.$store.state.language.code]?e.value[this.$store.state.language.code].constructor===Array?e.value[this.$store.state.language.code].join(", "):e.value[this.$store.state.language.code]:e.value},getFilteredCategories:function(e){var t=this;return e&&""!==e.toString().trim()?this.$httpc.post("categories/find",{query:{pathSlug:{$regex:e},type:"products"}}).then((function(e){if(e.data)return e.data})).catch((function(e){console.log(e)})).then((function(e){var r=[];if(e&&e.categories)for(var o=0;o<e.categories.length;o++)t.product.categories.indexOf(e.categories[o].pathSlug)<0&&r.push(e.categories[o].pathSlug);return t.filteredCategoriesSlugs=r,r})):(t.filteredCategoriesSlugs=[],[])},getFilteredRelatedProducts:function(e){var t=this;return e&&""!==e.toString().trim()?this.$httpc.post("products/find",{query:{orderCode:{$regex:e}}}).then((function(e){if(e.data)return e.data})).catch((function(e){console.log(e)})).then((function(e){for(var r=[],o=0;o<e.length;o++)t.product.data.related.products.indexOf(e[o].orderCode)<0&&r.push(e[o].orderCode);return t.filteredProductCodes=r,r})):(t.filteredProductCodes=[],[])},setProperty:function(e,t,r,o){if(console.log("add("+e+","+t+") in lang:"+r+" with Name:"+o),"undefined"!==typeof e&&"undefined"!==typeof t&&e&&t)if(this.product&&this.product.properties&&"undefined"!==typeof this.product.properties[e]){var a=this.product.properties[e];"undefined"!==typeof o&&o!==e&&(a.name={},"undefined"!==typeof r?a.name[r]=o:a.name=o)}else{var c={};"undefined"!==typeof o&&o&&(c.name={},"undefined"!==typeof r&&r?c.name[r]=o:c.name=o),"undefined"!==typeof r&&r?(c.value={},c.value[r]=t):"undefined"!==typeof c.name?c.value=t:c=t,c&&(this.product.properties[e]=c)}this.modal=!1},removeProperty:function(e){console.log("remove("+e+")"),this.product&&this.product.properties&&"undefined"!==typeof this.product.properties[e]&&(delete this.product.properties[e],this.$forceUpdate())},runEditor:function(){var e=this;if(this.$route.query.lang){var t=this.$store.dispatch("checkLanguage",this.$route.query.lang);t.then((function(t){console.log("language check result:",t),e.language&&e.language.code&&t&&t.code&&e.language.code!==t.code&&(e.language=t)}))}setTimeout((function(){e.editor=Vr.a.EditorApp.get(),console.log("get editor"),e.editor.init("*[data-editable]","data-name"),console.log("init editor"),e.editor.start(),console.log("start editor"),e.editor.ignition().state("editing"),console.log("editor ignition state editing"),e.editing=!0,e.newLanguage=e.language,e.editor.addEventListener("saved",(function(t){console.log("editor saved",t);var r=t.detail().regions;console.log("regions",r),e.editor.busy(!0),r&&"undefined"!==typeof r.description&&(e.product.descriptionLong[e.language.code]=r.description,console.log("product descriptionLong:",e.product.descriptionLong[e.language.code])),e.saveProduct()}))}),1e3)},productMainImageDelete:function(){var e=this;if(confirm("Are you sure?")){var t={timeout:15e3,needsAuth:!0},r=this.getProductImagePath(this.product.orderCode),o="";if(""!==r.trim()){var a=r.split("/");a.length>0&&(o=a[a.length-1])}console.log(this.product.orderCode,r),this.$httpc.delete("user/image/products/"+this.product.orderCode+"/"+o,t).then((function(t){t&&t.data&&t.data.success&&(console.log("image delete response",t.data),e.$el.querySelector(".product-image-wrapper img.image-main").setAttribute("src",e.getProductImagePath(e.product.orderCode)))}))}},productMainImageUpload:function(e){var t=this;if(t.productMainImageFile=e.target.files,console.log("productMainImageFile:",t.productMainImageFile),t.productMainImageFile){console.log("incoming:",t.productMainImageFile,t.productMainImageFile.length);var r=new FormData;if(t.productMainImageFile.length&&"undefined"!==typeof t.productMainImageFile.length&&t.productMainImageFile.length>0){for(var o=0;o<t.productMainImageFile.length;o++){var a=t.productMainImageFile[o];r.append("files["+o+"]",a)}console.log("incoming 2.1")}else r.append("files[0]",t.productMainImageFile),console.log("incoming 2.2");var c,n=yr(r.entries());try{for(n.s();!(c=n.n()).done;){var l=c.value;console.log(l[0]+", "+l[1])}}catch(s){n.e(s)}finally{n.f()}t.$httpc.post("/products/upload/"+t.product.orderCode+"/main",r,{needsAuth:!0}).then((function(e){if(e&&e.data&&"'"===e.data.substr(0,1)&&"'"===e.data[e.data.length-1]){var r=e.data.length-2;if(e.data=e.data.substr(1,r),e.data=JSON.parse(e.data),e.data.files&&e.data.files.length>0&&e.data.files[0].path&&""!==e.data.files[0].path.trim()){var o=t.$el.querySelector(".product-image-wrapper img.image-main");if(o){var a=new Date;o.setAttribute("src",t.$store.state.coredata.settings.assets.url+"/products/"+e.data.files[0].path+"?"+a.getTime())}}}})).catch((function(e){console.error("product main image upload error:",e)}))}},changeEditedLang:function(){this.fireCounter++,this.editing&&this.newLanguage&&this.newLanguage.code&&1===this.fireCounter&&(window.location=window.location.origin+this.$route.path+"?lang="+this.newLanguage.code)},saveProduct:function(){var e=this;if(this.product&&this.product._id&&!this.product.id&&(this.product.id=this.product._id),this.product.price&&this.product.stockAmount&&(this.product.price=parseFloat(this.product.price),this.product.stockAmount=parseFloat(this.product.stockAmount)),this.product.priceLevels){var t=Object.keys(this.product.priceLevels);t.length>0&&t.forEach((function(t){var r=Object.keys(e.product.priceLevels[t]);r.length>0&&r.forEach((function(r){e.product.priceLevels[t][r].price=parseFloat(e.product.priceLevels[t][r].price)}))}))}var r={products:[]};r.products.push(this.product),this.$httpc.put("products",r,{needsAuth:!0}).then((function(t){if(t.data&&t.data.length>0){var r=t.data[0],o=e.$router.resolve({name:"productNewEdit",params:{category:r.categories[0],slug:r.slug,product:r._id}});window.location=o.href}})).catch((function(e){console.log("saveProduct error:",e)}))},deleteProduct:function(){var e=this,t={products:[{id:e.product._id}]};this.product&&this.product._id&&confirm("Are you sure you want to delete this product?")&&this.$httpc.delete("products",{data:t}).then((function(e){e&&e.data&&alert("Product has been successfully removed. You will be redirected now")}))},getEmptyProduct:function(){var e=this;return{externalId:null,orderCode:null,variationGroupId:null,publisher:e.user.email,type:"product",subtype:null,name:e.$helpers.getLangsObject(e.$store.state.coredata.langCodes),descriptionShort:e.$helpers.getLangsObject(e.$store.state.coredata.langCodes),descriptionLong:e.$helpers.getLangsObject(e.$store.state.coredata.langCodes),price:0,tax:null,stockAmount:0,slug:null,properties:{},categories:[],dates:{dateCreated:null,dateUpdated:null,dateSynced:null},data:{related:{products:[],productResults:[]},gallery:{name:e.$helpers.getLangsObject(e.$store.state.coredata.langCodes),images:[]}},note:null,parentCategoryDetail:{},activity:{start:null,end:null}}},checkNameDependents:function(){if(this.product&&!this.product._id){var e=this.language&&this.language.code?this.language.code:null;this.newLanguage&&this.newLanguage.code&&(e=this.newLanguage.code),this.product.name&&this.product.name[e]&&""!==this.product.name[e].trim()&&((this.product.slug&&""===this.product.slug.trim()||this.dataToGenerateFromName.slug)&&(this.product.slug=this.$helpers.stringToSlug(this.product.name[e]),this.dataToGenerateFromName.slug=!0),(this.product.externalId&&""===this.product.externalId.trim()||this.dataToGenerateFromName.externalId)&&(this.product.externalId=this.$helpers.stringToSlug(this.product.name[e]),this.dataToGenerateFromName.externalId=!0))}},getActivity:function(){var e={start:null,end:null};return this.product&&null!==this.product&&this.product.activity&&null!==this.product.activity&&(this.product.activity.start&&""!==this.product.activity.start.toString().trim()&&(e.start=new Date(this.product.activity.start)),this.product.activity.end&&""!==this.product.activity.end.toString().trim()&&(e.end=new Date(this.product.activity.end))),e},setActivity:function(e,t){t&&this.product&&null!==this.product&&(this.product.activity||(this.product.activity={start:null,end:null}),this.product.activity[e]=t)},recalculatePriceLevels:function(e){var t=this;this.$httpc.get("products/rebuildpl/"+e).then((function(e){e&&e.data&&null!==e.data&&e.data.levels&&(t.product.priceLevels=e.data.levels)}))},checkForSubscriptionData:function(){this.product&&this.product.type&&"subscription"===this.product.type&&(this.product.data||(this.product.data={}),this.product.data.subscription||(this.product.data.subscription={period:"month",duration:1,cycles:0}))}}};r("1128");const qr=Ur()(Rr,[["render",Or],["__scopeId","data-v-ddaf9ee2"]]);t["default"]=qr},"5a34":function(e,t,r){var o=r("da84"),a=r("44e7"),c=o.TypeError;e.exports=function(e){if(a(e))throw c("The method doesn't accept regular expressions");return e}},"6b75":function(e,t,r){"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}r.d(t,"a",(function(){return o}))},7249:function(e,t,r){},ab13:function(e,t,r){var o=r("b622"),a=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[a]=!1,"/./"[e](t)}catch(o){}}return!1}},caad:function(e,t,r){"use strict";var o=r("23e7"),a=r("4d64").includes,c=r("44d2");o({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),c("includes")},d28b:function(e,t,r){var o=r("746f");o("iterator")}}]);
//# sourceMappingURL=chunk-7d97db4d.c32eeea5.js.map