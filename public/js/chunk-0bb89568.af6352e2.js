(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bb89568"],{"07e1":function(e,t,n){"use strict";n("b728")},b728:function(e,t,n){},e372:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),s=function(e){return Object(c["pushScopeId"])("data-v-2fbf0ecf"),e=e(),Object(c["popScopeId"])(),e},a={id:"userSubscriptionDetail"},r={key:0},i={class:"container"},o={class:"columns is-variable is-centered"},l={class:"column is-8"},d={class:"breadcrumb","aria-label":"breadcrumbs"},u=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Subscriptions",-1)})),b={class:"is-active"},p={"aria-current":"page"},m=s((function(){return Object(c["createElementVNode"])("span",{class:"subscription-word",id:"subscription-breadcrumb",translate:"yes"}," Subscription ",-1)})),O=Object(c["createTextVNode"])("  "),j={class:"subscription-title"},N=Object(c["createTextVNode"])("   #"),y={class:"title is-2"},V=s((function(){return Object(c["createElementVNode"])("span",{id:"subscription-detail-title",translate:"yes",class:"is-size-3"},"Subscription",-1)})),E=Object(c["createTextVNode"])(),f=s((function(){return Object(c["createElementVNode"])("br",null,null,-1)})),g={class:"subscription-title"},k={class:"container subscription-detail-data"},v={class:"columns is-variable is-centered"},h={class:"column is-8"},S={class:"columns is-variable is-centered"},D={class:"column is-6"},B={key:0},C=s((function(){return Object(c["createElementVNode"])("h4",{class:"title is-4",translate:"yes"},"History",-1)})),x={class:"is-size-7"},w={key:0},T=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Related order",-1)})),_=Object(c["createTextVNode"])(": "),I={class:"column is-6"},$=s((function(){return Object(c["createElementVNode"])("h4",{class:"title is-4",translate:"yes"},"Main info",-1)})),z={class:"info info-settings"},A=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Status",-1)})),P=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Price & Period",-1)})),L=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Cycles",-1)})),M={key:0,id:"subscriptionCyclesInfinity",translate:"yes"},F={key:1},J={class:"info info-dates"},R={key:0},Y=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Next payment",-1)})),q={class:"is-size-7"},H={key:1},U=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Last payment",-1)})),G={class:"is-size-7"},K={key:2},Q=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Created",-1)})),W={class:"is-size-7"},X={key:3},Z=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Started",-1)})),ee={class:"is-size-7"},te={class:"info info-more"},ne=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Original order",-1)})),ce={key:0},se=s((function(){return Object(c["createElementVNode"])("h4",{class:"title is-5",translate:"yes"},"Available Actions",-1)})),ae={key:0},re=s((function(){return Object(c["createElementVNode"])("p",{class:"is-size-7 has-text-grey-dark"}," Makes your subscription active again with related payment applying. You receive e-mail when your subscription and related services are re-activated. ",-1)})),ie={key:1},oe=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"Admin Actions",-1)})),le=s((function(){return Object(c["createElementVNode"])("p",{class:"is-size-7 has-text-grey-dark",translate:"yes"}," Mark next cycle as paid. For cases when payment system failed but customer paid other way. ",-1)})),de={key:0},ue=s((function(){return Object(c["createElementVNode"])("p",{class:"is-size-7 has-text-grey-dark",translate:"yes"}," Suspends subscription and its payment. You receive e-mail when your subscription and related services are paused. ",-1)})),be={key:1,class:"container"},pe={class:"columns is-variable is-centered"},me={class:"column is-8"},Oe=s((function(){return Object(c["createElementVNode"])("h1",{class:"title is-1",translate:"yes"},"Unauthorized",-1)})),je=s((function(){return Object(c["createElementVNode"])("span",{translate:"yes"},"To see order detail, you may need to",-1)})),Ne=Object(c["createTextVNode"])("   "),ye=Object(c["createTextVNode"])("Log in"),Ve=Object(c["createTextVNode"])(". ");function Ee(e,t,n,s,Ee,fe){var ge=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Ee.subscription?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("nav",d,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,[Object(c["createVNode"])(ge,{to:{name:"userSubscriptions"}},{default:Object(c["withCtx"])((function(){return[u]})),_:1})]),Object(c["createElementVNode"])("li",b,[Object(c["createElementVNode"])("a",p,[m,O,Object(c["createElementVNode"])("span",j,[N,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(fe.splitTitle(Ee.subscription._id)[0]),1),Object(c["createTextVNode"])(Object(c["toDisplayString"])(fe.splitTitle(Ee.subscription._id)[1]),1)])])])])])])])]),Object(c["createElementVNode"])("h2",y,[V,E,f,Object(c["createElementVNode"])("strong",g,Object(c["toDisplayString"])(Ee.subscription.orderItemName),1)]),Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("div",D,[Ee.subscription.history?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",B,[C,Object(c["createElementVNode"])("ol",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.$helpers.reverseArrayItems(Ee.subscription.history),(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[Object(c["createElementVNode"])("div",x,Object(c["toDisplayString"])(e.date),1),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.action),1)]),e.relatedOrder?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",w,[T,_,Object(c["createVNode"])(ge,{to:{name:"userOrderDetail",params:{id:e.relatedOrder}}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.relatedOrder),1)]})),_:2},1032,["to"])])):Object(c["createCommentVNode"])("",!0)])])})),128))])])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",I,[$,Object(c["createElementVNode"])("div",z,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,[A,Object(c["createElementVNode"])("strong",{class:Object(c["normalizeClass"])(fe.statusClass(Ee.subscription.status))},Object(c["toDisplayString"])(Ee.subscription.status),3)]),Object(c["createElementVNode"])("li",null,[P,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(Ee.subscription.price)+" / "+Object(c["toDisplayString"])(Ee.subscription.duration)+" "+Object(c["toDisplayString"])(Ee.subscription.period),1)]),Object(c["createElementVNode"])("li",null,[L,Object(c["createElementVNode"])("strong",null,[Ee.subscription.cycles<=1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",M,"Infinity")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",F,Object(c["toDisplayString"])(Ee.subscription.cycles),1))])])])]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("ul",null,[Ee.subscription&&Ee.subscription.dates&&Ee.subscription.dates.dateOrderNext?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",R,[Y,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateOrderNext)[0]),1),Object(c["createElementVNode"])("span",q,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateOrderNext)[1]),1)])):Object(c["createCommentVNode"])("",!0),Ee.subscription&&Ee.subscription.dates&&Ee.subscription.dates.dateEnd?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",H,[U,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateEnd)[0]),1),Object(c["createElementVNode"])("span",G,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateEnd)[1]),1)])):Object(c["createCommentVNode"])("",!0),Ee.subscription&&Ee.subscription.dates&&Ee.subscription.dates.dateCreated?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",K,[Q,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateCreated)[0]),1),Object(c["createElementVNode"])("span",W,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateCreated)[1]),1)])):Object(c["createCommentVNode"])("",!0),Ee.subscription&&Ee.subscription.dates&&Ee.subscription.dates.dateStart?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",X,[Z,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateStart)[0]),1),Object(c["createElementVNode"])("span",ee,Object(c["toDisplayString"])(fe.splitDate(Ee.subscription.dates.dateStart)[1]),1)])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",te,[Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,[ne,Object(c["createElementVNode"])("strong",null,[Object(c["createVNode"])(ge,{to:{name:"userOrderDetail",params:{id:Ee.subscription.orderOriginId}}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(Ee.subscription.orderOriginId),1)]})),_:1},8,["to"])])]),Ee.subscription&&Ee.subscription.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",ce,[se,"suspended"===Ee.subscription.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ae,[Object(c["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(e){return fe.actionsActivate()}),class:"button",translate:"yes"},"Re-activate"),re])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0),fe.userIsAdmin?(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",ie,[oe,Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(e){return fe.actionsPaid()}),class:"button",translate:"yes"},"Cycle Paid"),le]),"active"===Ee.subscription.status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",de,[Object(c["createElementVNode"])("button",{onClick:t[2]||(t[2]=function(e){return fe.actionsSuspend()}),class:"button",translate:"yes"},"Suspend"),ue])):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])])])])])])])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",be,[Object(c["createElementVNode"])("div",pe,[Object(c["createElementVNode"])("div",me,[Oe,Object(c["createElementVNode"])("p",null,[je,Ne,Object(c["createVNode"])(ge,{to:{name:"login"},tag:"a",class:"","active-class":"is-active",translate:"yes"},{default:Object(c["withCtx"])((function(){return[ye]})),_:1}),Ve])])])]))])}n("fb6a"),n("ac1f"),n("1276");var fe={name:"userSubscriptionDetail",data:function(){return{subscription:null}},created:function(){this.getSubscription(this.$route.params.id)},computed:{userIsAdmin:function(){return!!(this.$store.state&&this.$store.state.user&&this.$store.state.user.logged&&this.$store.state.user.profile&&this.$store.state.user.profile.type&&"admin"===this.$store.state.user.profile.type)}},methods:{getSubscription:function(e){var t=this,n={timeout:3e3,needsAuth:!0},c={query:{_id:e},limit:1};this.$httpc.post("subscription/list",c,n).then((function(e){e&&e.data&&e.data&&e.data.results&&1===e.data.results.length&&(t.subscription=e.data.results[0])})).catch((function(e){console.log(e)})).then((function(){this.eventBus.emit("translateContent",t.$store.getters.getTranslates)}))},splitTitle:function(e){return[e.slice(0,6),e.slice(6)]},splitDate:function(e){return e.split("T")},actionsSuspend:function(){var e=this;e.$httpc.get("/subscription/suspend/"+e.subscription._id,{timeout:1e4}).then((function(e){console.log("subscription/suspend response:",e)}))},actionsActivate:function(){var e=this;e.$httpc.get("/subscription/reactivate/"+e.subscription._id,{timeout:1e4}).then((function(e){console.log("subscription/activate response:",e)}))},getPaymentProviderName:function(){if(this.order&&this.order.data&&this.order.data.paymentData&&this.order.data.paymentData.codename){var e=this.order.data.paymentData.codename.split("_");if(e.constructor===Array&&e.length>0)return e[e.length-1]}return"paypal"},actionsPaid:function(){var e=this;e.$httpc.get("/order/payment/"+e.getPaymentProviderName()+"/adminsubscriptionpaid?paymentId="+e.subscription.data.agreementId+"&ba_token=run_by_admin",{timeout:1e4}).then((function(e){console.log("cycle paid response:",e),window.location.reload()}))},statusClass:function(e){return"active"===e?"has-text-success":"suspended"===e?"has-text-danger":""}}},ge=(n("07e1"),n("6b0d")),ke=n.n(ge);const ve=ke()(fe,[["render",Ee],["__scopeId","data-v-2fbf0ecf"]]);t["default"]=ve}}]);
//# sourceMappingURL=chunk-0bb89568.af6352e2.js.map