import{m as N,_ as I}from"./index-278cccc9.js";import{r as $,o as i,c as d,a as e,b as v,w as A,f as _,G as h,L as p,t as c,h as m,S,F as g,d as b,i as U,O as V,n as D,W as L,_ as O,e as E,g as F}from"./sett-4d48a041.js";import{O as M}from"./PaymentStripe-a35bc770.js";import"./edit-e2caae93.js";const q={name:"OrderUser",data(){return{newUserEmail:"",newUserEmail2:"",newUserPassword:"",newUserPassword2:""}},computed:{...N({user:"getUserProfile"})},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{updateUserData:function(){if(this.user){const t=this.$helpers.propertiesRequiredConfirm({email:this.newUserEmail,email2:this.newUserEmail,password:this.newUserPassword,password2:this.newUserPassword2},["email","password"],["email","password"]);if(t.result&&this.newUserEmail&&this.newUserEmail!=="")this.user.addressInvoice.email=this.newUserEmail,this.$store.state.user.email=this.newUserEmail,this.$store.state.password=this.newUserPassword,this.$parent.orderParams.order.user.email=this.newUserEmail,this.$parent.orderParams.order.user.password=this.newUserPassword;else{const o=this.$el.querySelector(".field."+t.fields[0]);o&&o.scrollIntoView({behaviour:"smooth",block:"start",inline:"nearest"}),this.$helpers.formUndecorateAndDecorateFields(t.fields,t.errors)}}const s=Object.assign({},this.user.addressInvoice);if(delete s.email,this.$helpers.verifyAddress(s)&&(this.$store.dispatch("setUserInvoiceAddress",this.user.addressInvoice),this.$parent.orderParams.order.addresses.invoiceAddress=this.user.addressInvoice,this.user&&this.user.company&&(this.user.company.name||this.user.company.orgId||this.user.company.taxId||this.user.company.taxVatId)&&(this.user.addressInvoice.companyName=this.user.company.name,this.user.addressInvoice.companyOrgId=this.user.company.orgId,this.user.addressInvoice.companyTaxId=this.user.company.taxId,this.user.addressInvoice.companyTaxVatId=this.user.company.taxVatId),this.$parent.updateOrder(),this.user&&this.user!==null&&this.user.addressInvoice&&this.user.addressInvoice.nameFirst&&this.user.addressInvoice.nameLast&&this.$store.state.user&&this.$store.state.user.profile&&this.$store.state.user.profile.addressInvoice.nameFirst&&this.$store.state.user.profile.addressInvoice.nameLast&&(this.$store.state.user.profile.addressInvoice.nameFirst!==this.user.addressInvoice.nameFirst&&(this.$store.state.user.profile.addressInvoice.nameFirst=this.user.addressInvoice.nameFirst),this.$store.state.user.profile.addressInvoice.nameLast!==this.user.addressInvoice.nameLast&&(this.$store.state.user.profile.addressInvoice.nameLast=this.user.addressInvoice.nameLast)),(typeof this.$parent.orderParams>"u"||this.$parent.orderParams===null)&&(this.$parent.orderParams={}),(typeof this.$parent.orderParams.order>"u"||this.$parent.orderParams.order===null)&&(this.$parent.orderParams.order={}),this.$parent.orderParams.order.addresses={invoiceAddress:this.user.addressInvoice},{addresses:[]}.addresses.push(this.user.addressInvoice),this.$parent.orderParams.errors&&this.$parent.orderParams.errors.userErrors&&this.$parent.orderParams.errors.userErrors.length>0)){const o={fields:[],errors:[]};this.$parent.orderParams.errors.userErrors.forEach(a=>{o.fields.push(a.value),o.errors.push({name:a.value,action:a.desc})}),this.$helpers.formUndecorateAndDecorateFields(o.fields,o.errors);const u=this.$el.querySelector(".field."+o.fields[0]);u&&u.scrollIntoView({behaviour:"smooth",block:"start",inline:"nearest"})}}}},x={id:"orderUser"},z=e("h2",{class:"title is-2",translate:"yes"},"Your Address",-1),W={key:0},j={class:"columns"},B={class:"column is-12"},G=e("span",{translate:"yes"},"Already registered?",-1),R={class:"columns is-variable is-2 is-centered"},Y={class:"column is-6",id:"cart-user-email"},H={class:"field email"},Z=e("label",{class:"label",translate:"yes"},"Email",-1),J={class:"control"},Q=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),e("div",{class:"form-message","data-message":"exists",translate:"yes"},"This email already exists")],-1),X={class:"column is-6",id:"cart-user-email2"},K={class:"field email2"},ee=e("label",{class:"label",translate:"yes"},"Email Confirm",-1),se={class:"control"},te=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),e("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1),re={class:"columns is-variable is-2 is-centered"},ae={class:"column is-6",id:"cart-user-password"},oe={class:"field password"},ie=e("label",{class:"label",translate:"yes"},"Password",-1),de={class:"control"},ne=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty")],-1),le={class:"column is-6",id:"cart-user-password2"},ce={class:"field password2"},me=e("label",{class:"label",translate:"yes"},"Password Confirm",-1),ue={class:"control"},he=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),e("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1),pe=e("div",{class:"columns"},[e("div",{class:"column is-12"},[e("hr")])],-1),ye={key:1},_e=e("span",{translate:"yes"},"Logged in as",-1),ve={key:0},fe={key:1},$e=e("br",null,null,-1),ge=e("span",{translate:"yes"},"Please check your email to verify your email",-1),be={class:"columns is-variable is-2"},Pe={class:"column is-6",id:"cart-user-name-first"},De={class:"field nameFirst"},Ie=e("label",{class:"label",translate:"yes"},"First Name",-1),ke={class:"control"},Te=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ce={class:"column is-6",id:"cart-user-name-last"},we={class:"field nameLast"},Ae=e("label",{class:"label",translate:"yes"},"Last Name",-1),Ue={class:"control"},Se=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Oe={class:"columns is-variable is-2"},Ne={class:"column is-12",id:"cart-user-street"},Ve={class:"field street"},Le=e("label",{class:"label",translate:"yes"},"Street",-1),Ee={class:"control"},Fe=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Me={class:"columns is-variable is-2"},qe={class:"column is-12",id:"cart-user-street2"},xe={class:"field street2"},ze=e("label",{class:"label",translate:"yes"},"Street 2",-1),We={class:"control"},je={class:"columns is-variable is-2"},Be={class:"column is-4",id:"cart-user-zip"},Ge={class:"field zip"},Re=e("label",{class:"label",translate:"yes"},"ZIP",-1),Ye={class:"control"},He=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ze={class:"column is-8",id:"cart-user-city"},Je={class:"field city"},Qe=e("label",{class:"label",translate:"yes"},"City",-1),Xe={class:"control"},Ke=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),es={class:"columns is-variable is-2"},ss={class:"column is-6",id:"cart-user-state"},ts={class:"field"},rs=e("label",{class:"label",translate:"yes"},"State",-1),as={class:"control"},os={class:"column is-6",id:"cart-user-country"},is={class:"field country"},ds=e("label",{class:"label",translate:"yes"},"Country",-1),ns={class:"control select"},ls=["value"],cs=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ms={class:"columns is-variable is-2 is-centered"},us={class:"column is-6"},hs={class:"field phone"},ps=e("label",{class:"label",translate:"yes"},"Phone",-1),ys={class:"control"},_s=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),vs=e("hr",null,null,-1),fs={key:2,class:"simple-wrapper"},$s={class:"columns is-variable is-2 is-centered"},gs={class:"column is-12"},bs={class:"field companyName"},Ps=e("label",{class:"label",translate:"yes"},"Company Name",-1),Ds={class:"control"},Is={class:"columns is-variable is-2 is-centered"},ks={class:"column is-6"},Ts={class:"field companyOrgId"},Cs=e("label",{class:"label",translate:"yes"},"Organisation ID",-1),ws={class:"control"},As={class:"columns is-variable is-2 is-centered"},Us={class:"column is-6"},Ss={class:"field companyTaxId"},Os=e("label",{class:"label"},"Company Tax ID",-1),Ns={class:"control"},Vs={class:"column is-6"},Ls={class:"field companyTaxVatId"},Es=e("label",{class:"label"},"Company VAT ID",-1),Fs={class:"control"},Ms={class:"button is-success",type:"submit"},qs=e("span",{translate:"yes"},"Set user order data",-1);function xs(s,t,o,u,a,l){const y=$("router-link"),n=$("font-awesome-icon");return i(),d("div",x,[z,e("form",{onSubmit:t[17]||(t[17]=U((...r)=>l.updateUserData&&l.updateUserData(...r),["prevent"]))},[!s.$store.state.user.logged||s.$store.state.user.logged!==!0?(i(),d("div",W,[e("div",j,[e("div",B,[G,v(y,{to:{name:"login"},tag:"a",class:"","active-class":"is-active",translate:"yes"},{default:A(()=>[_("Log in")]),_:1})])]),e("div",R,[e("div",Y,[e("div",H,[Z,e("div",J,[h(e("input",{class:"input",type:"email","onUpdate:modelValue":t[0]||(t[0]=r=>a.newUserEmail=r),translate:"yes",placeholder:"Email"},null,512),[[p,a.newUserEmail]])]),Q])]),e("div",X,[e("div",K,[ee,e("div",se,[h(e("input",{class:"input",type:"email","onUpdate:modelValue":t[1]||(t[1]=r=>a.newUserEmail2=r),translate:"yes",placeholder:"Email Confirm"},null,512),[[p,a.newUserEmail2]])]),te])])]),e("div",re,[e("div",ae,[e("div",oe,[ie,e("div",de,[h(e("input",{class:"input",type:"password","onUpdate:modelValue":t[2]||(t[2]=r=>a.newUserPassword=r),translate:"yes",placeholder:"Password"},null,512),[[p,a.newUserPassword]])]),ne])]),e("div",le,[e("div",ce,[me,e("div",ue,[h(e("input",{class:"input",type:"password","onUpdate:modelValue":t[3]||(t[3]=r=>a.newUserPassword2=r),translate:"yes",placeholder:"Password Confirm"},null,512),[[p,a.newUserPassword2]])]),he])])]),pe])):(i(),d("div",ye,[_e,_("   "),s.user.username?(i(),d("span",ve,c(s.user.username),1)):s.user.email?(i(),d("span",fe,[_(c(s.user.email)+" ",1),$e,ge])):m("v-if",!0)])),e("div",be,[e("div",Pe,[e("div",De,[Ie,e("div",ke,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>s.user.addressInvoice.nameFirst=r),translate:"yes",placeholder:"First Name"},null,512),[[p,s.user.addressInvoice.nameFirst]])]),Te])]),e("div",Ce,[e("div",we,[Ae,e("div",Ue,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[5]||(t[5]=r=>s.user.addressInvoice.nameLast=r),translate:"yes",placeholder:"Last Name"},null,512),[[p,s.user.addressInvoice.nameLast]])]),Se])])]),e("div",Oe,[e("div",Ne,[e("div",Ve,[Le,e("div",Ee,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[6]||(t[6]=r=>s.user.addressInvoice.street=r),translate:"yes",placeholder:"Street"},null,512),[[p,s.user.addressInvoice.street]])]),Fe])])]),e("div",Me,[e("div",qe,[e("div",xe,[ze,e("div",We,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[7]||(t[7]=r=>s.user.addressInvoice.street2=r),translate:"yes",placeholder:"Street 2"},null,512),[[p,s.user.addressInvoice.street2]])])])])]),e("div",je,[e("div",Be,[e("div",Ge,[Re,e("div",Ye,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[8]||(t[8]=r=>s.user.addressInvoice.zip=r),translate:"yes",placeholder:"ZIP"},null,512),[[p,s.user.addressInvoice.zip]])]),He])]),e("div",Ze,[e("div",Je,[Qe,e("div",Xe,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[9]||(t[9]=r=>s.user.addressInvoice.city=r),translate:"yes",placeholder:"City"},null,512),[[p,s.user.addressInvoice.city]])]),Ke])])]),e("div",es,[e("div",ss,[e("div",ts,[rs,e("div",as,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[10]||(t[10]=r=>s.user.addressInvoice.state=r),translate:"yes",placeholder:"State"},null,512),[[p,s.user.addressInvoice.state]])])])]),e("div",os,[e("div",is,[ds,e("div",ns,[s.$store.state.coredata&&s.$store.state.coredata.countries?h((i(),d("select",{key:0,"onUpdate:modelValue":t[11]||(t[11]=r=>s.user.addressInvoice.country=r)},[(i(!0),d(g,null,b(s.$store.state.coredata.countries,r=>(i(),d("option",{value:r.code,key:r.code},c(r.name),9,ls))),128))],512)),[[S,s.user.addressInvoice.country]]):m("v-if",!0)]),cs])])]),e("div",ms,[e("div",us,[e("div",hs,[ps,e("div",ys,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[12]||(t[12]=r=>s.user.addressInvoice.phone=r),translate:"yes",placeholder:"Phone"},null,512),[[p,s.user.addressInvoice.phone]])]),_s])])]),vs,s.user.company?(i(),d("div",fs,[e("div",$s,[e("div",gs,[e("div",bs,[Ps,e("div",Ds,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[13]||(t[13]=r=>s.user.company.name=r),placeholder:"Company Name"},null,512),[[p,s.user.company.name]])])])])]),e("div",Is,[e("div",ks,[e("div",Ts,[Cs,e("div",ws,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[14]||(t[14]=r=>s.user.company.orgId=r),placeholder:"Organisation ID"},null,512),[[p,s.user.company.orgId]])])])])]),e("div",As,[e("div",Us,[e("div",Ss,[Os,e("div",Ns,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[15]||(t[15]=r=>s.user.company.taxId=r),placeholder:"Company Tax ID"},null,512),[[p,s.user.company.taxId]])])])]),e("div",Vs,[e("div",Ls,[Es,e("div",Fs,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>s.user.company.taxVatId=r),placeholder:"Company VAT ID"},null,512),[[p,s.user.company.taxVatId]])])])])])])):m("v-if",!0),e("button",Ms,[v(n,{icon:"check"}),_("   "),qs])],32)])}const k=I(q,[["render",xs],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/orders/User.vue"]]);const zs={name:"OrderDeliveryPayment",data(){return{deliveryData:{physical:null,digital:null},paymentData:null,showDeliveryAddress:!1,deliveryAddress:{type:"delivery",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",state:"",country:"",phone:""}}},computed:{},created:function(){this.$parent&&this.$parent.orderParams&&(this.$parent.orderParams.order.data&&(this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename&&(this.deliveryData=this.$parent.orderParams.order.data.deliveryData.codename),this.$parent.orderParams.order.data.paymentData&&this.$parent.orderParams.order.data.paymentData.codename&&(this.paymentData=this.$parent.orderParams.order.data.paymentData.codename)),this.$parent.orderParams.order.addresses&&this.$parent.orderParams.order.addresses.deliveryAddress&&(this.deliveryAddress=this.$parent.orderParams.order.addresses.deliveryAddress,this.showDeliveryAddress=!0))},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{updateDeliveryPaymentData:function(){let s=!1;const t=this.$el.querySelector(".deliveryType .form-messages .form-message[data-message='is empty']"),o=this.$el.querySelector(".paymentType .form-messages .form-message[data-message='is empty']");if(t&&t.classList.add("is-hidden"),o&&o.classList.add("is-hidden"),this.showDeliveryAddress){this.$parent.orderParams.order.addresses||(this.$parent.orderParams.order.addresses={}),this.$parent.orderParams.order.addresses.deliveryAddress||(this.$parent.orderParams.order.addresses.deliveryAddress=[]);const u=this.$helpers.propertiesRequiredConfirm(this.deliveryAddress,["nameFirst","nameLast","street","zip","city","country","phone"],[]);u.result?this.$parent.orderParams.order.addresses.deliveryAddress=this.deliveryAddress:(this.$helpers.formUndecorateAndDecorateFields(u.fields,u.errors),s=!0)}else this.$parent.orderParams.order.addresses&&this.$parent.orderParams.order.addresses.deliveryAddress&&(this.$parent.orderParams.order.addresses.deliveryAddress=null);this.$parent.orderParams.order.data||(this.$parent.orderParams.order.data={}),this.deliveryData&&typeof this.deliveryData.physical<"u"&&typeof this.deliveryData.digital<"u"&&(this.deliveryData.physical!==null||this.deliveryData.digital!==null)?(this.$parent.orderParams.order.data.deliveryData||(this.$parent.orderParams.order.data.deliveryData={codename:null}),this.$parent.orderParams.order.data.deliveryData.codename=this.deliveryData):(s=!0,t&&t.classList.remove("is-hidden")),this.paymentData&&this.paymentData!==null?(this.$parent.orderParams.order.data.paymentData||(this.$parent.orderParams.order.data.paymentData={codename:null}),this.$parent.orderParams.order.data.paymentData.codename=this.paymentData):(s=!0,o&&o.classList.remove("is-hidden")),s||this.$parent.updateOrder()},deliveryTypeIsChecked(s,t){this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename[s]&&(this.$parent.orderParams.order.data.deliveryData.codename[s].value,t.codename)},checkIfDeliveryAddressExists:()=>{if(!globalThis.$parent.orderParams.order.addresses.deliveryAddress&&globalThis.$parent.orderParams.order.addresses.deliveryAddress.length>0){const s=JSON.stringify(globalThis.deliveryAddress);globalThis.$parent.orderParams.order.addresses.deliveryAddress.forEach(t=>{if(JSON.stringify(t)===s)return!0})}return!1},fillWithSelectedDeliveryAddress(s){s.target.value&&s.target.value!==""&&s.target.value>-1&&(this.deliveryAddress=this.$store.state.user.profile.addressesDelivery[s.target.value])},getPaymentPrice(s){if(s&&s.prices&&this.$store.state&&this.$store.state.cart&&this.$store.state.cart.priceTotal){for(let t=0;t<s.prices.length;t++)if(this.$store.state.cart.priceTotal>=s.prices[t].range.from&&this.$store.state.cart.priceTotal<=s.prices[t].range.to)return s.prices[t].price}return 0},setDelivery(s,t){this.deliveryData[s]=t},checkUsePaymentType(s){return!!(this.$store.state.cart&&this.$store.state.cart.cartItemTypology&&(typeof s.type>"u"||this.$store.state.cart.cartItemTypology.subtypes.length>1&&this.$store.state.cart.cartItemTypology.subtypes.indexOf(s.type)===-1))}}},Ws={id:"orderDeliveryPayment",class:"orderDeliveryPayment"},js=e("h2",{class:"title is-2",translate:"yes"},"Delivery Payment",-1),Bs=e("h3",{class:"title is-3 has-text-left",translate:"yes"},"Delivery",-1),Gs={key:0,class:"deliveryType optionControlList"},Rs={key:0},Ys={class:"title is-4 has-text-left"},Hs=e("span",{translate:"yes"},"goods",-1),Zs={class:"s-input radio radio-button"},Js=["name","onClick","value","checked"],Qs={class:"control-label"},Xs=O('<div class="form-messages"><p class="form-message has-text-danger has-text-left is-hidden" data-message="is empty"><span class="icon has-text-danger is-pulled-left"><i class="fa fa-exclamation-circle"></i></span><span translate="yes">Please select value</span></p></div>',1),Ks={key:0,class:"deliveryAddressBlock"},et={class:"columns is-variable is-2"},st={class:"column is-12"},tt={class:"field has-text-centered useDeliveryAddress"},rt={class:"s-input switch is-rounded"},at=e("span",{class:"check"},null,-1),ot=e("span",{class:"control-label",translate:"yes"},"Use custom delivery address",-1),it={key:0,class:"deliveryAddressWrapper is-clearfix"},dt={key:0,class:"columns is-variable is-2"},nt={class:"column is-12"},lt={class:"field for-select"},ct=e("label",{class:"label",translate:"yes"},"Previously used addresses:",-1),mt={class:"control has-text-centered"},ut={class:"select is-empty"},ht=e("option",{value:"",translate:"yes"},"Please select",-1),pt=["value"],yt={class:"columns is-variable is-2"},_t={class:"column is-6"},vt={class:"field nameFirst"},ft=e("label",{class:"label",translate:"yes"},"First Name",-1),$t={class:"control"},gt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),bt={class:"column is-6"},Pt={class:"field nameLast"},Dt=e("label",{class:"label",translate:"yes"},"Last Name",-1),It={class:"control"},kt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Tt={class:"columns is-variable is-2"},Ct={class:"column is-12"},wt={class:"field street"},At=e("label",{class:"label",translate:"yes"},"Street",-1),Ut={class:"control"},St=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ot={class:"columns is-variable is-2"},Nt={class:"column is-12"},Vt={class:"field"},Lt=e("label",{class:"label",translate:"yes"},"Street 2",-1),Et={class:"control"},Ft={class:"columns is-variable is-2"},Mt={class:"column is-4"},qt={class:"field zip"},xt=e("label",{class:"label",translate:"yes"},"ZIP",-1),zt={class:"control"},Wt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),jt={class:"column is-8"},Bt={class:"field city"},Gt=e("label",{class:"label",translate:"yes"},"City",-1),Rt={class:"control"},Yt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ht={class:"columns is-variable is-2"},Zt={class:"column is-6"},Jt={class:"field"},Qt=e("label",{class:"label",translate:"yes"},"State",-1),Xt={class:"control"},Kt={class:"column is-6"},er={class:"field country"},sr=e("label",{class:"label",translate:"yes"},"Country",-1),tr={class:"control select"},rr=["value"],ar=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),or={class:"columns is-variable is-1 is-centered"},ir={class:"column is-6"},dr={class:"field phone"},nr=e("label",{class:"label",translate:"yes"},"Phone",-1),lr={class:"control is-clearfix"},cr=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),mr=e("h3",{class:"title is-3 has-text-left",translate:"yes"},"Payment",-1),ur={key:0,class:"paymentType optionControlList"},hr={class:"control"},pr={class:"s-input radio"},yr=["value"],_r={class:"control-label"},vr=O('<div class="form-messages"><p class="form-message has-text-danger has-text-left is-hidden" data-message="is empty"><span class="icon has-text-danger is-pulled-left"><i class="fa fa-exclamation-circle"></i></span><span translate="yes">Please select value</span></p></div>',1),fr={class:"button is-success",type:"submit"},$r=e("span",{translate:"yes"},"Set delivery and payment",-1);function gr(s,t,o,u,a,l){const y=$("font-awesome-icon");return i(),d("div",Ws,[js,e("form",{onSubmit:t[12]||(t[12]=U((...n)=>l.updateDeliveryPaymentData&&l.updateDeliveryPaymentData(...n),["prevent"]))},[e("div",null,[Bs,s.$store.state.order.order.settings.deliveryMethodsTypes&&Object.keys(s.$store.state.order.order.settings.deliveryMethodsTypes).length>0?(i(),d("div",Gs,[(i(!0),d(g,null,b(Object.keys(s.$store.state.order.order.settings.deliveryMethodsTypes),(n,r)=>(i(),d("div",{class:"control",key:r},[m(" check if delivery method type IS in cart's product subtypes (physical, digital) "),m(" delivery methods are INCLUDED depending on their type "),s.$store.state.cart&&s.$store.state.cart.cartItemTypology&&s.$store.state.cart.cartItemTypology.subtypes.indexOf(n)>-1?(i(),d("div",Rs,[e("h4",Ys,[e("span",null,c(n),1),_(" "),Hs]),(i(!0),d(g,null,b(s.$store.state.order.order.settings.deliveryMethodsTypes[n],(f,P)=>(i(),d("div",{class:"field",key:P},[e("label",Zs,[e("input",{type:"radio",class:"check",name:"type-"+n,onClick:qo=>l.setDelivery(n,f.codename),value:f.codename,checked:l.deliveryTypeIsChecked(n,f)},null,8,Js),e("span",Qs,c(f.name[s.$store.state.language.code])+" ("+c(f.prices[0].price)+" "+c(s.$store.state.currency.symbol)+") ",1)])]))),128))])):m("v-if",!0)]))),128)),Xs])):m("v-if",!0)]),s.$store.state.cart&&s.$store.state.cart.cartItemTypology&&s.$store.state.cart.cartItemTypology.subtypes.indexOf("physical")>-1?(i(),d("div",Ks,[e("section",null,[e("div",et,[e("div",st,[e("div",tt,[e("label",rt,[h(e("input",{type:"checkbox",class:"checkbox","true-value":"true",value:"false","onUpdate:modelValue":t[0]||(t[0]=n=>a.showDeliveryAddress=n)},null,512),[[V,a.showDeliveryAddress]]),at,ot])])])])]),e("section",null,[a.showDeliveryAddress?(i(),d("div",it,[s.$store.state.user.profile.addressesDelivery&&s.$store.state.user.profile.addressesDelivery.length>0?(i(),d("div",dt,[e("div",nt,[e("div",lt,[ct,e("div",mt,[e("span",ut,[e("select",{class:"select",onChange:t[1]||(t[1]=(...n)=>l.fillWithSelectedDeliveryAddress&&l.fillWithSelectedDeliveryAddress(...n))},[ht,(i(!0),d(g,null,b(s.$store.state.user.profile.addressesDelivery,(n,r)=>(i(),d("option",{key:r,value:r},c(n.street)+", "+c(n.zip),9,pt))),128))],32)])])])])])):m("v-if",!0),e("div",yt,[e("div",_t,[e("div",vt,[ft,e("div",$t,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>a.deliveryAddress.nameFirst=n),translate:"yes",placeholder:"First Name"},null,512),[[p,a.deliveryAddress.nameFirst]])]),gt])]),e("div",bt,[e("div",Pt,[Dt,e("div",It,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>a.deliveryAddress.nameLast=n),translate:"yes",placeholder:"Last Name"},null,512),[[p,a.deliveryAddress.nameLast]])]),kt])])]),e("div",Tt,[e("div",Ct,[e("div",wt,[At,e("div",Ut,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>a.deliveryAddress.street=n),translate:"yes",placeholder:"Street"},null,512),[[p,a.deliveryAddress.street]])]),St])])]),e("div",Ot,[e("div",Nt,[e("div",Vt,[Lt,e("div",Et,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>a.deliveryAddress.street2=n),translate:"yes",placeholder:"Street 2"},null,512),[[p,a.deliveryAddress.street2]])])])])]),e("div",Ft,[e("div",Mt,[e("div",qt,[xt,e("div",zt,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[6]||(t[6]=n=>a.deliveryAddress.zip=n),translate:"yes",placeholder:"ZIP"},null,512),[[p,a.deliveryAddress.zip]])]),Wt])]),e("div",jt,[e("div",Bt,[Gt,e("div",Rt,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[7]||(t[7]=n=>a.deliveryAddress.city=n),translate:"yes",placeholder:"City"},null,512),[[p,a.deliveryAddress.city]])]),Yt])])]),e("div",Ht,[e("div",Zt,[e("div",Jt,[Qt,e("div",Xt,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[8]||(t[8]=n=>a.deliveryAddress.state=n),translate:"yes",placeholder:"State"},null,512),[[p,a.deliveryAddress.state]])])])]),e("div",Kt,[e("div",er,[sr,e("div",tr,[s.$store.state.coredata&&s.$store.state.coredata.countries?h((i(),d("select",{key:0,"onUpdate:modelValue":t[9]||(t[9]=n=>a.deliveryAddress.country=n)},[(i(!0),d(g,null,b(s.$store.state.coredata.countries,n=>(i(),d("option",{value:n.code,key:n.code},c(n.name),9,rr))),128))],512)),[[S,a.deliveryAddress.country]]):m("v-if",!0)]),ar])])]),e("div",or,[e("div",ir,[e("div",dr,[nr,e("div",lr,[h(e("input",{class:"input",type:"text","onUpdate:modelValue":t[10]||(t[10]=n=>a.deliveryAddress.phone=n),translate:"yes",placeholder:"Phone"},null,512),[[p,a.deliveryAddress.phone]])]),cr])])])])):m("v-if",!0)])])):m("v-if",!0),e("div",null,[mr,s.$store.state.order.order.settings.paymentMethods&&Object.keys(s.$store.state.order.order.settings.paymentMethods).length>0?(i(),d("div",ur,[(i(!0),d(g,null,b(s.$store.state.order.order.settings.paymentMethods,(n,r)=>(i(),d("div",{class:"field",key:r},[e("div",hr,[m(" checks if payment method type IS NOT in cart's product subtypes (physical, digital) "),m(" payment methods are EXCLUDED depending on their type - if type is set and there are more types in the cart, don't use this payment method "),l.checkUsePaymentType(n)?(i(),d("div",{key:0,class:D("payment-"+n.codename)},[e("label",pr,[h(e("input",{type:"radio",name:"paymentType",class:"check","onUpdate:modelValue":t[11]||(t[11]=f=>a.paymentData=f),value:n.codename},null,8,yr),[[L,a.paymentData]]),e("span",_r,c(n.name[s.$store.state.language.code])+" ("+c(l.getPaymentPrice(n))+" "+c(s.$store.state.currency.symbol)+") ",1)])],2)):m("v-if",!0)])]))),128)),vr])):m("v-if",!0)]),e("button",fr,[v(y,{icon:"check"}),_("   "),$r])],32)])}const T=I(zs,[["render",gr],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/orders/DeliveryPayment.vue"]]);const br={name:"OrderSummary",data(){return{userConfirmation:null}},computed:{deliveryData:function(){const s=this,t=[];if(this.$parent.orderParams.order&&this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename){const o=this.$parent.orderParams.order.data.deliveryData.codename,u=this.$parent.orderParams.order.settings.deliveryMethodsTypes;Object.keys(o).forEach(a=>{if(o&&u&&o[a]&&o[a]!==null){const l=o[a];l.type=a,l.name=l.value,u[a]&&u[a].forEach(y=>{y.type&&y.codename&&y.type===a&&y.codename===l.value&&(l.name=y.name[s.$store.getters.getLanguage])}),t.push(l)}})}return t}},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{submitOrder:function(){const s=this.$el.querySelector("#summary .field.confirm .check");s.classList.remove("is-danger"),s&&s.parentElement.querySelector(".control-label").classList.add("has-text-danger"),this.userConfirmation?(this.$parent.orderParams.order.dates.userConfirmation=this.userConfirmation,this.$parent.updateOrder()):(this.$helpers.formUndecorateAndDecorateFields(["confirm"],[{name:"confirm",action:"unconfirmed"}]),s.classList.remove("is-success"),s.classList.remove("is-dang"),s.classList.add("is-danger"),s&&s.parentElement.querySelector(".control-label").classList.add("has-text-danger"))},setConfirmationDate:function(s){if(s.target.checked){const t=new Date;this.userConfirmation=t.getTime()}},checkDeliveryAddress:function(){return!!(this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.addresses&&this.$parent.orderParams.order.addresses.deliveryAddress&&Object.keys(this.$parent.orderParams.order.addresses.deliveryAddress).length>0)},invoiceAddress:function(){if(this.$store.state.coredata)return this.$helpers.addressToString(this.$parent.orderParams.order.addresses.invoiceAddress,this.$store.state.coredata.countries,["type"])},deliveryAddress:function(){return this.$parent.orderParams.order.addresses.deliveryAddress?this.$helpers.addressToString(this.$parent.orderParams.order.addresses.deliveryAddress,this.$store.state.coredata.countries,["type"]):null},checkDeliveryData:function(){return!!(this.$parent.orderParams.order&&this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename)},checkPaymentData:function(){return!!(this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.data.paymentData)},paymentData:function(){const s=this;let t=null;return this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.data.paymentData&&(t={name:typeof this.$parent.orderParams.order.data.paymentData.name[s.$store.getters.getLanguage]<"u"?this.$parent.orderParams.order.data.paymentData.name[s.$store.getters.getLanguage]:this.$parent.orderParams.order.data.paymentData.codename,price:this.$parent.orderParams.order.data.paymentData.price}),t}}},Pr={id:"summary"},Dr=e("h2",{class:"title is-2",translate:"yes"},"Order summary",-1),Ir={class:"columns is-variable is-2"},kr={class:"column is-6"},Tr=e("h3",{class:"title is-5",translate:"yes"},"You are ordering to:",-1),Cr={class:"summary-block with-pre-whitespace"},wr={key:0,class:"column is-6"},Ar=e("h3",{class:"title is-5",translate:"yes"},"With delivery to:",-1),Ur={class:"summary-block with-pre-whitespace"},Sr={key:1,class:"column is-6"},Or=e("h3",{class:"title is-5",translate:"yes"},"With delivery to:",-1),Nr=e("div",{class:"summary-block",translate:"yes"},"same as invoice address",-1),Vr=[Or,Nr],Lr={class:"columns is-variable is-2"},Er={class:"column is-6"},Fr=e("h3",{class:"title is-5",translate:"yes"},"Your Delivery settings:",-1),Mr={key:0,class:"content summary-block"},qr={class:"capitalize"},xr={key:0,class:"column is-6"},zr=e("h3",{class:"title is-5"},"Your Payment settings:",-1),Wr={key:0,class:"content summary-block"},jr={class:"columns is-variable is-2"},Br={class:"column is-12"},Gr={class:"field has-text-centered"},Rr={class:"title is-5"},Yr=e("span",{translate:"yes"},"Total price",-1),Hr={class:"columns is-variable is-2"},Zr={class:"column is-12"},Jr={class:"field confirm has-text-centered"},Qr={class:"s-input is-success checkbox"},Xr=e("span",null,[e("span",{class:"control-label",translate:"yes"},"I agree to the"),_("   "),e("a",{href:"#",translate:"yes"},"terms and conditions")],-1),Kr=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"unconfirmed",translate:"yes"},"Check this to enable sending order")],-1),ea={class:"button is-success",type:"submit"},sa=e("span",{translate:"yes"},"Submit order",-1);function ta(s,t,o,u,a,l){const y=$("font-awesome-icon");return i(),d("div",Pr,[Dr,e("form",{onSubmit:t[1]||(t[1]=U((...n)=>l.submitOrder&&l.submitOrder(...n),["prevent"]))},[e("div",Ir,[e("div",kr,[Tr,e("div",Cr,c(l.invoiceAddress()),1)]),l.checkDeliveryAddress()?(i(),d("div",wr,[Ar,e("div",Ur,c(l.deliveryAddress()),1)])):(i(),d("div",Sr,Vr))]),e("div",Lr,[e("div",Er,[Fr,l.checkDeliveryData()?(i(),d("div",Mr,[(i(!0),d(g,null,b(l.deliveryData,(n,r)=>(i(),d("div",{key:r},[e("p",null,[e("span",qr,c(n.type),1),_(" - "),e("strong",null,c(n.name),1),_(": "+c(s.$helpers.numeral(n.price).format("0.00"))+"  "+c(s.$store.state.currency.symbol),1)])]))),128))])):m("v-if",!0)]),l.checkPaymentData()?(i(),d("div",xr,[e("div",null,[zr,l.paymentData()?(i(),d("div",Wr,[e("p",null,[e("strong",null,c(l.paymentData().name),1),_(": "+c(s.$helpers.numeral(l.paymentData().price).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)])])):m("v-if",!0)])])):m("v-if",!0)]),e("div",jr,[e("div",Br,[e("div",Gr,[e("h3",Rr,[Yr,_(": "),e("span",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceTotal).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)])])])]),e("div",Hr,[e("div",Zr,[e("div",Jr,[e("label",Qr,[e("input",{type:"checkbox",class:"check",onClick:t[0]||(t[0]=n=>l.setConfirmationDate(n))}),Xr]),Kr])])]),e("button",ea,[v(y,{icon:"check"}),_("   "),sa])],32)])}const C=I(br,[["render",ta],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/orders/Summary.vue"]]),ra={name:"OrderFinished",components:{"payment-stripe":M},data(){return{isLoading:!0,orderId:null}},created(){this.$parent.orderParams&&this.$parent.orderParams.order&&(this.orderId=this.$parent.orderParams.order._id)},mounted(){this.$parent.orderParams&&this.$parent.orderParams.order&&(this.orderId=this.$parent.orderParams.order._id,this.$parent.orderParams.order.data.paymentData.codename.indexOf("online_paypal")>-1&&this.paymentPayPalCall(),this.$parent.orderParams.order.data.paymentData.codename==="cod"&&this.clearFinishedOrder())},computed:{},methods:{isOrderPaymentCodename:function(s){return!!(this.$parent&&this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.data&&this.$parent.orderParams.order.data.paymentData&&this.$parent.orderParams.order.data.paymentData.codename&&this.$parent.orderParams.order.data.paymentData.codename===s)},getOrderId:function(){return this.orderId},paymentPayPalCall:function(){const s=this;s.$httpc.post("/order/payment/paypal/geturl",{orderId:s.$parent.orderParams.order._id,checkoutData:null},{timeout:1e4}).then(t=>{t&&t.data&&t.data.url&&t.data.url.trim()!==""&&(s.clearFinishedOrder(),window.location.href=t.data.url)})},clearFinishedOrder:function(){const s=this;setTimeout(function(){s.$parent.orderParams={},s.$store.dispatch("setOrder",null),s.$store.state.user&&s.$store.state.user.profile===null&&s.$store.state.user.logged===!0&&s.$store.state.user.email.toString().trim()!==""&&(s.$store.state.user.logged=!1,s.$store.state.user.superadmined=!1,s.$store.state.user.profile=null,s.$httpc.defaults.headers.common.Authorization=null,s.$cookies.remove("token"))},2e3)}}},aa={id:"orderFinished"},oa=e("h1",{class:"title is-2",translate:"yes"},"Order Finished",-1),ia={class:"columns is-variable is-2"},da={class:"column is-12"},na=e("span",{translate:"yes"},"Thank you for your order. ID of your order is",-1),la=e("span",{translate:"yes"},"we've sent you email about it.",-1),ca={key:0},ma=e("p",{translate:"yes"},"You are being redicted to PayPal, please wait.",-1),ua={key:1};function ha(s,t,o,u,a,l){const y=$("router-link"),n=$("o-loading"),r=$("payment-stripe");return i(),d("div",aa,[oa,e("div",ia,[e("div",da,[e("p",null,[na,_("   "),v(y,{to:{name:"userOrderDetail",params:{id:l.getOrderId()}}},{default:A(()=>[_(c(l.getOrderId()),1)]),_:1},8,["to"]),_(", "),la]),l.isOrderPaymentCodename("online_paypal_paypal")?(i(),d("div",ca,[v(n,{"is-full-page":!1,active:a.isLoading,"onUpdate:active":t[0]||(t[0]=f=>a.isLoading=f),"can-cancel":!1},null,8,["active"]),ma])):l.isOrderPaymentCodename("online_stripe")?(i(),d("div",ua,[v(r,{order:s.$parent.orderParams.order},null,8,["order"])])):m("v-if",!0)])])])}const w=I(ra,[["render",ha],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/orders/Finished.vue"]]);const pa={name:"OrderCart",components:{OrderUser:k,OrderDeliveryPayment:T,OrderSummary:C,OrderFinished:w},data(){return{itemAmount:{},orderStateNumber:1,orderParams:{},viewComponentId:null}},computed:{},updated:function(){document.querySelector("#header-cart-dropdown")&&(document.querySelector("#header-cart-dropdown").style.display="")},created:function(){(this.orderParams==null||this.orderParams&&(!this.orderParams.order||this.orderParams.order==null)||this.orderParams.order&&(!this.orderParams.order.addresses||!this.orderParams.order.addresses.invoiceAddress))&&this.updateOrder()},methods:{orderStateComponent(){const s=this.$store.getters.getOrder;this.orderParams={...s},s&&s.result&&s.result.id&&(this.orderStateNumber=parseInt(s.result.id.toString()));const t=this.viewComponentId!==null&&this.viewComponentId<=this.orderStateNumber?parseInt(this.viewComponentId):parseInt(this.orderStateNumber);return console.debug("orderStateNumber & componentId",this.orderStateNumber,t),t===2?(console.debug("orderStateNumber & componentId - OrderDeliveryPayment",T),T):t===3?(console.debug("orderStateNumber & componentId - OrderSummary",C),C):t===4?(console.debug("orderStateNumber & componentId - OrderFinished",w),w):(console.debug("orderStateNumber & componentId - OrderUser",k),k)},updateOrder(){const s=this,t={timeout:15e3,needsAuth:!0};this.viewComponentId=null,this.$httpc.post("order/progress",{orderParams:this.orderParams&&typeof this.orderParams.order<"u"?this.orderParams.order:this.orderParams},t).then(function(o){if(o.data&&o.data.order){if(o.data.order.user&&o.data.order.user.id&&o.data.order.user.id!==null&&(s.$store.state.user.logged=!0,s.$store.state.cart.user=o.data.order.user.id,s.orderStateNumber=parseInt(o.data.result.id),s.$forceUpdate()),o.data.order.status==="saved"||o.data.order.status==="sent"){s.$store.dispatch("setCart",null);const u=document.querySelector(".userCartLink .cartItemsCount");u.textContent=0,o.data.result.id=4}s.$store.dispatch("setOrder",o.data),o.data&&o.data.result&&o.data.result.id&&o.data.result.id>1&&(s.orderStateNumber=parseInt(o.data.result.id))}}).then(function(){s.eventBus.emit("translateContent",s.$store.getters.getTranslates)}).catch(function(o){console.error("Cart error:",o),s.$store.dispatch("setCart",null),s.orderStateNumber=0,s.$store.dispatch("setOrder",null)})},updateCartItemAmount(s){const t=this;this.$httpc.post("cart",{itemId:s,amount:parseInt(this.itemAmount[s])}).then(o=>{o.data&&t.$store.dispatch("setCart",o.data)}).catch(function(o){return console.error(o),null}).then(function(){return null})},clearCart(s){const t=this;s=typeof s<"u"?s:null;let o=null;s!==null&&s.toString().trim()!==""?o=this.$httpc.delete("cart?itemId="+s):o=this.$httpc.delete("cart"),o.then(u=>{u.data&&t.$store.dispatch("setCart",u.data)}).catch(function(u){return console.error(u),null}).then(function(){return null})},getClickableStateClasses(s){return s<=this.orderStateNumber?"o-steps__link o-steps__link-label-bottom o-steps__link-clickable":"o-steps__link"},getActiveStateClasses(s){let t="o-steps__nav-item",o="";return s<this.orderStateNumber&&(o=" o-steps__nav-item o-steps__nav-item-previous"),(this.viewComponentId&&s===this.viewComponentId||s===this.orderStateNumber)&&(o=" o-steps__nav-item o-steps__nav-item--success o-steps__nav-item-active"),t+=o,t},getStateClass(s){return s===this.orderStateNumber?"has-text-danger":""},setViewCoponentId:function(s,t){s<=this.orderStateNumber&&(this.$el&&this.$el.querySelectorAll("#orderCart .b-steps .step-item").forEach(u=>{u.classList.remove("is-active")}),t&&t.target&&!t.target.parentElement.parentElement.classList.contains("is-active")&&t.target.parentElement.parentElement.classList.add("is-active"),this.viewComponentId=s,this.$forceUpdate())},getProductImagePath(s){return this.$store.state.coredata&&this.$store.state.coredata.settings&&this.$store.state.coredata.settings.assets&&this.$store.state.coredata.settings.assets.url?this.$helpers.getProductImagePath(this.$store.state.coredata,s):null},countPrices(s){s=typeof s<"u"&&["all","items","totals"].includes(s)?s:"all";const o=this;let u=o.settings.defaultConstants.tax;if((s==="all"||s==="items")&&(this.orderParams.prices.priceItems=0,this.orderParams.prices.priceItemsNoTax=0,this.orderParams.items.forEach(function(a){if(a.taxData)o.orderParams.prices.priceItems+=a.taxData.priceWithTax*a.amount,a.tax&&a.tax!==null&&(u=a.tax),o.orderParams.prices.priceItemsNoTax+=a.taxData.priceWithoutTax*a.amount,o.orderParams.prices.priceTaxTotal+=a.taxData.tax*a.amount;else{o.orderParams.prices.priceItems+=a.price*a.amount,a.tax&&a.tax!==null&&(u=a.tax);const l=a.price/(1+u);o.orderParams.prices.priceItemsNoTax+=l;const y=a.price/(1+u);o.orderParams.prices.priceTaxTotal+=y}}),this.orderParams.prices.priceItems=this.$helpers.formatPrice(this.orderParams.prices.priceItems),this.orderParams.prices.priceItemsNoTax=this.$helpers.formatPrice(this.orderParams.prices.priceItemsNoTax),this.orderParams.prices.priceTaxTotal=this.$helpers.formatPrice(this.orderParams.prices.priceTaxTotal)),s==="all"||s==="totals"){this.orderParams.prices.priceTotal=this.orderParams.prices.priceItems+this.orderParams.prices.priceDelivery+this.orderParams.prices.pricePayment,this.orderParams.prices.priceTotal=this.formatPrice.formatPrice(this.orderParams.prices.priceTotal);const a=this.orderParams.prices.priceDelivery/(1+u),l=this.orderParams.prices.pricePayment/(1+u);this.orderParams.prices.priceTotalNoTax=this.orderParams.prices.priceItemsNoTax+a+l,this.orderParams.prices.priceTotalNoTax=this.formatPrice.formatPrice(this.orderParams.prices.priceTotalNoTax)}}}},ya={id:"orderCart",class:"order-step-1 cart-detail"},_a={class:"container"},va={key:0,class:"columns"},fa=e("div",{class:"column"},[e("h1",{class:"title is-1",translate:"yes"},"Cart")],-1),$a=[fa],ga={class:"container"},ba={key:0,class:"columns is-variable is-centered orderProgressVisual"},Pa={class:"column is-8"},Da={class:"o-steps__wrapper"},Ia={class:"o-steps o-steps--animated"},ka={class:"o-steps__marker o-steps__marker--rounded"},Ta=e("div",{class:"step-details"},[e("span",{class:"o-steps__title",translate:"yes"},"User")],-1),Ca=e("span",{class:"o-steps__divider"},null,-1),wa={class:"o-steps__marker o-steps__marker--rounded"},Aa=e("div",{class:"step-details"},[e("span",{class:"step-title",translate:"yes"},"Delivery & Payment")],-1),Ua=e("span",{class:"o-steps__divider"},null,-1),Sa={class:"o-steps__marker o-steps__marker--rounded"},Oa=e("div",{class:"step-details"},[e("span",{class:"step-title",translate:"yes"},"Summary")],-1),Na={class:"container"},Va={class:"columns is-variable"},La={key:0,class:"column is-6 pr-6"},Ea={key:0,class:"cart-list"},Fa={class:"columns is-variable"},Ma={class:"column is-12"},qa={class:"b-table"},xa={class:"table-wrapper"},za={class:"table is-hoverable is-striped is-fullwidth"},Wa=e("thead",null,[e("tr",null,[e("th",{class:""},[e("div",{class:"th-wrap",translate:"yes"},"Name")]),e("th",{class:""},[e("div",{class:"th-wrap is-pulled-right",translate:"yes"},"Qty")]),e("th",{class:""},[e("div",{class:"th-wrap is-pulled-right",translate:"yes"},"Price/pcs")]),e("th",{class:""})])],-1),ja=["src","alt"],Ba={key:0,class:"tag is-danger"},Ga={key:1},Ra={class:"is-block"},Ya={class:"cartItemAmount has-text-right"},Ha=["onUpdate:modelValue","onChange","run"],Za=["onUpdate:modelValue","run"],Ja={class:"has-text-right"},Qa={class:"has-text-right"},Xa=["onClick"],Ka={key:0,id:"cart__products-total"},eo=e("td",null,null,-1),so=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Products Total")],-1),to={class:"has-text-right"},ro=e("td",null,null,-1),ao={key:1,id:"cart__products-notax"},oo=e("td",null,null,-1),io=e("td",{class:"has-text-right"},[e("span",{translate:"yes"},"Products Without Tax")],-1),no={class:"has-text-right"},lo=e("td",null,null,-1),co={key:2,id:"order__delivery"},mo=e("td",null,null,-1),uo=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Price delivery")],-1),ho={class:"has-text-right"},po=e("td",null,null,-1),yo={key:3,id:"order__payment"},_o=e("td",null,null,-1),vo=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Price payment")],-1),fo={class:"has-text-right"},$o=e("td",null,null,-1),go={key:4,id:"cart__tax"},bo=e("td",null,null,-1),Po=e("td",{class:"has-text-right"},[e("span",{translate:"yes"},"Tax total")],-1),Do={class:"has-text-right"},Io=e("td",null,null,-1),ko={key:5},To=e("td",null,null,-1),Co=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Total price")],-1),wo={key:0,class:"has-text-right"},Ao={key:1,class:"has-text-right"},Uo=e("td",null,null,-1),So={class:"columns is-variable"},Oo={class:"column is-12"},No=e("span",{translate:"yes"},"Clear Cart",-1),Vo={key:1},Lo=e("h3",{class:"title is-3"},[e("span",{translate:"yes"},"Your cart is empty")],-1),Eo=[Lo],Fo={class:"column is-6 pl-6"};function Mo(s,t,o,u,a,l){const y=$("font-awesome-icon"),n=$("router-link");return i(),d("div",ya,[e("div",_a,[a.orderStateNumber<4?(i(),d("div",va,$a)):m("v-if",!0)]),e("div",ga,[a.orderStateNumber<4?(i(),d("div",ba,[m(' <div class="column is-6"></div> '),e("div",Pa,[e("div",Da,[e("nav",Ia,[e("div",{class:D(l.getActiveStateClasses(1))},[e("a",{class:D(l.getClickableStateClasses(1)),onClick:t[0]||(t[0]=r=>l.setViewCoponentId(1,r))},[e("div",ka,[v(y,{icon:"address-card"})]),Ta],2)],2),e("div",{class:D(l.getActiveStateClasses(2))},[Ca,e("a",{class:D(l.getClickableStateClasses(2)),onClick:t[1]||(t[1]=r=>l.setViewCoponentId(2,r))},[e("div",wa,[v(y,{icon:"truck"})]),Aa],2)],2),e("div",{class:D(l.getActiveStateClasses(3))},[Ua,e("a",{class:D(l.getClickableStateClasses(3)),onClick:t[2]||(t[2]=r=>l.setViewCoponentId(3,r))},[e("div",Sa,[v(y,{icon:"check-double"})]),Oa],2)],2)])])])])):m("v-if",!0)]),e("div",Na,[e("div",Va,[a.orderStateNumber<4?(i(),d("div",La,[s.$store.state.cart!=null&&s.$store.state.cart.items&&s.$store.state.cart.items.length>0?(i(),d("div",Ea,[e("div",Fa,[e("div",Ma,[m(" cart table "),e("div",qa,[e("div",xa,[e("table",za,[Wa,e("tbody",null,[m(" product "),(i(!0),d(g,null,b(s.$store.state.cart.items,(r,f)=>(i(),d("tr",{key:f},[e("th",null,[v(n,{to:{name:"productDetail",params:{category:r.categories[0],product:r._id,slug:r.slug}}},{default:A(()=>[e("img",{src:l.getProductImagePath(r.orderCode),alt:r.name[s.$store.state.language.code],onerror:"this.src='/assets/_site/logo-product.svg'"},null,8,ja),r.type!=="product"?(i(),d("span",Ba,c(r.type),1)):m("v-if",!0),r.type!=="product"?(i(),d("br",Ga)):m("v-if",!0),e("span",Ra,c(r.name[s.$store.state.language.code]),1)]),_:2},1032,["to"])]),e("td",Ya,[r.type!="product"||r.subtype!="digital"?h((i(),d("input",{key:0,class:"input",type:"number","onUpdate:modelValue":P=>a.itemAmount[r._id]=P,onChange:P=>l.updateCartItemAmount(r._id),run:a.itemAmount[r._id]?!0:a.itemAmount[r._id]=r.amount},null,40,Ha)),[[p,a.itemAmount[r._id]]]):m("v-if",!0),r.type=="product"&&r.subtype=="digital"?h((i(),d("input",{key:1,class:"input",type:"number",disabled:"disabled","onUpdate:modelValue":P=>a.itemAmount[r._id]=P,run:a.itemAmount[r._id]?!0:a.itemAmount[r._id]=r.amount},null,8,Za)),[[p,a.itemAmount[r._id]]]):m("v-if",!0)]),e("td",Ja,[e("span",null,c(s.$helpers.numeral(r.price).format("0.00")),1),e("span",null,c(s.$store.state.currency.symbol),1)]),e("td",Qa,[e("a",{onClick:P=>l.clearCart(r._id)},[v(y,{icon:"trash"})],8,Xa)])]))),128)),m(" product END ")]),e("tfoot",null,[s.$store.state.cart&&s.$store.state.cart.priceTotal?(i(),d("tr",Ka,[eo,so,e("td",to,[e("strong",null,c(s.$helpers.numeral(s.$store.state.cart.priceTotal).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)]),ro])):m("v-if",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceItemsNoTax?(i(),d("tr",ao,[oo,io,e("td",no,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceItemsNoTax).format("0.00"))+" "+c(s.$store.state.currency.symbol),1),lo])):m("v-if",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceDelivery?(i(),d("tr",co,[mo,uo,e("td",ho,[e("strong",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceDelivery).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)]),po])):m("v-if",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.pricePayment?(i(),d("tr",yo,[_o,vo,e("td",fo,[e("strong",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.pricePayment).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)]),$o])):m("v-if",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceTaxTotal?(i(),d("tr",go,[bo,Po,e("td",Do,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceTaxTotal).format("0.00"))+" "+c(s.$store.state.currency.symbol),1),Io])):m("v-if",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceTotal?(i(),d("tr",ko,[To,Co,s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceTotal?(i(),d("td",wo,[e("strong",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceTotal).format("0.00")),1),_(" "+c(s.$store.state.currency.symbol),1)])):s.$store.state.cart&&s.$store.state.cart.priceTotal!=null?(i(),d("td",Ao,[e("strong",null,c(s.$helpers.numeral(s.$store.state.cart.priceTotal).format("0.00")),1),_(" "+c(s.$store.state.currency.symbol),1)])):m("v-if",!0),Uo])):m("v-if",!0)])])])]),m(" cart table end ")])]),e("div",So,[e("div",Oo,[e("button",{class:"button is-danger",onClick:t[3]||(t[3]=r=>l.clearCart())},[v(y,{icon:"trash"}),_("   "),No])])])])):(i(),d("div",Vo,Eo))])):m("v-if",!0),e("div",Fo,[(i(),E(F(l.orderStateComponent())))])])])])}const Bo=I(pa,[["render",Mo],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/orders/Cart.vue"]]);export{Bo as default};
