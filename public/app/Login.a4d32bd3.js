import{_ as u,c as p,a as e,w as h,b as c,v as m,d as f,e as g,f as _,g as d,r as v,o as y}from"./index.b9031fb8.js";const b={name:"UsersLogin",data(){return{email:"",password:"",remember:!1}},created:function(){},methods:{userLogin:function(){const r=this,t=this.$helpers.propertiesRequiredConfirm({email:this.email,password:this.password},["email","password"]);!t.result||this.email===""||this.password===""?this.$helpers.formUndecorateAndDecorateFields(t.fields,t.errors):this.$recaptchaLoaded().then(()=>this.$recaptcha("login")).then(i=>this.$httpc.post("helpers/recaptcha",{token:i},{timeout:3e3}).then(s=>s)).catch(function(i){if(i&&console.error("error:",i),console.warn("RECAPTCHA NOT WORKING! Make sure you have RECAPTCHA variables set in backend enviroment."),confirm(`RECAPTCHA NOT WORKING
Are you sure you want to Login?

See console for more information`))return{data:!0}}).then(i=>{i&&i.data===!0&&this.$httpc.post("users/login",{user:{email:this.email,password:this.password}}).then(function(s){if(s.data.user&&s.data.user._id){r.remember,r.$store.state.user.logged=!0,r.$store.state.user.remember=r.remember;const o=s.data.user;r.$store.dispatch("setUser",o),r.$router.push({name:"me"})}}).catch(function(s){s.response&&s.response.data&&s.response.data.errors&&Object.keys(s.response.data.errors).length>0&&Object.keys(s.response.data.errors).forEach(function(o){const n=r.$el.querySelector(".field."+o);if(n){const l=n.querySelector('.form-messages .form-message[data-message="'+s.response.data.errors[o]+'"]');if(l&&l!==null){r.$helpers.undecorateFormField(n,"danger");const a=l.innerText;r.$helpers.decorateFormField(n,a,"danger")}}})}).then(function(s){})})}}},w={class:"container users-login"},k=e("div",{class:"column"},[e("h1",{class:"title is-1"},"Login")],-1),C={class:"column is-4 is-offset-4"},T={class:"field email"},x={class:"control"},A=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"wrong credentials",translate:"yes"},"Wrong credentials"),e("div",{class:"form-message","data-message":"not activated",translate:"yes"},"Account not activated. Check your mailbox for activation email."),e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty")],-1),L={class:"field password"},$={class:"control"},R=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty")],-1),E={class:"field"},N=e("span",{translate:"yes"},"Remember my login on this computer",-1),P=e("button",{class:"button is-medium is-primary",type:"submit",translate:"yes"},"Login",-1),F=e("p",null,[d(" This site is protected by reCAPTCHA and the Google"),e("br"),e("a",{href:"https://policies.google.com/privacy"},"Privacy Policy"),d(" and "),e("a",{href:"https://policies.google.com/terms"},"Terms of Service"),d(" apply. ")],-1),O={class:"column is-4 is-offset-4"},S={translate:"yes"},U=d("Forgot your password? "),V=d("Reset your password");function H(r,t,i,s,o,n){const l=v("router-link");return y(),p("div",w,[k,e("div",C,[e("form",{onSubmit:t[3]||(t[3]=h((...a)=>n.userLogin&&n.userLogin(...a),["prevent"])),ref:"loginSubmit"},[e("div",T,[e("div",x,[c(e("input",{class:"input",placeholder:"Email",type:"email","onUpdate:modelValue":t[0]||(t[0]=a=>o.email=a)},null,512),[[m,o.email,void 0,{trim:!0}]])]),A]),e("div",L,[e("div",$,[c(e("input",{class:"input",placeholder:"Password",type:"password","onUpdate:modelValue":t[1]||(t[1]=a=>o.password=a)},null,512),[[m,o.password,void 0,{trim:!0}]])]),R]),e("div",E,[N,c(e("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>o.remember=a)},null,512),[[f,o.remember]])]),P,F],544)]),e("div",O,[e("p",S,[U,g(l,{to:{name:"reset"},tag:"a"},{default:_(()=>[V]),_:1})])])])}const q=u(b,[["render",H]]);export{q as default};
