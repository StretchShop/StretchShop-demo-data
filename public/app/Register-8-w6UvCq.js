import{G as x}from"./GoogleRecaptcha-tz9Jiyc3.js";import{r as g,c as m,a as s,i as k,K as c,N as d,a3 as V,F,d as U,h as b,b as I,f as y,e as C,ae as T,o as u,t as S,af as E,ag as R}from"./sett-kcacPgfM.js";import{_ as N}from"./index-dpUgND6i.js";const D={name:"UsersRegister",components:{"google-recaptcha":x},computed:{useRecaptcha:function(){var a,e,l;return((l=(e=(a=this.$store.state)==null?void 0:a.coredata)==null?void 0:e.settings)==null?void 0:l.formVerif)==="recaptcha"}},data(){return{sent:!1,user:{username:"",email:"",email2:"",password:"",password2:"",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",state:"",country:"",phone:"",companyName:"",companyOrgId:"",companyTaxId:"",companyTaxVatId:""}}},created:function(){},methods:{userRegister:function(){let a=null;const e=["username","email","password"],l=["email","password"],n=this;if(a=this.$helpers.propertiesRequiredConfirm(this.user,e,l),a.result){const t={user:{username:this.user.username,email:this.user.email,password:this.user.password}};this.$store.state.language&&this.$store.state.language.code&&this.$store.state.currency&&this.$store.state.currency.code&&(t.user.settings={language:this.$store.state.language.code,currency:this.$store.state.currency.code});const r=this.checkFillAddress();r&&(t.user.addresses=[],t.user.addresses.push(r));const h=this.checkFillCompany();h&&(t.user.company=[],t.user.company.push(h)),this.$helpers.secureForm("register",this.$refs.recaptcha).then(f=>{f&&this.$httpc.post("users/register",t,{timeout:5e3,tokenize:!0}).then(function(o){n.sent=!0;const _=n.$el.querySelector(".field.");Object.keys(_).forEach(function(p){n.$helpers.undecorateFormField(p,"danger")})}).catch(function(o){o.response&&o.response.data&&o.response.data.errors&&Object.keys(o.response.data.errors).length>0&&Object.keys(o.response.data.errors).forEach(function(_){const p=n.$el.querySelector(".field."+_);if(p){const v=p.querySelector('.form-messages .form-message[data-message="'+o.response.data.errors[_]+'"]');if(v&&v!==null){const w=v.innerText;n.$helpers.decorateFormField(p,w,"danger")}}})}).then(function(){})})}else a&&a.fields&&a.errors?(this.$el.querySelector(".field."+a.fields[0]).scrollIntoView({behaviour:"smooth",block:"start",inline:"nearest"}),this.$helpers.formUndecorateAndDecorateFields(a.fields,a.errors)):(this.$el.querySelector(".field."+e.fields[0]).scrollIntoView({behaviour:"smooth",block:"start",inline:"nearest"}),this.$helpers.formUndecorateAndDecorateFields(e,[]))},checkFillAddress:function(){let a=null;const e=["nameFirst","nameLast","street","street2","zip","city","state","country","phone"],l={};let n=!1;const t=this;return e.forEach(function(r){t.user[r].trim()!==""&&(l[r]=t.user[r].trim(),n=!0)}),n&&(l.type="invoice",a=l),a},checkFillCompany:function(){let a=null;const e=["companyName","companyOrgId","companyTaxId","companyTaxVatId"],l={};let n=!1;const t=this;return e.forEach(function(r){t.user[r].trim()!==""&&(l[r]=t.user[r].trim(),n=!0)}),n&&(a=l),a},checkUsername:function(){const a=[],e=this;e.$helpers.formUndecorateAndDecorateFields(["username"],[]),this.$httpc.post("users/checkusername",{username:this.user.username},{tokenize:!0}).then(function(l){var n,t;((t=(n=l==null?void 0:l.data)==null?void 0:n.result)==null?void 0:t.userExists)===!0&&a.push({target:"username",action:"already exists"}),a.length&&console.error(a)}).catch(function(l){var n,t;e.sendChangeRequest=!1,e.status="error",console.error("checkUsername: ",l),(t=(n=l.response)==null?void 0:n.data)!=null&&t.errors&&e.$helpers.showFormFieldErrorsFromErrorResponse(l.response.data.errors)}).then(function(){})},checkEmail:function(){const a=[];let e=!0;const l=this;l.$helpers.formUndecorateAndDecorateFields(["email","email2"],[]),(!this.user.email||!this.user.email2||this.user.email!==this.user.email2)&&(l.$helpers.formUndecorateAndDecorateFields(["email2"],[{name:"email2",action:"not confirmed"}]),e=!1),e&&this.$httpc.post("users/checkemail",{email:this.user.email},{tokenize:!0}).then(function(n){a.length&&console.error(a)}).catch(function(n){l.sendChangeRequest=!1,l.status="error",n.response.data&&n.response.data.errors&&l.$helpers.showFormFieldErrorsFromErrorResponse(n.response.data.errors)}).then(function(){})},passwordSecurityLevel:function(a){const e=this.$helpers.passwordStrengthChecker(a);let l="danger";e==="medium"?l="warning":e==="strong"&&(l="success"),this.$helpers.formUndecorateAndDecorateFields(["password"],[{name:"password",action:"password "+e,type:l}])}}},i=a=>(E("data-v-380a0d0a"),a=a(),R(),a),q={class:"container users-login"},A=i(()=>s("div",{class:"columns"},[s("div",{class:"column"},[s("h1",{class:"title is-1",translate:"yes"},"Register")])],-1)),O={class:"columns"},L={key:0,class:"column is-half is-offset-one-quarter"},P={class:"simple-wrapper"},z=i(()=>s("div",{class:"columns is-variable is-2 is-centered"},[s("div",{class:"column is-12",translate:"yes"}," Required Fields ")],-1)),M={class:"columns is-variable is-2 is-centered"},B={class:"column is-12"},j={class:"field username"},G=i(()=>s("label",{class:"label",translate:"yes"},"Username",-1)),K={class:"control"},Z=i(()=>s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),s("div",{class:"form-message","data-message":"exists",translate:"yes"},"Username already exists")],-1)),H={class:"columns is-variable is-2 is-centered"},W={class:"column is-6"},Y={class:"field email"},J=i(()=>s("label",{class:"label",translate:"yes"},"Email",-1)),Q={class:"control"},X=i(()=>s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),s("div",{class:"form-message","data-message":"exists",translate:"yes"},"This email already exists")],-1)),$={class:"column is-6"},ss={class:"field email2"},es=i(()=>s("label",{class:"label"},"Email Confirm",-1)),ts={class:"control"},os=i(()=>s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),s("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1)),as={class:"columns is-variable is-2 is-centered"},ls={class:"column is-6"},is={class:"field password"},ns=i(()=>s("label",{class:"label"},"Password",-1)),rs={class:"control"},cs=T('<div class="form-messages is-hidden" data-v-380a0d0a><div class="form-message" data-message="is empty" translate="yes" data-v-380a0d0a>This field cannot be empty</div><div class="form-message has-text-danger" data-message="password weak" translate="yes" data-v-380a0d0a>Weak</div><div class="form-message has-text-warning" data-message="password medium" translate="yes" data-v-380a0d0a>Medium</div><div class="form-message has-text-success" data-message="password strong" translate="yes" data-v-380a0d0a>Strong</div></div>',1),ds={class:"column is-6"},us={class:"field password2"},ms=i(()=>s("label",{class:"label"},"Password Confirm",-1)),ps={class:"control"},hs=i(()=>s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),s("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1)),_s=i(()=>s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1)),fs={class:"columns is-variable is-2"},vs={class:"column is-6"},ys={class:"field"},gs=i(()=>s("label",{class:"label"},"First Name",-1)),bs={class:"control"},ws={class:"column is-6"},xs={class:"field"},ks=i(()=>s("label",{class:"label"},"Last Name",-1)),Vs={class:"control"},Fs={class:"columns is-variable is-2"},Us={class:"column is-12"},Is={class:"field"},Cs=i(()=>s("label",{class:"label"},"Street",-1)),Ts={class:"control"},Ss={class:"columns is-variable is-2"},Es={class:"column is-12"},Rs={class:"field"},Ns=i(()=>s("label",{class:"label"},"Street 2",-1)),Ds={class:"control"},qs={class:"columns is-variable is-2"},As={class:"column is-4"},Os={class:"field"},Ls=i(()=>s("label",{class:"label"},"ZIP",-1)),Ps={class:"control"},zs={class:"column is-8"},Ms={class:"field"},Bs=i(()=>s("label",{class:"label"},"City",-1)),js={class:"control"},Gs={class:"columns is-variable is-2"},Ks={class:"column is-6"},Zs={class:"field"},Hs=i(()=>s("label",{class:"label"},"State",-1)),Ws={class:"control"},Ys={class:"column is-6"},Js={class:"field"},Qs=i(()=>s("label",{class:"label"},"Country",-1)),Xs={class:"control select"},$s=["value"],se={class:"columns is-variable is-2 is-centered"},ee={class:"column is-6"},te={class:"field"},oe=i(()=>s("label",{class:"label"},"Phone",-1)),ae={class:"control"},le={class:"simple-wrapper"},ie=i(()=>s("div",{class:"columns is-variable is-2 is-centered"},[s("div",{class:"column is-12",translate:"yes"}," If you are company ")],-1)),ne={class:"columns is-variable is-2 is-centered"},re={class:"column is-12"},ce={class:"field companyName"},de=i(()=>s("label",{class:"label",translate:"yes"},"Company Name",-1)),ue={class:"control"},me={class:"columns is-variable is-2 is-centered"},pe={class:"column is-6"},he={class:"field companyOrgId"},_e=i(()=>s("label",{class:"label",translate:"yes"},"Organisation ID",-1)),fe={class:"control"},ve={class:"columns is-variable is-2 is-centered"},ye={class:"column is-6"},ge={class:"field companyTaxId"},be=i(()=>s("label",{class:"label"},"Company Tax ID",-1)),we={class:"control"},xe={class:"column is-6"},ke={class:"field companyTaxVatId"},Ve=i(()=>s("label",{class:"label"},"Company VAT ID",-1)),Fe={class:"control"},Ue=i(()=>s("hr",null,null,-1)),Ie={class:"button is-success"},Ce={key:1,class:"column is-half is-offset-one-quarter"},Te=i(()=>s("h2",{class:"title is-2",translate:"yes"},[y("Your registration was successful,"),s("br"),y("we are sending you an email")],-1)),Se=i(()=>s("p",{translate:"yes"},"Check your mailbox for verification email (please check also your spam folder).",-1)),Ee=[Te,Se];function Re(a,e,l,n,t,r){const h=g("font-awesome-icon"),f=g("google-recaptcha");return u(),m("div",q,[A,s("div",O,[t.sent?(u(),m("div",Ce,[...Ee])):(u(),m("div",L,[s("form",{onSubmit:e[21]||(e[21]=k((...o)=>r.userRegister&&r.userRegister(...o),["prevent"]))},[s("div",P,[z,s("div",M,[s("div",B,[s("div",j,[G,s("div",K,[c(s("input",{class:"input is-warning",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.user.username=o),placeholder:"Username",onBlur:e[1]||(e[1]=(...o)=>r.checkUsername&&r.checkUsername(...o))},null,544),[[d,t.user.username]])]),Z])])]),s("div",H,[s("div",W,[s("div",Y,[J,s("div",Q,[c(s("input",{class:"input",type:"email","onUpdate:modelValue":e[2]||(e[2]=o=>t.user.email=o),placeholder:"Email",onChange:e[3]||(e[3]=(...o)=>r.checkEmail&&r.checkEmail(...o))},null,544),[[d,t.user.email]])]),X])]),s("div",$,[s("div",ss,[es,s("div",ts,[c(s("input",{class:"input",type:"email","onUpdate:modelValue":e[4]||(e[4]=o=>t.user.email2=o),placeholder:"Email Confirm"},null,512),[[d,t.user.email2]])]),os])])]),s("div",as,[s("div",ls,[s("div",is,[ns,s("div",rs,[c(s("input",{class:"input",type:"password","onUpdate:modelValue":e[5]||(e[5]=o=>t.user.password=o),placeholder:"Password",onKeyup:e[6]||(e[6]=o=>r.passwordSecurityLevel(o))},null,544),[[d,t.user.password]])]),cs])]),s("div",ds,[s("div",us,[ms,s("div",ps,[c(s("input",{class:"input",type:"password","onUpdate:modelValue":e[7]||(e[7]=o=>t.user.password2=o),placeholder:"Password Confirm"},null,512),[[d,t.user.password2]])]),hs])])])]),_s,s("div",fs,[s("div",vs,[s("div",ys,[gs,s("div",bs,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>t.user.nameFirst=o),placeholder:"First Name"},null,512),[[d,t.user.nameFirst]])])])]),s("div",ws,[s("div",xs,[ks,s("div",Vs,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[9]||(e[9]=o=>t.user.nameLast=o),placeholder:"Last Name"},null,512),[[d,t.user.nameLast]])])])])]),s("div",Fs,[s("div",Us,[s("div",Is,[Cs,s("div",Ts,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>t.user.street=o),placeholder:"Street"},null,512),[[d,t.user.street]])])])])]),s("div",Ss,[s("div",Es,[s("div",Rs,[Ns,s("div",Ds,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[11]||(e[11]=o=>t.user.street2=o),placeholder:"Street 2"},null,512),[[d,t.user.street2]])])])])]),s("div",qs,[s("div",As,[s("div",Os,[Ls,s("div",Ps,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[12]||(e[12]=o=>t.user.zip=o),placeholder:"ZIP"},null,512),[[d,t.user.zip]])])])]),s("div",zs,[s("div",Ms,[Bs,s("div",js,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[13]||(e[13]=o=>t.user.city=o),placeholder:"City"},null,512),[[d,t.user.city]])])])])]),s("div",Gs,[s("div",Ks,[s("div",Zs,[Hs,s("div",Ws,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[14]||(e[14]=o=>t.user.state=o),placeholder:"State"},null,512),[[d,t.user.state]])])])]),s("div",Ys,[s("div",Js,[Qs,s("div",Xs,[a.$store.state.coredata&&a.$store.state.coredata.countries?c((u(),m("select",{key:0,"onUpdate:modelValue":e[15]||(e[15]=o=>t.user.country=o)},[(u(!0),m(F,null,U(a.$store.state.coredata.countries,o=>(u(),m("option",{value:o.code,key:o.code},S(o.name),9,$s))),128))],512)),[[V,t.user.country]]):b("",!0)])])])]),s("div",se,[s("div",ee,[s("div",te,[oe,s("div",ae,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[16]||(e[16]=o=>t.user.phone=o),placeholder:"Phone"},null,512),[[d,t.user.phone]])])])])]),s("div",le,[ie,s("div",ne,[s("div",re,[s("div",ce,[de,s("div",ue,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[17]||(e[17]=o=>t.user.companyName=o),placeholder:"Company Name"},null,512),[[d,t.user.companyName]])])])])]),s("div",me,[s("div",pe,[s("div",he,[_e,s("div",fe,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[18]||(e[18]=o=>t.user.companyOrgId=o),placeholder:"Organisation ID"},null,512),[[d,t.user.companyOrgId]])])])])]),s("div",ve,[s("div",ye,[s("div",ge,[be,s("div",we,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[19]||(e[19]=o=>t.user.companyTaxId=o),placeholder:"Company Tax ID"},null,512),[[d,t.user.companyTaxId]])])])]),s("div",xe,[s("div",ke,[Ve,s("div",Fe,[c(s("input",{class:"input",type:"text","onUpdate:modelValue":e[20]||(e[20]=o=>t.user.companyTaxVatId=o),placeholder:"Company VAT ID"},null,512),[[d,t.user.companyTaxVatId]])])])])])]),Ue,s("button",Ie,[I(h,{icon:"check"}),y(" Â  Register ")]),r.useRecaptcha?(u(),C(f,{key:0,ref:"recaptcha"},null,512)):b("",!0)],32)]))])])}const Ae=N(D,[["render",Re],["__scopeId","data-v-380a0d0a"],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/Register.vue"]]);export{Ae as default};
