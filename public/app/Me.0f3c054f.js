import{_ as g,o as u,c as m,a as s,t as b,n as F,w as f,b as d,v as c,j as v,g as h,l as V,r as D,e as _,h as T,F as U,i as I,p as S,k as E,f as y,m as C,q as M}from"./index.b9031fb8.js";const L={name:"UserMeInfo",data(){return{userProfileImageFile:[]}},computed:{userBasicData:function(){const t=this.$store.getters.getUserProfile,e={username:"",email:"",email2:"",password:"",password2:""};return t&&t.username&&(e.username=t.username,e.email=t.email,t.dates&&(e.dates=t.dates)),e},userProfileImage:function(){return this.$store.getters.getProfileImage()}},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{deleteDropFile(t){this.userProfileImageFile.splice(t,1)},uploadUserProfileImage:function(t){const e=this;this.userProfileImageFile=t.target.files;const i=new FormData;if(this.userProfileImageFile.length&&this.userProfileImageFile.length>0)for(var n=0;n<this.userProfileImageFile.length;n++){const a=this.userProfileImageFile[n];i.append("files["+n+"]",a)}else i.append("files[0]",this.userProfileImageFile);this.$httpc.post("user/image",i,{needsAuth:!0}).then(function(a){if(a&&a.data){if(a.data.substr(0,1)==="'"&&a.data[a.data.length-1]==="'"){const l=a.data.length-2;a.data=a.data.substr(1,l),a.data=JSON.parse(a.data)}a.data.files&&a.data.files.length>0&&a.data.files[0].path&&(e.$store.dispatch("setUserProfileImage",a.data.files[0].path),e.$forceUpdate())}}).catch(function(a){console.error(a)}).then(function(){})},changeUsername:function(){const t=[];let e=!0;const i=this;this.$httpc.post("users/checkusername",{username:this.userBasicData.username}).then(function(n){var a,l,r,o;((l=(a=n==null?void 0:n.data)==null?void 0:a.result)==null?void 0:l.userExists)===!0?(e=!1,t.push({target:"username",action:"already exists"})):((o=(r=n==null?void 0:n.data)==null?void 0:r.result)==null?void 0:o.userExists)===!1&&(e=!0,e&&i.$httpc.put("user",{user:{username:i.userBasicData.username}}).then(p=>{var $;($=p==null?void 0:p.data)!=null&&$.user&&i.$store.dispatch("updateUser",p.data.user)})),t.length&&console.error(t)}).catch(function(n){var a,l;i.sendChangeRequest=!1,i.status="error",console.error("changeUsername: ",n),(l=(a=n.response)==null?void 0:a.data)!=null&&l.errors&&i.$helpers.showFormFieldErrorsFromErrorResponse(n.response.data.errors)}).then(function(){})},changeEmail:function(){let t=!0;const e=this;(!this.userBasicData.email||!this.userBasicData.email2||this.userBasicData.email!==this.userBasicData.email2)&&(e.$helpers.formUndecorateAndDecorateFields(["email2"],[{name:"email2",action:"not confirmed"}]),t=!1),t&&this.$httpc.post("users/checkemail",{email:this.userBasicData.email}).then(function(i){t=!0,t&&e.$store.dispatch("updateUser",{email:e.userBasicData.email})}).catch(function(i){e.sendChangeRequest=!1,e.status="error",i.response.data&&i.response.data.errors&&e.$helpers.showFormFieldErrorsFromErrorResponse(i.response.data.errors)}).then(function(){})},changePassword:function(){let t=!0;const e=this;(!this.userBasicData.password||!this.userBasicData.password2||this.userBasicData.password!==this.userBasicData.password2)&&(e.$helpers.formUndecorateAndDecorateFields(["password2"],[{name:"password2",action:"not confirmed"}]),t=!1),t&&this.$httpc.put("user",{user:{password:this.userBasicData.password}},{needsAuth:!0}).then(function(i){t=!0,t&&e.$store.dispatch("updateUser",{email:e.userBasicData.email})}).catch(function(i){e.sendChangeRequest=!1,e.status="error",console.error(i),i.response.data&&i.response.data.errors&&e.$helpers.formUndecorateAndDecorateFields(["password2"],[{name:"password2",action:"unknown error"}])}).then(function(){})},deleteUser:function(){const t=this;confirm(this.$refs.deleteUserWarning.innerText)&&this.$helpers.recaptcha(this,"login").then(e=>this.$httpc.post("helpers/recaptcha",{token:e},{timeout:3e3}).then(i=>i)).catch(function(e){if(e&&console.error("error:",e),console.warn("RECAPTCHA NOT WORKING! Make sure you have RECAPTCHA variables set in backend enviroment."),confirm(`RECAPTCHA NOT WORKING
Are you sure you want to Login?

See console for more information`))return{data:!0}}).then(e=>{e&&e.data===!0&&this.$httpc.delete("user/profile",{needsAuth:!0}).then(i=>{i.data&&t.$store.dispatch("setUser",i.data)}).catch(function(i){return console.error(i),null}).then(function(){return null})})},cancelUserDelete:function(){const t=this;this.$httpc.post("user/cancelDelete",null,{needsAuth:!0}).then(e=>{e.data&&t.$store.dispatch("setUser",e.data)}).catch(function(e){return console.error(e),null}).then(function(){return null})}}},N={key:0,id:"meInfo",class:""},O={class:"columns is-variable is-2"},z={class:"column is-8 has-text-centered"},R={class:"title is-2 has-text-centered"},q={class:"columns is-variable is-2"},W={class:"column is-4 has-text-centered",id:"profile-profile-image"},j={class:"user--avatar-wrapper is-centered"},Y={class:"column is-4 has-text-centered image-button-padding"},Z={class:"file is-primary action edit"},H={class:"file-label"},G=s("span",{class:"file-cta"},[s("span",{class:"file-icon"},[s("i",{class:"fa fa-plus"})]),s("span",{class:"file-label",id:"profile-profile-image-upload",translate:"yes"}," Click to upload Profile Image ")],-1),K={class:"user-info-edit-form-wrapper"},J={class:"columns"},Q={class:"column is-8 is-centered"},X={class:"columns is-variable is-2 is-centered"},ss={class:"column is-12 has-text-centered",id:"profile-profile-username"},es={class:"field username"},ts=s("label",{class:"label",translate:"yes"},"Username",-1),as={class:"control"},is=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"exists",translate:"yes"},"Username already exists")],-1),os=s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Change Username")],-1),ns=s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1),ls={class:"columns is-variable is-2 is-centered"},rs={class:"column is-6",id:"profile-profile-email"},ds={class:"field email"},cs=s("label",{class:"label"},"Email",-1),us={class:"control"},ms=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"exists",translate:"yes"},"Email already exists")],-1),hs={class:"column is-6",id:"profile-profile-email2"},vs={class:"field email2"},_s=s("label",{class:"label",translate:"yes"},"Email Confirm",-1),ps={class:"control"},fs=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1),ys=s("div",{class:"columns is-variable is-2 is-centered"},[s("div",{class:"column is-12 has-text-centered"},[s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Change your Email")])])],-1),gs=s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1),$s={class:"columns is-variable is-2 is-centered"},bs={class:"column is-6"},Ds={class:"field password"},As=s("label",{class:"label",translate:"yes"},"Password",-1),Us={class:"control"},Is={class:"column is-6"},Cs={class:"field password2"},xs=s("label",{class:"label",translate:"yes"},"Password Confirm",-1),ws={class:"control"},Ps=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match"),s("div",{class:"form-message","data-message":"unknown error",translate:"yes"},"An error occured when changing password")],-1),ks=s("div",{class:"columns is-variable is-2 is-centered"},[s("div",{class:"column is-12 has-text-centered"},[s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Change your Password")])])],-1),Bs=s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1),Ts={class:"columns product-delete"},Fs={class:"column is-12 has-text-centered"},Vs={key:0},Ss={ref:"deleteUserWarning",translate:"true"},Es=s("p",null,[s("strong",{translate:"yes"},"Notice:"),h(),s("span",{translate:"yes"},[h("Your profile will be removed in 14 days after clicking this button! "),s("br"),h(" If you don't cancel this action in those 14 days, your account will be removed.")])],-1),Ms=s("p",null,[s("strong",{translate:"yes"},"Notice:"),h(),s("span",{translate:"yes"},"Information about your orders will remain for tax purposes!")],-1),Ls={key:1},Ns=s("p",null,[s("strong",{translate:"yes"},"Notice:"),h(),s("span",{translate:"yes"},"Your profile will NOT be removed after clicking this button.")],-1);function Os(t,e,i,n,a,l){return t.$store.state.user.profile?(u(),m("div",N,[s("div",O,[s("div",z,[s("h2",R,b(t.$store.state.user.profile.username),1)])]),s("div",q,[s("div",W,[s("div",j,[s("div",{class:"user--avatar-image",style:F({"background-image":"url('"+l.userProfileImage+"')"})},null,4)])]),s("div",Y,[s("div",Z,[s("label",H,[s("input",{class:"file-input",type:"file",name:"resume",onInput:e[0]||(e[0]=r=>l.uploadUserProfileImage(r))},null,32),G])])])]),s("div",K,[s("div",J,[s("div",Q,[s("div",X,[s("div",ss,[s("form",{onSubmit:e[2]||(e[2]=f((...r)=>l.changeUsername&&l.changeUsername(...r),["prevent"]))},[s("div",es,[ts,s("div",as,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>l.userBasicData.username=r),placeholder:"Username"},null,512),[[c,l.userBasicData.username]])]),is]),os],32)])]),ns,s("form",{onSubmit:e[5]||(e[5]=f((...r)=>l.changeEmail&&l.changeEmail(...r),["prevent"]))},[s("div",ls,[s("div",rs,[s("div",ds,[cs,s("div",us,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=r=>l.userBasicData.email=r),placeholder:"Email"},null,512),[[c,l.userBasicData.email]])]),ms])]),s("div",hs,[s("div",vs,[_s,s("div",ps,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>l.userBasicData.email2=r),placeholder:"Email Confirm"},null,512),[[c,l.userBasicData.email2]])]),fs])])]),ys],32),gs,s("form",{onSubmit:e[8]||(e[8]=f((...r)=>l.changePassword&&l.changePassword(...r),["prevent"]))},[s("div",$s,[s("div",bs,[s("div",Ds,[As,s("div",Us,[d(s("input",{class:"input",type:"password","onUpdate:modelValue":e[6]||(e[6]=r=>l.userBasicData.password=r),placeholder:"Password"},null,512),[[c,l.userBasicData.password]])])])]),s("div",Is,[s("div",Cs,[xs,s("div",ws,[d(s("input",{class:"input",type:"password","onUpdate:modelValue":e[7]||(e[7]=r=>l.userBasicData.password2=r),placeholder:"Password Confirm"},null,512),[[c,l.userBasicData.password2]])]),Ps])])]),ks],32),Bs,s("div",Ts,[s("div",Fs,[s("section",null,[!l.userBasicData.dates||!l.userBasicData.dates.dateToBeErased||l.userBasicData.dates.dateToBeErased==null?(u(),m("div",Vs,[d(s("div",Ss,"Are you sure you want to DELETE Your Profile?",512),[[V,!1]]),s("button",{class:"button is-danger",onClick:e[9]||(e[9]=r=>l.deleteUser()),translate:"yes"},"DELETE My Profile !"),Es,Ms])):v("",!0),l.userBasicData.dates&&l.userBasicData.dates.dateToBeErased&&l.userBasicData.dates.dateToBeErased!=null?(u(),m("div",Ls,[s("button",{class:"button is-danger",onClick:e[10]||(e[10]=r=>l.cancelUserDelete()),translate:"yes"},"Cancel Deleting my Profile"),Ns])):v("",!0)])])])])])])])):v("",!0)}const x=g(L,[["render",Os]]),zs={name:"UserMeCompany",data(){return{activeCompanyData:{name:"",orgId:"",taxId:"",taxVatId:""}}},mounted:function(){const t=this.$store.getters.getUserProfile;let e;t.company&&(e=t.company);let i={name:"",orgId:"",taxId:"",taxVatId:""};if(e&&e.name&&(i=e),this.activeCompanyData)for(var n in this.activeCompanyData)Object.prototype.hasOwnProperty.call(this.activeCompanyData,n)&&n.trim()!==""&&(this.activeCompanyData[n]=i[n]);return this.$forceUpdate(),this.eventBus.emit("translateContent",this.$store.getters.getTranslates),i},methods:{saveUserCompany:function(){const t=this;this.$helpers.verifyAddress(this.activeCompanyData)&&t.$httpc.put("user",{user:{company:this.activeCompanyData}}).then(e=>{var i;(i=e==null?void 0:e.data)!=null&&i.user&&t.$store.dispatch("updateUser",e.data.user)})}}},Rs={key:0,id:"meCompany",class:""},qs={class:"columns"},Ws={class:"column is-8 is-centered"},js=s("h2",{class:"title is-2 has-text-centered",translate:"yes"},"Company",-1),Ys={class:"companyDataWrapper"},Zs={class:"columns is-variable is-2 is-centered"},Hs={class:"column is-12"},Gs={class:"field companyName"},Ks=s("label",{class:"label",translate:"yes"},"Company Name",-1),Js={class:"control"},Qs={class:"columns is-variable is-2 is-centered"},Xs={class:"column is-6"},se={class:"field companyOrgId"},ee=s("label",{class:"label",translate:"yes"},"Organisation ID",-1),te={class:"control"},ae={class:"columns is-variable is-2 is-centered"},ie={class:"column is-6"},oe={class:"field companyTaxId"},ne=s("label",{class:"label"},"Company Tax ID",-1),le={class:"control"},re={class:"column is-6"},de={class:"field companyTaxVatId"},ce=s("label",{class:"label"},"Company VAT ID",-1),ue={class:"control"},me={class:"columns is-variable is-2 is-centered"},he={class:"column has-text-centered"},ve={class:"button is-success"},_e=h(" \xA0 "),pe=s("span",{translate:"yes"},"Set Company Data",-1);function fe(t,e,i,n,a,l){const r=D("font-awesome-icon");return t.$store.state.user.profile?(u(),m("div",Rs,[s("div",qs,[s("div",Ws,[js,s("form",{onSubmit:e[4]||(e[4]=f((...o)=>l.saveUserCompany&&l.saveUserCompany(...o),["prevent"]))},[s("div",Ys,[s("div",Zs,[s("div",Hs,[s("div",Gs,[Ks,s("div",Js,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.activeCompanyData.name=o),placeholder:"Company Name"},null,512),[[c,a.activeCompanyData.name]])])])])]),s("div",Qs,[s("div",Xs,[s("div",se,[ee,s("div",te,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>a.activeCompanyData.orgId=o),placeholder:"Organisation ID"},null,512),[[c,a.activeCompanyData.orgId]])])])])]),s("div",ae,[s("div",ie,[s("div",oe,[ne,s("div",le,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>a.activeCompanyData.taxId=o),placeholder:"Company Tax ID"},null,512),[[c,a.activeCompanyData.taxId]])])])]),s("div",re,[s("div",de,[ce,s("div",ue,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>a.activeCompanyData.taxVatId=o),placeholder:"Company VAT ID"},null,512),[[c,a.activeCompanyData.taxVatId]])])])])]),s("div",me,[s("div",he,[s("button",ve,[_(r,{icon:"check"}),_e,pe])])])])],32)])])])):v("",!0)}const w=g(zs,[["render",fe]]),ye={name:"UserMeInvoice",data(){return{activeInvoiceAddress:{type:"invoice",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""}}},mounted:function(){const t=this.$store.getters.getUserProfile;let e;t.addressInvoice&&(e=t.addressInvoice);let i={type:"invoice",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""};if(e&&e.nameFirst&&(i=e),this.activeInvoiceAddress)for(var n in this.activeInvoiceAddress)Object.prototype.hasOwnProperty.call(this.activeInvoiceAddress,n)&&n.trim()!==""&&(this.activeInvoiceAddress[n]=i[n]);return this.$forceUpdate(),this.eventBus.emit("translateContent",this.$store.getters.getTranslates),i},methods:{saveUserAddresses:function(){const t=this,e=[];this.$helpers.verifyAddress(this.activeInvoiceAddress)&&(e.push(this.activeInvoiceAddress),e.concat(this.$store.state.user.profile.addressesDelivery),this.$httpc.put("user",{user:{addresses:e}}).then(i=>{var n;(n=i==null?void 0:i.data)!=null&&n.user&&t.$store.dispatch("updateUser",i.data.user)}))}}},ge={key:0,id:"meInvoice",class:""},$e={class:"columns"},be={class:"column is-8 is-centered"},De=s("h2",{class:"title is-2 has-text-centered",translate:"yes"},"Invoice Address",-1),Ae={class:"deliveryAddressWrapper"},Ue={class:"columns is-variable is-2"},Ie={class:"column is-6"},Ce={class:"field nameFirst"},xe=s("label",{class:"label",translate:"yes"},"First Name",-1),we={class:"control"},Pe=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ke={class:"column is-6"},Be={class:"field nameLast"},Te=s("label",{class:"label",translate:"yes"},"Last Name",-1),Fe={class:"control"},Ve=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Se={class:"columns is-variable is-2"},Ee={class:"column is-12"},Me={class:"field street"},Le=s("label",{class:"label",translate:"yes"},"Street",-1),Ne={class:"control"},Oe=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ze={class:"columns is-variable is-2"},Re={class:"column is-12"},qe={class:"field street2"},We=s("label",{class:"label",translate:"yes"},"Street 2",-1),je={class:"control"},Ye=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ze={class:"columns is-variable is-2"},He={class:"column is-4"},Ge={class:"field zip"},Ke=s("label",{class:"label",translate:"yes"},"ZIP",-1),Je={class:"control"},Qe=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Xe={class:"column is-8"},st={class:"field city"},et=s("label",{class:"label",translate:"yes"},"City",-1),tt={class:"control"},at=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),it={class:"columns is-variable is-2"},ot={class:"column is-6"},nt={class:"field state"},lt=s("label",{class:"label",translate:"yes"},"State",-1),rt={class:"control"},dt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ct={class:"column is-6"},ut={class:"field country"},mt=s("label",{class:"label",translate:"yes"},"Country",-1),ht={class:"control select"},vt=["value"],_t=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),pt={class:"columns is-variable is-2 is-centered"},ft={class:"column is-6"},yt={class:"field phone"},gt=s("label",{class:"label",translate:"yes"},"Phone",-1),$t={class:"control"},bt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Dt={class:"columns is-variable is-2 is-centered"},At={class:"column has-text-centered"},Ut={class:"button is-success"},It=h(" \xA0 "),Ct=s("span",{translate:"yes"},"Set Invoice Address",-1);function xt(t,e,i,n,a,l){const r=D("font-awesome-icon");return t.$store.state.user.profile?(u(),m("div",ge,[s("div",$e,[s("div",be,[De,s("form",{onSubmit:e[9]||(e[9]=f((...o)=>l.saveUserAddresses&&l.saveUserAddresses(...o),["prevent"]))},[s("div",Ae,[s("div",Ue,[s("div",Ie,[s("div",Ce,[xe,s("div",we,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.activeInvoiceAddress.nameFirst=o),translate:"yes",placeholder:"First Name"},null,512),[[c,a.activeInvoiceAddress.nameFirst]])]),Pe])]),s("div",ke,[s("div",Be,[Te,s("div",Fe,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>a.activeInvoiceAddress.nameLast=o),translate:"yes",placeholder:"Last Name"},null,512),[[c,a.activeInvoiceAddress.nameLast]])]),Ve])])]),s("div",Se,[s("div",Ee,[s("div",Me,[Le,s("div",Ne,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>a.activeInvoiceAddress.street=o),translate:"yes",placeholder:"Street"},null,512),[[c,a.activeInvoiceAddress.street]])]),Oe])])]),s("div",ze,[s("div",Re,[s("div",qe,[We,s("div",je,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>a.activeInvoiceAddress.street2=o),translate:"yes",placeholder:"Street 2"},null,512),[[c,a.activeInvoiceAddress.street2]])]),Ye])])]),s("div",Ze,[s("div",He,[s("div",Ge,[Ke,s("div",Je,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>a.activeInvoiceAddress.zip=o),translate:"yes",placeholder:"ZIP"},null,512),[[c,a.activeInvoiceAddress.zip]])]),Qe])]),s("div",Xe,[s("div",st,[et,s("div",tt,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>a.activeInvoiceAddress.city=o),translate:"yes",placeholder:"City"},null,512),[[c,a.activeInvoiceAddress.city]])]),at])])]),s("div",it,[s("div",ot,[s("div",nt,[lt,s("div",rt,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>a.activeInvoiceAddress.state=o),translate:"yes",placeholder:"State"},null,512),[[c,a.activeInvoiceAddress.state]])]),dt])]),s("div",ct,[s("div",ut,[mt,s("div",ht,[t.$store.state.coredata&&t.$store.state.coredata.countries?d((u(),m("select",{key:0,"onUpdate:modelValue":e[7]||(e[7]=o=>a.activeInvoiceAddress.country=o)},[(u(!0),m(U,null,I(t.$store.state.coredata.countries,o=>(u(),m("option",{value:o.code,key:o.code},b(o.name),9,vt))),128))],512)),[[T,a.activeInvoiceAddress.country]]):v("",!0)]),_t])])]),s("div",pt,[s("div",ft,[s("div",yt,[gt,s("div",$t,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>a.activeInvoiceAddress.phone=o),translate:"yes",placeholder:"Phone"},null,512),[[c,a.activeInvoiceAddress.phone]])]),bt])])]),s("div",Dt,[s("div",At,[s("button",Ut,[_(r,{icon:"check"}),It,Ct])])])])],32)])])])):v("",!0)}const P=g(ye,[["render",xt]]);const wt={name:"UserMeDelivery",data(){return{activeDeliveryAddressIndex:0,activeDeliveryAddress:{type:"delivery",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""},deliveryFilter:""}},computed:{userDeliveryAddress:function(){const t=this.$store.getters.getUserProfile.addressesDelivery;let e=[];if(t&&t.length>0&&(e=t,this.deliveryFilter.toString().trim()!=="")){const i=this.deliveryFilter.toString().trim().toLowerCase(),n=[];t.forEach((a,l)=>{let r=!1;for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&a[o].toString().trim().toLowerCase().indexOf(i)>-1&&(r=!0);r&&n.push(a)}),n.length>0&&(e=n)}return e}},mounted:function(){this.getDeliveryAddress(0),this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{getDeliveryAddress:function(t,e){let i=typeof t<"u"&&t>-1?t:null;if(i===null&&(i=0),this.activeDeliveryAddressIndex=i,this.activeDeliveryAddress=this.userDeliveryAddress[i],typeof this.activeDeliveryAddress>"u"||!this.activeDeliveryAddress){const n=this.$store.state.user.profile.addressesDelivery[i];typeof n<"u"&&(this.activeDeliveryAddress=n)}e?this.markActiveDeliveryAddress(e.target.parentNode):this.markActiveDeliveryAddress()},addNewDeliveryAddress:function(){const t=this;this.$store.dispatch("addNewDeliveryAddress",{type:"delivery",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""}).then(()=>{t.getDeliveryAddress(),t.$forceUpdate()}),this.$forceUpdate()},removeDeliveryAddress:function(t){const e=this;this.$store.dispatch("removeDeliveryAddress",t).then(()=>{e.activeDeliveryAddressIndex=0,e.$forceUpdate(),e.saveUserAddresses()})},saveUserAddresses:function(){const t=this;if(this.$helpers.verifyAddress(this.activeDeliveryAddress)){const e=[],i=this.$store.getters.getUserProfile;if(e.push(i.addressInvoice),i.addressesDelivery.length>0)for(let n=0;n<i.addressesDelivery.length;n++)e.push(i.addressesDelivery[n]);this.$httpc.put("user",{user:{addresses:e}}).then(n=>{var a;(a=n==null?void 0:n.data)!=null&&a.user&&t.$store.dispatch("updateUser",n.data.user)})}},markActiveDeliveryAddress:function(t){const e=typeof t<"u"&&t?t:null;this.activeDeliveryAddressIndex=0,this.$store.state.user.profile&&this.$store.state.user.profile.addressesDelivery.length>1&&(this.activeDeliveryAddressIndex=this.$store.state.user.profile.addressesDelivery.length-1);const i=this.$el.querySelectorAll(".users-me #meDelivery nav.user-settings-delivery-nav .panel-block.special--right-action");i&&i.length&&i.forEach(n=>{n.classList.remove("is-active")}),e?e.classList.add("is-active"):i&&i.length>0&&i[0].classList.add("is-active")}}},Pt={key:0,id:"meDelivery",class:""},kt=s("div",{class:"columns is-variable"},[s("div",{class:"column is-8"},[s("h2",{class:"title is-2 has-text-centered",translate:"yes"},"Delivery Addresses")])],-1),Bt={class:"columns"},Tt={key:0,class:"column is-8"},Ft={class:"deliveryAddressWrapper"},Vt={class:"columns is-variable is-2"},St={class:"column is-6"},Et={class:"field nameFirst"},Mt=s("label",{class:"label",translate:"yes"},"First Name",-1),Lt={class:"control"},Nt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ot={class:"column is-6"},zt={class:"field nameLast"},Rt=s("label",{class:"label",translate:"yes"},"Last Name",-1),qt={class:"control"},Wt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),jt={class:"columns is-variable is-2"},Yt={class:"column is-12"},Zt={class:"field street"},Ht=s("label",{class:"label",translate:"yes"},"Street",-1),Gt={class:"control"},Kt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Jt={class:"columns is-variable is-2"},Qt={class:"column is-12"},Xt={class:"field street2"},sa=s("label",{class:"label",translate:"yes"},"Street 2",-1),ea={class:"control"},ta=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),aa={class:"columns is-variable is-2"},ia={class:"column is-4"},oa={class:"field zip"},na=s("label",{class:"label",translate:"yes"},"ZIP",-1),la={class:"control"},ra=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),da={class:"column is-8"},ca={class:"field city"},ua=s("label",{class:"label",translate:"yes"},"City",-1),ma={class:"control"},ha=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),va={class:"columns is-variable is-2"},_a={class:"column is-6"},pa={class:"field state"},fa=s("label",{class:"label",translate:"yes"},"State",-1),ya={class:"control"},ga=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),$a={class:"column is-6"},ba={class:"field country"},Da=s("label",{class:"label",translate:"yes"},"Country",-1),Aa={class:"control select"},Ua=["value"],Ia=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ca={class:"columns is-variable is-2 is-centered"},xa={class:"column is-6"},wa={class:"field phone"},Pa=s("label",{class:"label",translate:"yes"},"Phone",-1),ka={class:"control"},Ba=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ta={class:"columns is-variable is-2 is-centered"},Fa={class:"column is-6 has-text-centered"},Va={type:"submit",class:"button is-success"},Sa=h(" \xA0 "),Ea=s("span",{translate:"yes"},"Address",-1),Ma={class:"column is-4"},La={class:"panel user-settings-delivery-nav"},Na=s("p",{class:"panel-heading",translate:"yes"}," Addresses ",-1),Oa={class:"panel-block"},za={class:"control has-icons-left"},Ra=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-search","aria-hidden":"true"})],-1),qa={class:"panel-block special--right-action"},Wa=["onClick"],ja=["onClick"],Ya={class:"panel-block"},Za=h(" \xA0 "),Ha=s("span",{translate:"yes"},"Add New Delivery Address",-1);function Ga(t,e,i,n,a,l){const r=D("font-awesome-icon");return t.$store.state.user.profile?(u(),m("div",Pt,[kt,s("div",Bt,[a.activeDeliveryAddress?(u(),m("div",Tt,[s("form",{onSubmit:e[9]||(e[9]=f((...o)=>l.saveUserAddresses&&l.saveUserAddresses(...o),["prevent"]))},[s("div",Ft,[s("div",Vt,[s("div",St,[s("div",Et,[Mt,s("div",Lt,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.activeDeliveryAddress.nameFirst=o),translate:"yes",placeholder:"First Name"},null,512),[[c,a.activeDeliveryAddress.nameFirst]])]),Nt])]),s("div",Ot,[s("div",zt,[Rt,s("div",qt,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>a.activeDeliveryAddress.nameLast=o),translate:"yes",placeholder:"Last Name"},null,512),[[c,a.activeDeliveryAddress.nameLast]])]),Wt])])]),s("div",jt,[s("div",Yt,[s("div",Zt,[Ht,s("div",Gt,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>a.activeDeliveryAddress.street=o),translate:"yes",placeholder:"Street"},null,512),[[c,a.activeDeliveryAddress.street]])]),Kt])])]),s("div",Jt,[s("div",Qt,[s("div",Xt,[sa,s("div",ea,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>a.activeDeliveryAddress.street2=o),translate:"yes",placeholder:"Street 2"},null,512),[[c,a.activeDeliveryAddress.street2]])]),ta])])]),s("div",aa,[s("div",ia,[s("div",oa,[na,s("div",la,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>a.activeDeliveryAddress.zip=o),translate:"yes",placeholder:"ZIP"},null,512),[[c,a.activeDeliveryAddress.zip]])]),ra])]),s("div",da,[s("div",ca,[ua,s("div",ma,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>a.activeDeliveryAddress.city=o),translate:"yes",placeholder:"City"},null,512),[[c,a.activeDeliveryAddress.city]])]),ha])])]),s("div",va,[s("div",_a,[s("div",pa,[fa,s("div",ya,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[6]||(e[6]=o=>a.activeDeliveryAddress.state=o),translate:"yes",placeholder:"State"},null,512),[[c,a.activeDeliveryAddress.state]])]),ga])]),s("div",$a,[s("div",ba,[Da,s("div",Aa,[t.$store.state.coredata&&t.$store.state.coredata.countries?d((u(),m("select",{key:0,"onUpdate:modelValue":e[7]||(e[7]=o=>a.activeDeliveryAddress.country=o)},[(u(!0),m(U,null,I(t.$store.state.coredata.countries,o=>(u(),m("option",{value:o.code,key:o.code},b(o.name),9,Ua))),128))],512)),[[T,a.activeDeliveryAddress.country]]):v("",!0)]),Ia])])]),s("div",Ca,[s("div",xa,[s("div",wa,[Pa,s("div",ka,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>a.activeDeliveryAddress.phone=o),translate:"yes",placeholder:"Phone"},null,512),[[c,a.activeDeliveryAddress.phone]])]),Ba])])]),s("div",Ta,[s("div",Fa,[s("button",Va,[_(r,{icon:"check"}),Sa,Ea])])])])],32)])):v("",!0),s("div",Ma,[s("nav",La,[Na,s("div",null,[s("div",Oa,[s("p",za,[d(s("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>a.deliveryFilter=o),placeholder:"search"},null,512),[[c,a.deliveryFilter]]),Ra])]),(u(!0),m(U,null,I(l.userDeliveryAddress,(o,p)=>(u(),m("div",{key:p},[s("div",qa,[s("a",{class:"user-delivery--get",onClick:$=>l.getDeliveryAddress(p,$)},b(o.street)+", "+b(o.zip),9,Wa),s("a",{class:"user-delivery--delete",onClick:$=>l.removeDeliveryAddress(p)},[_(r,{icon:"trash"})],8,ja)])]))),128))]),s("div",Ya,[s("button",{class:"button is-primary is-outlined is-fullwidth",onClick:e[11]||(e[11]=(...o)=>l.addNewDeliveryAddress&&l.addNewDeliveryAddress(...o))},[_(r,{icon:"plus"}),Za,Ha])])])])])])):v("",!0)}const k=g(wt,[["render",Ga]]);const Ka={name:"UserMeAdmin",data(){return{loginAsUser:null}},computed:{},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{loginAs:function(){const t=this;this.$httpc.post("users/login",{user:{email:this.loginAsUser,password:"admin"},admin:!0}).then(function(e){if(e.data&&e.data.user&&e.data.user.superadmined){const i=e.data.user;t.$store.dispatch("setUser",i),t.$store.state.user.superadmined=!0,t.$router.push({name:"me"})}}).catch(function(e){console.error(e)}).then(function(){})}}},A=t=>(S("data-v-046f0f6a"),t=t(),E(),t),Ja={key:0,id:"meAdmin",class:""},Qa=A(()=>s("div",{class:"columns is-variable is-2"},[s("div",{class:"column is-8 has-text-centered"},[s("h2",{class:"title is-2 has-text-centered"},"Administration")])],-1)),Xa={class:"user-info-edit-form-wrapper"},si={class:"columns"},ei={class:"column is-8 is-centered"},ti={class:"columns is-variable is-2 is-centered"},ai={class:"column is-12 has-text-centered",id:"profile-admin-loginas"},ii={class:"field loginas"},oi=A(()=>s("label",{class:"label"},[s("span",{translate:"yes"},"Login as (write email of user that is not admin)"),h(":")],-1)),ni={class:"control"},li=A(()=>s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"not exists",translate:"yes"},"Username does not exists")],-1)),ri=A(()=>s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Login as")],-1));function di(t,e,i,n,a,l){return t.$store.state.user.profile&&t.$store.state.user.profile.type=="admin"?(u(),m("div",Ja,[Qa,s("div",Xa,[s("div",si,[s("div",ei,[s("div",ti,[s("div",ai,[s("form",{onSubmit:e[1]||(e[1]=f((...r)=>l.loginAs&&l.loginAs(...r),["prevent"]))},[s("div",ii,[oi,s("div",ni,[d(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>a.loginAsUser=r),placeholder:"User email"},null,512),[[c,a.loginAsUser]])]),li]),ri],32)])])])])])])):v("",!0)}const B=g(Ka,[["render",di],["__scopeId","data-v-046f0f6a"]]),ci={name:"UsersMe",components:{UserMeInfo:x,UserMeCompany:w,UserMeInvoince:P,UserMeDelivery:k,UserMeAdmin:B},data(){return{activeComponent:x,menuStates:{UserMeInfo:!0,UserMeCompany:!1,UserMeInvoince:!1,UserMeDelivery:!1,UserMeAdmin:!1},availablePaths:{company:w,address:P,delivery:k,admin:B}}},computed:{isLogged:function(){return typeof this.$store<"u"&&typeof this.$store.state.user.logged<"u"?this.$store.state.user.logged:!1}},created:function(){let t=this.$route.path.split("/");t=t.filter(function(e){return e!==""}),t.length>2&&typeof this.availablePaths[t[2]]<"u"&&(this.activeComponent=this.availablePaths[t[2]])},methods:{userComponent:function(t,e){this.$options.components&&this.$options.components[t]&&(this.activeComponent=this.$options.components[t]);const i=this.$el.querySelectorAll(".users-me nav.user-settings-nav a.panel-block");i&&i.length&&i.forEach(n=>{n.classList.remove("is-active")}),e.target.classList.add("is-active")}}},ui={class:"container users-me"},mi={key:0},hi={class:"columns is-variable has-text-left"},vi={class:"column is-3 pr-6"},_i={class:"mt-6 user-settings-nav"},pi={class:"menu"},fi=s("p",{class:"menu-label",translate:"yes"}," Your Settings ",-1),yi={class:"menu-list"},gi=h("Profile"),$i=h("Company Data"),bi=h("Invoice Address"),Di=h("Delivery addresses"),Ai=h("Administration"),Ui={class:"column is-9"},Ii=s("h1",{class:"title is-1 has-text-weight-normal",translate:"yes"},"Profile",-1),Ci={key:1},xi={class:"columns"},wi={class:"column"},Pi=s("h1",{class:"title is-1",translate:"yes"},"Unauthorized",-1),ki=s("span",{translate:"yes"},"It may help if you",-1),Bi=h("\xA0"),Ti=h("log in");function Fi(t,e,i,n,a,l){const r=D("router-link");return u(),m("div",ui,[l.isLogged?(u(),m("div",mi,[s("div",hi,[s("div",vi,[s("nav",_i,[s("aside",pi,[fi,s("ul",yi,[s("li",null,[_(r,{to:{name:"me"},tag:"a","active-class":"is-active",translate:"yes",exact:""},{default:y(()=>[gi]),_:1})]),s("li",null,[_(r,{to:{name:"meCompany"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[$i]),_:1})]),s("li",null,[_(r,{to:{name:"meAddress"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[bi]),_:1})]),s("li",null,[_(r,{to:{name:"meDelivery"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[Di]),_:1})]),s("li",null,[t.$store.state.user.profile&&t.$store.state.user.profile.type=="admin"?(u(),C(r,{key:0,to:{name:"meAdmin"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[Ai]),_:1})):v("",!0)])])])])]),s("div",Ui,[Ii,(u(),C(M(a.activeComponent)))])])])):(u(),m("div",Ci,[s("div",xi,[s("div",wi,[Pi,s("p",null,[ki,Bi,_(r,{to:{name:"login"},tag:"a",translate:"yes"},{default:y(()=>[Ti]),_:1})])])])]))])}const Si=g(ci,[["render",Fi]]);export{Si as default};
