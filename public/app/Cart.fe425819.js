import{u as V,_ as k,r as f,o as i,c as d,a as e,e as v,f as A,b as u,v as p,t as c,g as _,j as h,h as U,F as g,i as b,w as S,d as N,s as I,x as L,y as O,m as E,q as F}from"./index.fce5a309.js";import{O as M}from"./PaymentStripe.50d14984.js";const q={name:"OrderUser",data(){return{newUserEmail:"",newUserEmail2:"",newUserPassword:"",newUserPassword2:""}},computed:{...V({user:"getUserProfile"})},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{updateUserData:function(){if(this.user){const t=this.$helpers.propertiesRequiredConfirm({email:this.newUserEmail,email2:this.newUserEmail,password:this.newUserPassword,password2:this.newUserPassword2},["email","password"],["email","password"]);if(t.result&&this.newUserEmail&&this.newUserEmail!=="")this.user.addressInvoice.email=this.newUserEmail,this.$store.state.user.email=this.newUserEmail,this.$store.state.password=this.newUserPassword,this.$parent.orderParams.order.user.email=this.newUserEmail,this.$parent.orderParams.order.user.password=this.newUserPassword;else{const o=this.$el.querySelector(".field."+t.fields[0]);o&&o.scrollIntoView({behaviour:"smooth",block:"start",inline:"nearest"}),this.$helpers.formUndecorateAndDecorateFields(t.fields,t.errors)}}const s=Object.assign({},this.user.addressInvoice);if(delete s.email,this.$helpers.verifyAddress(s)&&(this.$store.dispatch("setUserInvoiceAddress",this.user.addressInvoice),this.$parent.orderParams.order.addresses.invoiceAddress=this.user.addressInvoice,this.user&&this.user.company&&(this.user.company.name||this.user.company.orgId||this.user.company.taxId||this.user.company.taxVatId)&&(this.user.addressInvoice.companyName=this.user.company.name,this.user.addressInvoice.companyOrgId=this.user.company.orgId,this.user.addressInvoice.companyTaxId=this.user.company.taxId,this.user.addressInvoice.companyTaxVatId=this.user.company.taxVatId),this.$parent.updateOrder(),this.user&&this.user!==null&&this.user.addressInvoice&&this.user.addressInvoice.nameFirst&&this.user.addressInvoice.nameLast&&this.$store.state.user&&this.$store.state.user.profile&&this.$store.state.user.profile.addressInvoice.nameFirst&&this.$store.state.user.profile.addressInvoice.nameLast&&(this.$store.state.user.profile.addressInvoice.nameFirst!==this.user.addressInvoice.nameFirst&&(this.$store.state.user.profile.addressInvoice.nameFirst=this.user.addressInvoice.nameFirst),this.$store.state.user.profile.addressInvoice.nameLast!==this.user.addressInvoice.nameLast&&(this.$store.state.user.profile.addressInvoice.nameLast=this.user.addressInvoice.nameLast)),(typeof this.$parent.orderParams>"u"||this.$parent.orderParams===null)&&(this.$parent.orderParams={}),(typeof this.$parent.orderParams.order>"u"||this.$parent.orderParams.order===null)&&(this.$parent.orderParams.order={}),this.$parent.orderParams.order.addresses={invoiceAddress:this.user.addressInvoice},{addresses:[]}.addresses.push(this.user.addressInvoice),this.$parent.orderParams.errors&&this.$parent.orderParams.errors.userErrors&&this.$parent.orderParams.errors.userErrors.length>0)){const o={fields:[],errors:[]};this.$parent.orderParams.errors.userErrors.forEach(a=>{o.fields.push(a.value),o.errors.push({name:a.value,action:a.desc})}),this.$helpers.formUndecorateAndDecorateFields(o.fields,o.errors);const m=this.$el.querySelector(".field."+o.fields[0]);m&&m.scrollIntoView({behaviour:"smooth",block:"start",inline:"nearest"})}}}},x={id:"orderUser"},z=e("h2",{class:"title is-2",translate:"yes"},"Your Address",-1),j={key:0},B={class:"columns"},W={class:"column is-12"},R=e("span",{translate:"yes"},"Already registered?",-1),Y=_("Log in"),Z={class:"columns is-variable is-2 is-centered"},J={class:"column is-6",id:"cart-user-email"},G={class:"field email"},Q=e("label",{class:"label",translate:"yes"},"Email",-1),H={class:"control"},K=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),e("div",{class:"form-message","data-message":"exists",translate:"yes"},"This email already exists")],-1),X={class:"column is-6",id:"cart-user-email2"},ee={class:"field email2"},se=e("label",{class:"label",translate:"yes"},"Email Confirm",-1),te={class:"control"},re=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),e("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1),ae={class:"columns is-variable is-2 is-centered"},oe={class:"column is-6",id:"cart-user-password"},ie={class:"field password"},de=e("label",{class:"label",translate:"yes"},"Password",-1),ne={class:"control"},le=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty")],-1),ce={class:"column is-6",id:"cart-user-password2"},me={class:"field password2"},ue=e("label",{class:"label",translate:"yes"},"Password Confirm",-1),he={class:"control"},pe=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This field cannot be empty"),e("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1),ye=e("div",{class:"columns"},[e("div",{class:"column is-12"},[e("hr")])],-1),_e={key:1},ve=e("span",{translate:"yes"},"Logged in as",-1),$e=_(" \xA0 "),fe={key:0},ge={key:1},be=e("br",null,null,-1),Pe=e("span",{translate:"yes"},"Please check your email to verify your email",-1),Ie={class:"columns is-variable is-2"},ke={class:"column is-6",id:"cart-user-name-first"},De={class:"field nameFirst"},Te=e("label",{class:"label",translate:"yes"},"First Name",-1),Ce={class:"control"},we=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ae={class:"column is-6",id:"cart-user-name-last"},Se={class:"field nameLast"},Ue=e("label",{class:"label",translate:"yes"},"Last Name",-1),Oe={class:"control"},Ve=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ne={class:"columns is-variable is-2"},Le={class:"column is-12",id:"cart-user-street"},Ee={class:"field street"},Fe=e("label",{class:"label",translate:"yes"},"Street",-1),Me={class:"control"},qe=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),xe={class:"columns is-variable is-2"},ze={class:"column is-12",id:"cart-user-street2"},je={class:"field street2"},Be=e("label",{class:"label",translate:"yes"},"Street 2",-1),We={class:"control"},Re={class:"columns is-variable is-2"},Ye={class:"column is-4",id:"cart-user-zip"},Ze={class:"field zip"},Je=e("label",{class:"label",translate:"yes"},"ZIP",-1),Ge={class:"control"},Qe=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),He={class:"column is-8",id:"cart-user-city"},Ke={class:"field city"},Xe=e("label",{class:"label",translate:"yes"},"City",-1),es={class:"control"},ss=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ts={class:"columns is-variable is-2"},rs={class:"column is-6",id:"cart-user-state"},as={class:"field"},os=e("label",{class:"label",translate:"yes"},"State",-1),is={class:"control"},ds={class:"column is-6",id:"cart-user-country"},ns={class:"field country"},ls=e("label",{class:"label",translate:"yes"},"Country",-1),cs={class:"control select"},ms=["value"],us=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),hs={class:"columns is-variable is-2 is-centered"},ps={class:"column is-6"},ys={class:"field phone"},_s=e("label",{class:"label",translate:"yes"},"Phone",-1),vs={class:"control"},$s=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),fs=e("hr",null,null,-1),gs={key:2,class:"simple-wrapper"},bs={class:"columns is-variable is-2 is-centered"},Ps={class:"column is-12"},Is={class:"field companyName"},ks=e("label",{class:"label",translate:"yes"},"Company Name",-1),Ds={class:"control"},Ts={class:"columns is-variable is-2 is-centered"},Cs={class:"column is-6"},ws={class:"field companyOrgId"},As=e("label",{class:"label",translate:"yes"},"Organisation ID",-1),Ss={class:"control"},Us={class:"columns is-variable is-2 is-centered"},Os={class:"column is-6"},Vs={class:"field companyTaxId"},Ns=e("label",{class:"label"},"Company Tax ID",-1),Ls={class:"control"},Es={class:"column is-6"},Fs={class:"field companyTaxVatId"},Ms=e("label",{class:"label"},"Company VAT ID",-1),qs={class:"control"},xs={class:"button is-success",type:"submit"},zs=_(" \xA0 "),js=e("span",{translate:"yes"},"Set user order data",-1);function Bs(s,t,o,m,a,l){const y=f("router-link"),n=f("font-awesome-icon");return i(),d("div",x,[z,e("form",{onSubmit:t[17]||(t[17]=S((...r)=>l.updateUserData&&l.updateUserData(...r),["prevent"]))},[!s.$store.state.user.logged||s.$store.state.user.logged!==!0?(i(),d("div",j,[e("div",B,[e("div",W,[R,v(y,{to:{name:"login"},tag:"a",class:"","active-class":"is-active",translate:"yes"},{default:A(()=>[Y]),_:1})])]),e("div",Z,[e("div",J,[e("div",G,[Q,e("div",H,[u(e("input",{class:"input",type:"email","onUpdate:modelValue":t[0]||(t[0]=r=>a.newUserEmail=r),translate:"yes",placeholder:"Email"},null,512),[[p,a.newUserEmail]])]),K])]),e("div",X,[e("div",ee,[se,e("div",te,[u(e("input",{class:"input",type:"email","onUpdate:modelValue":t[1]||(t[1]=r=>a.newUserEmail2=r),translate:"yes",placeholder:"Email Confirm"},null,512),[[p,a.newUserEmail2]])]),re])])]),e("div",ae,[e("div",oe,[e("div",ie,[de,e("div",ne,[u(e("input",{class:"input",type:"password","onUpdate:modelValue":t[2]||(t[2]=r=>a.newUserPassword=r),translate:"yes",placeholder:"Password"},null,512),[[p,a.newUserPassword]])]),le])]),e("div",ce,[e("div",me,[ue,e("div",he,[u(e("input",{class:"input",type:"password","onUpdate:modelValue":t[3]||(t[3]=r=>a.newUserPassword2=r),translate:"yes",placeholder:"Password Confirm"},null,512),[[p,a.newUserPassword2]])]),pe])])]),ye])):(i(),d("div",_e,[ve,$e,s.user.username?(i(),d("span",fe,c(s.user.username),1)):s.user.email?(i(),d("span",ge,[_(c(s.user.email)+" ",1),be,Pe])):h("",!0)])),e("div",Ie,[e("div",ke,[e("div",De,[Te,e("div",Ce,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=r=>s.user.addressInvoice.nameFirst=r),translate:"yes",placeholder:"First Name"},null,512),[[p,s.user.addressInvoice.nameFirst]])]),we])]),e("div",Ae,[e("div",Se,[Ue,e("div",Oe,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[5]||(t[5]=r=>s.user.addressInvoice.nameLast=r),translate:"yes",placeholder:"Last Name"},null,512),[[p,s.user.addressInvoice.nameLast]])]),Ve])])]),e("div",Ne,[e("div",Le,[e("div",Ee,[Fe,e("div",Me,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[6]||(t[6]=r=>s.user.addressInvoice.street=r),translate:"yes",placeholder:"Street"},null,512),[[p,s.user.addressInvoice.street]])]),qe])])]),e("div",xe,[e("div",ze,[e("div",je,[Be,e("div",We,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[7]||(t[7]=r=>s.user.addressInvoice.street2=r),translate:"yes",placeholder:"Street 2"},null,512),[[p,s.user.addressInvoice.street2]])])])])]),e("div",Re,[e("div",Ye,[e("div",Ze,[Je,e("div",Ge,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[8]||(t[8]=r=>s.user.addressInvoice.zip=r),translate:"yes",placeholder:"ZIP"},null,512),[[p,s.user.addressInvoice.zip]])]),Qe])]),e("div",He,[e("div",Ke,[Xe,e("div",es,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[9]||(t[9]=r=>s.user.addressInvoice.city=r),translate:"yes",placeholder:"City"},null,512),[[p,s.user.addressInvoice.city]])]),ss])])]),e("div",ts,[e("div",rs,[e("div",as,[os,e("div",is,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[10]||(t[10]=r=>s.user.addressInvoice.state=r),translate:"yes",placeholder:"State"},null,512),[[p,s.user.addressInvoice.state]])])])]),e("div",ds,[e("div",ns,[ls,e("div",cs,[s.$store.state.coredata&&s.$store.state.coredata.countries?u((i(),d("select",{key:0,"onUpdate:modelValue":t[11]||(t[11]=r=>s.user.addressInvoice.country=r)},[(i(!0),d(g,null,b(s.$store.state.coredata.countries,r=>(i(),d("option",{value:r.code,key:r.code},c(r.name),9,ms))),128))],512)),[[U,s.user.addressInvoice.country]]):h("",!0)]),us])])]),e("div",hs,[e("div",ps,[e("div",ys,[_s,e("div",vs,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[12]||(t[12]=r=>s.user.addressInvoice.phone=r),translate:"yes",placeholder:"Phone"},null,512),[[p,s.user.addressInvoice.phone]])]),$s])])]),fs,s.user.company?(i(),d("div",gs,[e("div",bs,[e("div",Ps,[e("div",Is,[ks,e("div",Ds,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[13]||(t[13]=r=>s.user.company.name=r),placeholder:"Company Name"},null,512),[[p,s.user.company.name]])])])])]),e("div",Ts,[e("div",Cs,[e("div",ws,[As,e("div",Ss,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[14]||(t[14]=r=>s.user.company.orgId=r),placeholder:"Organisation ID"},null,512),[[p,s.user.company.orgId]])])])])]),e("div",Us,[e("div",Os,[e("div",Vs,[Ns,e("div",Ls,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[15]||(t[15]=r=>s.user.company.taxId=r),placeholder:"Company Tax ID"},null,512),[[p,s.user.company.taxId]])])])]),e("div",Es,[e("div",Fs,[Ms,e("div",qs,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>s.user.company.taxVatId=r),placeholder:"Company VAT ID"},null,512),[[p,s.user.company.taxVatId]])])])])])])):h("",!0),e("button",xs,[v(n,{icon:"check"}),zs,js])],32)])}const D=k(q,[["render",Bs]]);const Ws={name:"OrderDeliveryPayment",data(){return{deliveryData:{physical:null,digital:null},paymentData:null,showDeliveryAddress:!1,deliveryAddress:{type:"delivery",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",state:"",country:"",phone:""}}},computed:{},created:function(){this.$parent&&this.$parent.orderParams&&(this.$parent.orderParams.order.data&&(this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename&&(this.deliveryData=this.$parent.orderParams.order.data.deliveryData.codename),this.$parent.orderParams.order.data.paymentData&&this.$parent.orderParams.order.data.paymentData.codename&&(this.paymentData=this.$parent.orderParams.order.data.paymentData.codename)),this.$parent.orderParams.order.addresses&&this.$parent.orderParams.order.addresses.deliveryAddress&&(this.deliveryAddress=this.$parent.orderParams.order.addresses.deliveryAddress,this.showDeliveryAddress=!0))},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{updateDeliveryPaymentData:function(){let s=!1;const t=this.$el.querySelector(".deliveryType .form-messages .form-message[data-message='is empty']"),o=this.$el.querySelector(".paymentType .form-messages .form-message[data-message='is empty']");if(t&&t.classList.add("is-hidden"),o&&o.classList.add("is-hidden"),this.showDeliveryAddress){this.$parent.orderParams.order.addresses||(this.$parent.orderParams.order.addresses={}),this.$parent.orderParams.order.addresses.deliveryAddress||(this.$parent.orderParams.order.addresses.deliveryAddress=[]);const m=this.$helpers.propertiesRequiredConfirm(this.deliveryAddress,["nameFirst","nameLast","street","zip","city","country","phone"],[]);m.result?this.$parent.orderParams.order.addresses.deliveryAddress=this.deliveryAddress:(this.$helpers.formUndecorateAndDecorateFields(m.fields,m.errors),s=!0)}else this.$parent.orderParams.order.addresses&&this.$parent.orderParams.order.addresses.deliveryAddress&&(this.$parent.orderParams.order.addresses.deliveryAddress=null);this.$parent.orderParams.order.data||(this.$parent.orderParams.order.data={}),this.deliveryData&&typeof this.deliveryData.physical<"u"&&typeof this.deliveryData.digital<"u"&&(this.deliveryData.physical!==null||this.deliveryData.digital!==null)?(this.$parent.orderParams.order.data.deliveryData||(this.$parent.orderParams.order.data.deliveryData={codename:null}),this.$parent.orderParams.order.data.deliveryData.codename=this.deliveryData):(s=!0,t&&t.classList.remove("is-hidden")),this.paymentData&&this.paymentData!==null?(this.$parent.orderParams.order.data.paymentData||(this.$parent.orderParams.order.data.paymentData={codename:null}),this.$parent.orderParams.order.data.paymentData.codename=this.paymentData):(s=!0,o&&o.classList.remove("is-hidden")),s||this.$parent.updateOrder()},deliveryTypeIsChecked(s,t){this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename[s]&&(this.$parent.orderParams.order.data.deliveryData.codename[s].value,t.codename)},checkIfDeliveryAddressExists:()=>{if(!globalThis.$parent.orderParams.order.addresses.deliveryAddress&&globalThis.$parent.orderParams.order.addresses.deliveryAddress.length>0){const s=JSON.stringify(globalThis.deliveryAddress);globalThis.$parent.orderParams.order.addresses.deliveryAddress.forEach(t=>{if(JSON.stringify(t)===s)return!0})}return!1},fillWithSelectedDeliveryAddress(s){s.target.value&&s.target.value!==""&&s.target.value>-1&&(this.deliveryAddress=this.$store.state.user.profile.addressesDelivery[s.target.value])},getPaymentPrice(s){if(s&&s.prices&&this.$store.state&&this.$store.state.cart&&this.$store.state.cart.priceTotal){for(let t=0;t<s.prices.length;t++)if(this.$store.state.cart.priceTotal>=s.prices[t].range.from&&this.$store.state.cart.priceTotal<=s.prices[t].range.to)return s.prices[t].price}return 0},setDelivery(s,t){this.deliveryData[s]=t},checkUsePaymentType(s){return!!(this.$store.state.cart&&this.$store.state.cart.cartItemTypology&&(typeof s.type>"u"||this.$store.state.cart.cartItemTypology.subtypes.length>1&&this.$store.state.cart.cartItemTypology.subtypes.indexOf(s.type)===-1))}}},Rs={id:"orderDeliveryPayment",class:"orderDeliveryPayment"},Ys=e("h2",{class:"title is-2",translate:"yes"},"Delivery Payment",-1),Zs=e("h3",{class:"title is-3 has-text-left",translate:"yes"},"Delivery",-1),Js={key:0,class:"deliveryType optionControlList"},Gs={key:0},Qs={class:"title is-4 has-text-left"},Hs=_("\xA0"),Ks=e("span",{translate:"yes"},"goods",-1),Xs={class:"s-input radio radio-button"},et=["name","onClick","value","checked"],st={class:"control-label"},tt=O('<div class="form-messages"><p class="form-message has-text-danger has-text-left is-hidden" data-message="is empty"><span class="icon has-text-danger is-pulled-left"><i class="fa fa-exclamation-circle"></i></span><span translate="yes">Please select value</span></p></div>',1),rt={key:0,class:"deliveryAddressBlock"},at={class:"columns is-variable is-2"},ot={class:"column is-12"},it={class:"field has-text-centered useDeliveryAddress"},dt={class:"s-input switch is-rounded"},nt=e("span",{class:"check"},null,-1),lt=e("span",{class:"control-label",translate:"yes"},"Use custom delivery address",-1),ct={key:0,class:"deliveryAddressWrapper is-clearfix"},mt={key:0,class:"columns is-variable is-2"},ut={class:"column is-12"},ht={class:"field for-select"},pt=e("label",{class:"label",translate:"yes"},"Previously used addresses:",-1),yt={class:"control has-text-centered"},_t={class:"select is-empty"},vt=e("option",{value:"",translate:"yes"},"Please select",-1),$t=["value"],ft={class:"columns is-variable is-2"},gt={class:"column is-6"},bt={class:"field nameFirst"},Pt=e("label",{class:"label",translate:"yes"},"First Name",-1),It={class:"control"},kt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Dt={class:"column is-6"},Tt={class:"field nameLast"},Ct=e("label",{class:"label",translate:"yes"},"Last Name",-1),wt={class:"control"},At=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),St={class:"columns is-variable is-2"},Ut={class:"column is-12"},Ot={class:"field street"},Vt=e("label",{class:"label",translate:"yes"},"Street",-1),Nt={class:"control"},Lt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Et={class:"columns is-variable is-2"},Ft={class:"column is-12"},Mt={class:"field"},qt=e("label",{class:"label",translate:"yes"},"Street 2",-1),xt={class:"control"},zt={class:"columns is-variable is-2"},jt={class:"column is-4"},Bt={class:"field zip"},Wt=e("label",{class:"label",translate:"yes"},"ZIP",-1),Rt={class:"control"},Yt=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Zt={class:"column is-8"},Jt={class:"field city"},Gt=e("label",{class:"label",translate:"yes"},"City",-1),Qt={class:"control"},Ht=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Kt={class:"columns is-variable is-2"},Xt={class:"column is-6"},er={class:"field"},sr=e("label",{class:"label",translate:"yes"},"State",-1),tr={class:"control"},rr={class:"column is-6"},ar={class:"field country"},or=e("label",{class:"label",translate:"yes"},"Country",-1),ir={class:"control select"},dr=["value"],nr=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),lr={class:"columns is-variable is-1 is-centered"},cr={class:"column is-6"},mr={class:"field phone"},ur=e("label",{class:"label",translate:"yes"},"Phone",-1),hr={class:"control is-clearfix"},pr=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),yr=e("h3",{class:"title is-3 has-text-left",translate:"yes"},"Payment",-1),_r={key:0,class:"paymentType optionControlList"},vr={class:"control"},$r={class:"s-input radio"},fr=["value"],gr={class:"control-label"},br=O('<div class="form-messages"><p class="form-message has-text-danger has-text-left is-hidden" data-message="is empty"><span class="icon has-text-danger is-pulled-left"><i class="fa fa-exclamation-circle"></i></span><span translate="yes">Please select value</span></p></div>',1),Pr={class:"button is-success",type:"submit"},Ir=_(" \xA0 "),kr=e("span",{translate:"yes"},"Set delivery and payment",-1);function Dr(s,t,o,m,a,l){const y=f("font-awesome-icon");return i(),d("div",Rs,[Ys,e("form",{onSubmit:t[12]||(t[12]=S((...n)=>l.updateDeliveryPaymentData&&l.updateDeliveryPaymentData(...n),["prevent"]))},[e("div",null,[Zs,s.$store.state.order.order.settings.deliveryMethodsTypes&&Object.keys(s.$store.state.order.order.settings.deliveryMethodsTypes).length>0?(i(),d("div",Js,[(i(!0),d(g,null,b(Object.keys(s.$store.state.order.order.settings.deliveryMethodsTypes),(n,r)=>(i(),d("div",{class:"control",key:r},[s.$store.state.cart&&s.$store.state.cart.cartItemTypology&&s.$store.state.cart.cartItemTypology.subtypes.indexOf(n)>-1?(i(),d("div",Gs,[e("h4",Qs,[e("span",null,c(n),1),Hs,Ks]),(i(!0),d(g,null,b(s.$store.state.order.order.settings.deliveryMethodsTypes[n],($,P)=>(i(),d("div",{class:"field",key:P},[e("label",Xs,[e("input",{type:"radio",class:"check",name:"type-"+n,onClick:Qo=>l.setDelivery(n,$.codename),value:$.codename,checked:l.deliveryTypeIsChecked(n,$)},null,8,et),e("span",st,c($.name[s.$store.state.language.code])+" ("+c($.prices[0].price)+"\xA0"+c(s.$store.state.currency.symbol)+") ",1)])]))),128))])):h("",!0)]))),128)),tt])):h("",!0)]),s.$store.state.cart&&s.$store.state.cart.cartItemTypology&&s.$store.state.cart.cartItemTypology.subtypes.indexOf("physical")>-1?(i(),d("div",rt,[e("section",null,[e("div",at,[e("div",ot,[e("div",it,[e("label",dt,[u(e("input",{type:"checkbox",class:"checkbox","true-value":"true",value:"false","onUpdate:modelValue":t[0]||(t[0]=n=>a.showDeliveryAddress=n)},null,512),[[N,a.showDeliveryAddress]]),nt,lt])])])])]),e("section",null,[a.showDeliveryAddress?(i(),d("div",ct,[s.$store.state.user.profile.addressesDelivery&&s.$store.state.user.profile.addressesDelivery.length>0?(i(),d("div",mt,[e("div",ut,[e("div",ht,[pt,e("div",yt,[e("span",_t,[e("select",{class:"select",onChange:t[1]||(t[1]=(...n)=>l.fillWithSelectedDeliveryAddress&&l.fillWithSelectedDeliveryAddress(...n))},[vt,(i(!0),d(g,null,b(s.$store.state.user.profile.addressesDelivery,(n,r)=>(i(),d("option",{key:r,value:r},c(n.street)+", "+c(n.zip),9,$t))),128))],32)])])])])])):h("",!0),e("div",ft,[e("div",gt,[e("div",bt,[Pt,e("div",It,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>a.deliveryAddress.nameFirst=n),translate:"yes",placeholder:"First Name"},null,512),[[p,a.deliveryAddress.nameFirst]])]),kt])]),e("div",Dt,[e("div",Tt,[Ct,e("div",wt,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>a.deliveryAddress.nameLast=n),translate:"yes",placeholder:"Last Name"},null,512),[[p,a.deliveryAddress.nameLast]])]),At])])]),e("div",St,[e("div",Ut,[e("div",Ot,[Vt,e("div",Nt,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>a.deliveryAddress.street=n),translate:"yes",placeholder:"Street"},null,512),[[p,a.deliveryAddress.street]])]),Lt])])]),e("div",Et,[e("div",Ft,[e("div",Mt,[qt,e("div",xt,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>a.deliveryAddress.street2=n),translate:"yes",placeholder:"Street 2"},null,512),[[p,a.deliveryAddress.street2]])])])])]),e("div",zt,[e("div",jt,[e("div",Bt,[Wt,e("div",Rt,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[6]||(t[6]=n=>a.deliveryAddress.zip=n),translate:"yes",placeholder:"ZIP"},null,512),[[p,a.deliveryAddress.zip]])]),Yt])]),e("div",Zt,[e("div",Jt,[Gt,e("div",Qt,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[7]||(t[7]=n=>a.deliveryAddress.city=n),translate:"yes",placeholder:"City"},null,512),[[p,a.deliveryAddress.city]])]),Ht])])]),e("div",Kt,[e("div",Xt,[e("div",er,[sr,e("div",tr,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[8]||(t[8]=n=>a.deliveryAddress.state=n),translate:"yes",placeholder:"State"},null,512),[[p,a.deliveryAddress.state]])])])]),e("div",rr,[e("div",ar,[or,e("div",ir,[s.$store.state.coredata&&s.$store.state.coredata.countries?u((i(),d("select",{key:0,"onUpdate:modelValue":t[9]||(t[9]=n=>a.deliveryAddress.country=n)},[(i(!0),d(g,null,b(s.$store.state.coredata.countries,n=>(i(),d("option",{value:n.code,key:n.code},c(n.name),9,dr))),128))],512)),[[U,a.deliveryAddress.country]]):h("",!0)]),nr])])]),e("div",lr,[e("div",cr,[e("div",mr,[ur,e("div",hr,[u(e("input",{class:"input",type:"text","onUpdate:modelValue":t[10]||(t[10]=n=>a.deliveryAddress.phone=n),translate:"yes",placeholder:"Phone"},null,512),[[p,a.deliveryAddress.phone]])]),pr])])])])):h("",!0)])])):h("",!0),e("div",null,[yr,s.$store.state.order.order.settings.paymentMethods&&Object.keys(s.$store.state.order.order.settings.paymentMethods).length>0?(i(),d("div",_r,[(i(!0),d(g,null,b(s.$store.state.order.order.settings.paymentMethods,(n,r)=>(i(),d("div",{class:"field",key:r},[e("div",vr,[l.checkUsePaymentType(n)?(i(),d("div",{key:0,class:I("payment-"+n.codename)},[e("label",$r,[u(e("input",{type:"radio",name:"paymentType",class:"check","onUpdate:modelValue":t[11]||(t[11]=$=>a.paymentData=$),value:n.codename},null,8,fr),[[L,a.paymentData]]),e("span",gr,c(n.name[s.$store.state.language.code])+" ("+c(l.getPaymentPrice(n))+"\xA0"+c(s.$store.state.currency.symbol)+") ",1)])],2)):h("",!0)])]))),128)),br])):h("",!0)]),e("button",Pr,[v(y,{icon:"check"}),Ir,kr])],32)])}const T=k(Ws,[["render",Dr]]);const Tr={name:"OrderSummary",data(){return{userConfirmation:null}},computed:{deliveryData:function(){const s=this,t=[];if(this.$parent.orderParams.order&&this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename){const o=this.$parent.orderParams.order.data.deliveryData.codename,m=this.$parent.orderParams.order.settings.deliveryMethodsTypes;Object.keys(o).forEach(a=>{if(o&&m&&o[a]&&o[a]!==null){const l=o[a];l.type=a,l.name=l.value,m[a]&&m[a].forEach(y=>{y.type&&y.codename&&y.type===a&&y.codename===l.value&&(l.name=y.name[s.$store.getters.getLanguage])}),t.push(l)}})}return t}},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{submitOrder:function(){const s=this.$el.querySelector("#summary .field.confirm .check");s.classList.remove("is-danger"),s&&s.parentElement.querySelector(".control-label").classList.add("has-text-danger"),this.userConfirmation?(this.$parent.orderParams.order.dates.userConfirmation=this.userConfirmation,this.$parent.updateOrder()):(this.$helpers.formUndecorateAndDecorateFields(["confirm"],[{name:"confirm",action:"unconfirmed"}]),s.classList.remove("is-success"),s.classList.remove("is-dang"),s.classList.add("is-danger"),s&&s.parentElement.querySelector(".control-label").classList.add("has-text-danger"))},setConfirmationDate:function(s){if(s.target.checked){const t=new Date;this.userConfirmation=t.getTime()}},checkDeliveryAddress:function(){return!!(this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.addresses&&this.$parent.orderParams.order.addresses.deliveryAddress&&Object.keys(this.$parent.orderParams.order.addresses.deliveryAddress).length>0)},invoiceAddress:function(){if(this.$store.state.coredata)return this.$helpers.addressToString(this.$parent.orderParams.order.addresses.invoiceAddress,this.$store.state.coredata.countries,["type"])},deliveryAddress:function(){return this.$parent.orderParams.order.addresses.deliveryAddress?this.$helpers.addressToString(this.$parent.orderParams.order.addresses.deliveryAddress,this.$store.state.coredata.countries,["type"]):null},checkDeliveryData:function(){return!!(this.$parent.orderParams.order&&this.$parent.orderParams.order.data.deliveryData&&this.$parent.orderParams.order.data.deliveryData.codename)},checkPaymentData:function(){return!!(this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.data.paymentData)},paymentData:function(){const s=this;let t=null;return this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.data.paymentData&&(t={name:typeof this.$parent.orderParams.order.data.paymentData.name[s.$store.getters.getLanguage]<"u"?this.$parent.orderParams.order.data.paymentData.name[s.$store.getters.getLanguage]:this.$parent.orderParams.order.data.paymentData.codename,price:this.$parent.orderParams.order.data.paymentData.price}),t}}},Cr={id:"summary"},wr=e("h2",{class:"title is-2",translate:"yes"},"Order summary",-1),Ar={class:"columns is-variable is-2"},Sr={class:"column is-6"},Ur=e("h3",{class:"title is-5",translate:"yes"},"You are ordering to:",-1),Or={class:"summary-block with-pre-whitespace"},Vr={key:0,class:"column is-6"},Nr=e("h3",{class:"title is-5",translate:"yes"},"With delivery to:",-1),Lr={class:"summary-block with-pre-whitespace"},Er={key:1,class:"column is-6"},Fr=e("h3",{class:"title is-5",translate:"yes"},"With delivery to:",-1),Mr=e("div",{class:"summary-block",translate:"yes"},"same as invoice address",-1),qr=[Fr,Mr],xr={class:"columns is-variable is-2"},zr={class:"column is-6"},jr=e("h3",{class:"title is-5",translate:"yes"},"Your Delivery settings:",-1),Br={key:0,class:"content summary-block"},Wr={class:"capitalize"},Rr=_(" - "),Yr={key:0,class:"column is-6"},Zr=e("h3",{class:"title is-5"},"Your Payment settings:",-1),Jr={key:0,class:"content summary-block"},Gr={class:"columns is-variable is-2"},Qr={class:"column is-12"},Hr={class:"field has-text-centered"},Kr={class:"title is-5"},Xr=e("span",{translate:"yes"},"Total price",-1),ea=_(": "),sa={class:"columns is-variable is-2"},ta={class:"column is-12"},ra={class:"field confirm has-text-centered"},aa={class:"s-input is-success checkbox"},oa=e("span",null,[e("span",{class:"control-label",translate:"yes"},"I agree to the"),_(" \xA0 "),e("a",{href:"#",translate:"yes"},"terms and conditions")],-1),ia=e("div",{class:"form-messages is-hidden"},[e("div",{class:"form-message","data-message":"unconfirmed",translate:"yes"},"Check this to enable sending order")],-1),da={class:"button is-success",type:"submit"},na=_(" \xA0 "),la=e("span",{translate:"yes"},"Submit order",-1);function ca(s,t,o,m,a,l){const y=f("font-awesome-icon");return i(),d("div",Cr,[wr,e("form",{onSubmit:t[1]||(t[1]=S((...n)=>l.submitOrder&&l.submitOrder(...n),["prevent"]))},[e("div",Ar,[e("div",Sr,[Ur,e("div",Or,c(l.invoiceAddress()),1)]),l.checkDeliveryAddress()?(i(),d("div",Vr,[Nr,e("div",Lr,c(l.deliveryAddress()),1)])):(i(),d("div",Er,qr))]),e("div",xr,[e("div",zr,[jr,l.checkDeliveryData()?(i(),d("div",Br,[(i(!0),d(g,null,b(l.deliveryData,(n,r)=>(i(),d("div",{key:r},[e("p",null,[e("span",Wr,c(n.type),1),Rr,e("strong",null,c(n.name),1),_(": "+c(s.$helpers.numeral(n.price).format("0.00"))+" \xA0"+c(s.$store.state.currency.symbol),1)])]))),128))])):h("",!0)]),l.checkPaymentData()?(i(),d("div",Yr,[e("div",null,[Zr,l.paymentData()?(i(),d("div",Jr,[e("p",null,[e("strong",null,c(l.paymentData().name),1),_(": "+c(s.$helpers.numeral(l.paymentData().price).format("0.00"))+"\xA0"+c(s.$store.state.currency.symbol),1)])])):h("",!0)])])):h("",!0)]),e("div",Gr,[e("div",Qr,[e("div",Hr,[e("h3",Kr,[Xr,ea,e("span",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceTotal).format("0.00"))+"\xA0"+c(s.$store.state.currency.symbol),1)])])])]),e("div",sa,[e("div",ta,[e("div",ra,[e("label",aa,[e("input",{type:"checkbox",class:"check",onClick:t[0]||(t[0]=n=>l.setConfirmationDate(n))}),oa]),ia])])]),e("button",da,[v(y,{icon:"check"}),na,la])],32)])}const C=k(Tr,[["render",ca]]),ma={name:"OrderFinished",components:{"payment-stripe":M},data(){return{isLoading:!0,orderId:null}},created(){this.$parent.orderParams&&this.$parent.orderParams.order&&(this.orderId=this.$parent.orderParams.order._id)},mounted(){this.$parent.orderParams&&this.$parent.orderParams.order&&(this.orderId=this.$parent.orderParams.order._id,this.$parent.orderParams.order.data.paymentData.codename.indexOf("online_paypal")>-1&&this.paymentPayPalCall(),this.$parent.orderParams.order.data.paymentData.codename==="cod"&&this.clearFinishedOrder())},computed:{},methods:{isOrderPaymentCodename:function(s){return!!(this.$parent&&this.$parent.orderParams&&this.$parent.orderParams.order&&this.$parent.orderParams.order.data&&this.$parent.orderParams.order.data.paymentData&&this.$parent.orderParams.order.data.paymentData.codename&&this.$parent.orderParams.order.data.paymentData.codename===s)},getOrderId:function(){return this.orderId},paymentPayPalCall:function(){const s=this;s.$httpc.post("/order/payment/paypal/geturl",{orderId:s.$parent.orderParams.order._id,checkoutData:null},{timeout:1e4}).then(t=>{t&&t.data&&t.data.url&&t.data.url.trim()!==""&&(s.clearFinishedOrder(),window.location.href=t.data.url)})},clearFinishedOrder:function(){const s=this;setTimeout(function(){s.$parent.orderParams={},s.$store.dispatch("setOrder",null),s.$store.state.user&&s.$store.state.user.profile===null&&s.$store.state.user.logged===!0&&s.$store.state.user.email.toString().trim()!==""&&(s.$store.state.user.logged=!1,s.$store.state.user.superadmined=!1,s.$store.state.user.profile=null,s.$httpc.defaults.headers.common.Authorization=null,s.$cookies.remove("token"))},2e3)}}},ua={id:"orderFinished"},ha=e("h1",{class:"title is-2",translate:"yes"},"Order Finished",-1),pa={class:"columns is-variable is-2"},ya={class:"column is-12"},_a=e("span",{translate:"yes"},"Thank you for your order. ID of your order is",-1),va=_(" \xA0 "),$a=_(", "),fa=e("span",{translate:"yes"},"we've sent you email about it.",-1),ga={key:0},ba=e("p",{translate:"yes"},"You are being redicted to PayPal, please wait.",-1),Pa={key:1};function Ia(s,t,o,m,a,l){const y=f("router-link"),n=f("o-loading"),r=f("payment-stripe");return i(),d("div",ua,[ha,e("div",pa,[e("div",ya,[e("p",null,[_a,va,v(y,{to:{name:"userOrderDetail",params:{id:l.getOrderId()}}},{default:A(()=>[_(c(l.getOrderId()),1)]),_:1},8,["to"]),$a,fa]),l.isOrderPaymentCodename("online_paypal_paypal")?(i(),d("div",ga,[v(n,{"is-full-page":!1,active:a.isLoading,"onUpdate:active":t[0]||(t[0]=$=>a.isLoading=$),"can-cancel":!1},null,8,["active"]),ba])):l.isOrderPaymentCodename("online_stripe")?(i(),d("div",Pa,[v(r,{order:s.$parent.orderParams.order},null,8,["order"])])):h("",!0)])])])}const w=k(ma,[["render",Ia]]);const ka={name:"OrderCart",components:{OrderUser:D,OrderDeliveryPayment:T,OrderSummary:C,OrderFinished:w},data(){return{itemAmount:{},orderStateNumber:1,orderParams:{},viewComponentId:null}},computed:{},updated:function(){document.querySelector("#header-cart-dropdown")&&(document.querySelector("#header-cart-dropdown").style.display="")},created:function(){(this.orderParams==null||this.orderParams&&(!this.orderParams.order||this.orderParams.order==null)||this.orderParams.order&&(!this.orderParams.order.addresses||!this.orderParams.order.addresses.invoiceAddress))&&this.updateOrder()},methods:{orderStateComponent(){const s=this.$store.getters.getOrder;this.orderParams={...s},s&&s.result&&s.result.id&&(this.orderStateNumber=parseInt(s.result.id.toString()));const t=this.viewComponentId!==null&&this.viewComponentId<=this.orderStateNumber?parseInt(this.viewComponentId):parseInt(this.orderStateNumber);return console.debug("orderStateNumber & componentId",this.orderStateNumber,t),t===2?(console.debug("orderStateNumber & componentId - OrderDeliveryPayment",T),T):t===3?(console.debug("orderStateNumber & componentId - OrderSummary",C),C):t===4?(console.debug("orderStateNumber & componentId - OrderFinished",w),w):(console.debug("orderStateNumber & componentId - OrderUser",D),D)},updateOrder(){const s=this,t={timeout:15e3,needsAuth:!0};this.viewComponentId=null,this.$httpc.post("order/progress",{orderParams:this.orderParams&&typeof this.orderParams.order<"u"?this.orderParams.order:this.orderParams},t).then(function(o){if(o.data&&o.data.order){if(o.data.order.user&&o.data.order.user.id&&o.data.order.user.id!==null&&(s.$store.state.user.logged=!0,s.$store.state.cart.user=o.data.order.user.id,s.orderStateNumber=parseInt(o.data.result.id),s.$forceUpdate()),o.data.order.status==="saved"||o.data.order.status==="sent"){s.$store.dispatch("setCart",null);const m=document.querySelector(".userCartLink .cartItemsCount");m.textContent=0,o.data.result.id=4}s.$store.dispatch("setOrder",o.data),o.data&&o.data.result&&o.data.result.id&&o.data.result.id>1&&(s.orderStateNumber=parseInt(o.data.result.id))}}).then(function(){s.eventBus.emit("translateContent",s.$store.getters.getTranslates)}).catch(function(o){console.error("Cart error:",o),s.$store.dispatch("setCart",null),s.orderStateNumber=0,s.$store.dispatch("setOrder",null)})},updateCartItemAmount(s){const t=this;this.$httpc.post("cart",{itemId:s,amount:parseInt(this.itemAmount[s])}).then(o=>{o.data&&t.$store.dispatch("setCart",o.data)}).catch(function(o){return console.error(o),null}).then(function(){return null})},clearCart(s){const t=this;s=typeof s<"u"?s:null;let o=null;s!==null&&s.toString().trim()!==""?o=this.$httpc.delete("cart?itemId="+s):o=this.$httpc.delete("cart"),o.then(m=>{m.data&&t.$store.dispatch("setCart",m.data)}).catch(function(m){return console.error(m),null}).then(function(){return null})},getClickableStateClasses(s){return s<=this.orderStateNumber?"o-steps__link o-steps__link-label-bottom o-steps__link-clickable":"o-steps__link"},getActiveStateClasses(s){let t="o-steps__nav-item",o="";return s<this.orderStateNumber&&(o=" o-steps__nav-item o-steps__nav-item-previous"),(this.viewComponentId&&s===this.viewComponentId||s===this.orderStateNumber)&&(o=" o-steps__nav-item o-steps__nav-item--success o-steps__nav-item-active"),t+=o,t},getStateClass(s){return s===this.orderStateNumber?"has-text-danger":""},setViewCoponentId:function(s,t){s<=this.orderStateNumber&&(this.$el&&this.$el.querySelectorAll("#orderCart .b-steps .step-item").forEach(m=>{m.classList.remove("is-active")}),t&&t.target&&!t.target.parentElement.parentElement.classList.contains("is-active")&&t.target.parentElement.parentElement.classList.add("is-active"),this.viewComponentId=s,this.$forceUpdate())},getProductImagePath(s){return this.$store.state.coredata&&this.$store.state.coredata.settings&&this.$store.state.coredata.settings.assets&&this.$store.state.coredata.settings.assets.url?this.$helpers.getProductImagePath(this.$store.state.coredata,s):null},countPrices(s){s=typeof s<"u"&&["all","items","totals"].includes(s)?s:"all";const o=this;let m=o.settings.defaultConstants.tax;if((s==="all"||s==="items")&&(this.orderParams.prices.priceItems=0,this.orderParams.prices.priceItemsNoTax=0,this.orderParams.items.forEach(function(a){if(a.taxData)o.orderParams.prices.priceItems+=a.taxData.priceWithTax*a.amount,a.tax&&a.tax!==null&&(m=a.tax),o.orderParams.prices.priceItemsNoTax+=a.taxData.priceWithoutTax*a.amount,o.orderParams.prices.priceTaxTotal+=a.taxData.tax*a.amount;else{o.orderParams.prices.priceItems+=a.price*a.amount,a.tax&&a.tax!==null&&(m=a.tax);const l=a.price/(1+m);o.orderParams.prices.priceItemsNoTax+=l;const y=a.price/(1+m);o.orderParams.prices.priceTaxTotal+=y}}),this.orderParams.prices.priceItems=this.$helpers.formatPrice(this.orderParams.prices.priceItems),this.orderParams.prices.priceItemsNoTax=this.$helpers.formatPrice(this.orderParams.prices.priceItemsNoTax),this.orderParams.prices.priceTaxTotal=this.$helpers.formatPrice(this.orderParams.prices.priceTaxTotal)),s==="all"||s==="totals"){this.orderParams.prices.priceTotal=this.orderParams.prices.priceItems+this.orderParams.prices.priceDelivery+this.orderParams.prices.pricePayment,this.orderParams.prices.priceTotal=this.formatPrice.formatPrice(this.orderParams.prices.priceTotal);const a=this.orderParams.prices.priceDelivery/(1+m),l=this.orderParams.prices.pricePayment/(1+m);this.orderParams.prices.priceTotalNoTax=this.orderParams.prices.priceItemsNoTax+a+l,this.orderParams.prices.priceTotalNoTax=this.formatPrice.formatPrice(this.orderParams.prices.priceTotalNoTax)}}}},Da={id:"orderCart",class:"order-step-1 cart-detail"},Ta={class:"container"},Ca={key:0,class:"columns"},wa=e("div",{class:"column"},[e("h1",{class:"title is-1",translate:"yes"},"Cart")],-1),Aa=[wa],Sa={class:"container"},Ua={key:0,class:"columns is-variable is-centered orderProgressVisual"},Oa={class:"column is-8"},Va={class:"o-steps__wrapper"},Na={class:"o-steps o-steps--animated"},La={class:"o-steps__marker o-steps__marker--rounded"},Ea=e("div",{class:"step-details"},[e("span",{class:"o-steps__title",translate:"yes"},"User")],-1),Fa=e("span",{class:"o-steps__divider"},null,-1),Ma={class:"o-steps__marker o-steps__marker--rounded"},qa=e("div",{class:"step-details"},[e("span",{class:"step-title",translate:"yes"},"Delivery & Payment")],-1),xa=e("span",{class:"o-steps__divider"},null,-1),za={class:"o-steps__marker o-steps__marker--rounded"},ja=e("div",{class:"step-details"},[e("span",{class:"step-title",translate:"yes"},"Summary")],-1),Ba={class:"container"},Wa={class:"columns is-variable"},Ra={key:0,class:"column is-6 pr-6"},Ya={key:0,class:"cart-list"},Za={class:"columns is-variable"},Ja={class:"column is-12"},Ga={class:"b-table"},Qa={class:"table-wrapper"},Ha={class:"table is-hoverable is-striped is-fullwidth"},Ka=e("thead",null,[e("tr",null,[e("th",{class:""},[e("div",{class:"th-wrap",translate:"yes"},"Name")]),e("th",{class:""},[e("div",{class:"th-wrap is-pulled-right",translate:"yes"},"Qty")]),e("th",{class:""},[e("div",{class:"th-wrap is-pulled-right",translate:"yes"},"Price/pcs")]),e("th",{class:""})])],-1),Xa=["src","alt"],eo={key:0,class:"tag is-danger"},so={key:1},to={class:"is-block"},ro={class:"cartItemAmount has-text-right"},ao=["onUpdate:modelValue","onChange","run"],oo=["onUpdate:modelValue","run"],io={class:"has-text-right"},no={class:"has-text-right"},lo=["onClick"],co={key:0,id:"cart__products-total"},mo=e("td",null,null,-1),uo=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Products Total")],-1),ho={class:"has-text-right"},po=e("td",null,null,-1),yo={key:1,id:"cart__products-notax"},_o=e("td",null,null,-1),vo=e("td",{class:"has-text-right"},[e("span",{translate:"yes"},"Products Without Tax")],-1),$o={class:"has-text-right"},fo=e("td",null,null,-1),go={key:2,id:"order__delivery"},bo=e("td",null,null,-1),Po=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Price delivery")],-1),Io={class:"has-text-right"},ko=e("td",null,null,-1),Do={key:3,id:"order__payment"},To=e("td",null,null,-1),Co=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Price payment")],-1),wo={class:"has-text-right"},Ao=e("td",null,null,-1),So={key:4,id:"cart__tax"},Uo=e("td",null,null,-1),Oo=e("td",{class:"has-text-right"},[e("span",{translate:"yes"},"Tax total")],-1),Vo={class:"has-text-right"},No=e("td",null,null,-1),Lo={key:5},Eo=e("td",null,null,-1),Fo=e("td",{class:"has-text-right"},[e("strong",{translate:"yes"},"Total price")],-1),Mo={key:0,class:"has-text-right"},qo={key:1,class:"has-text-right"},xo=e("td",null,null,-1),zo={class:"columns is-variable"},jo={class:"column is-12"},Bo=_(" \xA0 "),Wo=e("span",{translate:"yes"},"Clear Cart",-1),Ro={key:1},Yo=e("h3",{class:"title is-3"},[e("span",{translate:"yes"},"Your cart is empty")],-1),Zo=[Yo],Jo={class:"column is-6 pl-6"};function Go(s,t,o,m,a,l){const y=f("font-awesome-icon"),n=f("router-link");return i(),d("div",Da,[e("div",Ta,[a.orderStateNumber<4?(i(),d("div",Ca,Aa)):h("",!0)]),e("div",Sa,[a.orderStateNumber<4?(i(),d("div",Ua,[e("div",Oa,[e("div",Va,[e("nav",Na,[e("div",{class:I(l.getActiveStateClasses(1))},[e("a",{class:I(l.getClickableStateClasses(1)),onClick:t[0]||(t[0]=r=>l.setViewCoponentId(1,r))},[e("div",La,[v(y,{icon:"address-card"})]),Ea],2)],2),e("div",{class:I(l.getActiveStateClasses(2))},[Fa,e("a",{class:I(l.getClickableStateClasses(2)),onClick:t[1]||(t[1]=r=>l.setViewCoponentId(2,r))},[e("div",Ma,[v(y,{icon:"truck"})]),qa],2)],2),e("div",{class:I(l.getActiveStateClasses(3))},[xa,e("a",{class:I(l.getClickableStateClasses(3)),onClick:t[2]||(t[2]=r=>l.setViewCoponentId(3,r))},[e("div",za,[v(y,{icon:"check-double"})]),ja],2)],2)])])])])):h("",!0)]),e("div",Ba,[e("div",Wa,[a.orderStateNumber<4?(i(),d("div",Ra,[s.$store.state.cart!=null&&s.$store.state.cart.items&&s.$store.state.cart.items.length>0?(i(),d("div",Ya,[e("div",Za,[e("div",Ja,[e("div",Ga,[e("div",Qa,[e("table",Ha,[Ka,e("tbody",null,[(i(!0),d(g,null,b(s.$store.state.cart.items,(r,$)=>(i(),d("tr",{key:$},[e("th",null,[v(n,{to:{name:"productDetail",params:{category:r.categories[0],product:r._id,slug:r.slug}}},{default:A(()=>[e("img",{src:l.getProductImagePath(r.orderCode),alt:r.name[s.$store.state.language.code],onerror:"this.src='/assets/_site/logo-product.svg'"},null,8,Xa),r.type!=="product"?(i(),d("span",eo,c(r.type),1)):h("",!0),r.type!=="product"?(i(),d("br",so)):h("",!0),e("span",to,c(r.name[s.$store.state.language.code]),1)]),_:2},1032,["to"])]),e("td",ro,[r.type!="product"||r.subtype!="digital"?u((i(),d("input",{key:0,class:"input",type:"number","onUpdate:modelValue":P=>a.itemAmount[r._id]=P,onChange:P=>l.updateCartItemAmount(r._id),run:a.itemAmount[r._id]?!0:a.itemAmount[r._id]=r.amount},null,40,ao)),[[p,a.itemAmount[r._id]]]):h("",!0),r.type=="product"&&r.subtype=="digital"?u((i(),d("input",{key:1,class:"input",type:"number",disabled:"disabled","onUpdate:modelValue":P=>a.itemAmount[r._id]=P,run:a.itemAmount[r._id]?!0:a.itemAmount[r._id]=r.amount},null,8,oo)),[[p,a.itemAmount[r._id]]]):h("",!0)]),e("td",io,[e("span",null,c(s.$helpers.numeral(r.price).format("0.00")),1),e("span",null,c(s.$store.state.currency.symbol),1)]),e("td",no,[e("a",{onClick:P=>l.clearCart(r._id)},[v(y,{icon:"trash"})],8,lo)])]))),128))]),e("tfoot",null,[s.$store.state.cart&&s.$store.state.cart.priceTotal?(i(),d("tr",co,[mo,uo,e("td",ho,[e("strong",null,c(s.$helpers.numeral(s.$store.state.cart.priceTotal).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)]),po])):h("",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceItemsNoTax?(i(),d("tr",yo,[_o,vo,e("td",$o,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceItemsNoTax).format("0.00"))+" "+c(s.$store.state.currency.symbol),1),fo])):h("",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceDelivery?(i(),d("tr",go,[bo,Po,e("td",Io,[e("strong",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceDelivery).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)]),ko])):h("",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.pricePayment?(i(),d("tr",Do,[To,Co,e("td",wo,[e("strong",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.pricePayment).format("0.00"))+" "+c(s.$store.state.currency.symbol),1)]),Ao])):h("",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceTaxTotal?(i(),d("tr",So,[Uo,Oo,e("td",Vo,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceTaxTotal).format("0.00"))+" "+c(s.$store.state.currency.symbol),1),No])):h("",!0),s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceTotal?(i(),d("tr",Lo,[Eo,Fo,s.$store.state.order&&s.$store.state.order.order&&s.$store.state.order.order.prices&&s.$store.state.order.order.prices.priceTotal?(i(),d("td",Mo,[e("strong",null,c(s.$helpers.numeral(s.$store.state.order.order.prices.priceTotal).format("0.00")),1),_(" "+c(s.$store.state.currency.symbol),1)])):s.$store.state.cart&&s.$store.state.cart.priceTotal!=null?(i(),d("td",qo,[e("strong",null,c(s.$helpers.numeral(s.$store.state.cart.priceTotal).format("0.00")),1),_(" "+c(s.$store.state.currency.symbol),1)])):h("",!0),xo])):h("",!0)])])])])])]),e("div",zo,[e("div",jo,[e("button",{class:"button is-danger",onClick:t[3]||(t[3]=r=>l.clearCart())},[v(y,{icon:"trash"}),Bo,Wo])])])])):(i(),d("div",Ro,Zo))])):h("",!0),e("div",Jo,[(i(),E(F(l.orderStateComponent())))])])])])}const Xo=k(ka,[["render",Go]]);export{Xo as default};
