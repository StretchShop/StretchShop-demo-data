import{G as V}from"./GoogleRecaptcha-52ad0668.js";import{r as D,o as u,c as m,a as s,t as b,h as v,j as S,i as f,G as r,L as d,e as U,f as h,I as T,b as _,S as F,F as I,d as C,Y as M,Z as E,w as y,g as L}from"./sett-4d48a041.js";import{_ as g}from"./index-278cccc9.js";import"./edit-e2caae93.js";const N={name:"UserMeInfo",components:{"google-recaptcha":V},data(){return{userProfileImageFile:[]}},computed:{useRecaptcha:function(){var t,e,o;return((o=(e=(t=this.$store.state)==null?void 0:t.coredata)==null?void 0:e.settings)==null?void 0:o.formVerif)==="recaptcha"},userBasicData:function(){const t=this.$store.getters.getUserProfile,e={username:"",email:"",email2:"",password:"",password2:""};return t&&t.username&&(e.username=t.username,e.email=t.email,t.dates&&(e.dates=t.dates)),e},userProfileImage:function(){return this.$store.getters.getProfileImage()}},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{deleteDropFile(t){this.userProfileImageFile.splice(t,1)},uploadUserProfileImage:function(t){const e=this;this.userProfileImageFile=t.target.files;const o=new FormData;if(this.userProfileImageFile.length&&this.userProfileImageFile.length>0)for(var l=0;l<this.userProfileImageFile.length;l++){const i=this.userProfileImageFile[l];o.append("files["+l+"]",i)}else o.append("files[0]",this.userProfileImageFile);this.$httpc.post("user/image",o,{needsAuth:!0}).then(function(i){if(i&&i.data){if(i.data.substr(0,1)==="'"&&i.data[i.data.length-1]==="'"){const n=i.data.length-2;i.data=i.data.substr(1,n),i.data=JSON.parse(i.data)}i.data.files&&i.data.files.length>0&&i.data.files[0].path&&(e.$store.dispatch("setUserProfileImage",i.data.files[0].path),e.$forceUpdate())}}).catch(function(i){console.error(i)}).then(function(){})},changeUsername:function(){const t=[];let e=!0;const o=this;this.$httpc.post("users/checkusername",{username:this.userBasicData.username}).then(function(l){var i,n,c,a;((n=(i=l==null?void 0:l.data)==null?void 0:i.result)==null?void 0:n.userExists)===!0?(e=!1,t.push({target:"username",action:"already exists"})):((a=(c=l==null?void 0:l.data)==null?void 0:c.result)==null?void 0:a.userExists)===!1&&(e=!0,e&&o.$httpc.put("user",{user:{username:o.userBasicData.username}}).then(p=>{var $;($=p==null?void 0:p.data)!=null&&$.user&&o.$store.dispatch("updateUser",p.data.user)})),t.length&&console.error(t)}).catch(function(l){var i,n;o.sendChangeRequest=!1,o.status="error",console.error("changeUsername: ",l),(n=(i=l.response)==null?void 0:i.data)!=null&&n.errors&&o.$helpers.showFormFieldErrorsFromErrorResponse(l.response.data.errors)}).then(function(){})},changeEmail:function(){let t=!0;const e=this;(!this.userBasicData.email||!this.userBasicData.email2||this.userBasicData.email!==this.userBasicData.email2)&&(e.$helpers.formUndecorateAndDecorateFields(["email2"],[{name:"email2",action:"not confirmed"}]),t=!1),t&&this.$httpc.post("users/checkemail",{email:this.userBasicData.email}).then(function(o){t=!0,t&&e.$store.dispatch("updateUser",{email:e.userBasicData.email})}).catch(function(o){e.sendChangeRequest=!1,e.status="error",o.response.data&&o.response.data.errors&&e.$helpers.showFormFieldErrorsFromErrorResponse(o.response.data.errors)}).then(function(){})},changePassword:function(){let t=!0;const e=this;(!this.userBasicData.password||!this.userBasicData.password2||this.userBasicData.password!==this.userBasicData.password2)&&(e.$helpers.formUndecorateAndDecorateFields(["password2"],[{name:"password2",action:"not confirmed"}]),t=!1),t&&this.$httpc.put("user",{user:{password:this.userBasicData.password}},{needsAuth:!0}).then(function(o){t=!0,t&&e.$store.dispatch("updateUser",{email:e.userBasicData.email})}).catch(function(o){e.sendChangeRequest=!1,e.status="error",console.error(o),o.response.data&&o.response.data.errors&&e.$helpers.formUndecorateAndDecorateFields(["password2"],[{name:"password2",action:"unknown error"}])}).then(function(){})},deleteUser:function(){const t=this;confirm(this.$refs.deleteUserWarning.innerText)&&this.$helpers.secureForm("deleteProfile",this.$refs.recaptcha).then(e=>{e&&this.$httpc.delete("user/profile",{tokenize:!0}).then(o=>{o.data&&t.$store.dispatch("setUser",o.data)}).catch(function(o){return console.error(o),null}).then(function(){return null})})},cancelUserDelete:function(){const t=this;this.$httpc.post("user/cancelDelete",null,{needsAuth:!0}).then(e=>{e.data&&t.$store.dispatch("setUser",e.data)}).catch(function(e){return console.error(e),null}).then(function(){return null})}}},z={key:0,id:"meInfo",class:""},O={class:"columns is-variable is-2"},R={class:"column is-8 has-text-centered"},G={class:"title is-2 has-text-centered"},q={class:"columns is-variable is-2"},H={class:"column is-4 has-text-centered",id:"profile-profile-image"},W={class:"user--avatar-wrapper is-centered"},Y={class:"column is-4 has-text-centered image-button-padding"},Z={class:"file is-primary action edit"},j={class:"file-label"},K=s("span",{class:"file-cta"},[s("span",{class:"file-icon"},[s("i",{class:"fa fa-plus"})]),s("span",{class:"file-label",id:"profile-profile-image-upload",translate:"yes"}," Click to upload Profile Image ")],-1),J={class:"user-info-edit-form-wrapper"},Q={class:"columns"},X={class:"column is-8 is-centered"},ss={class:"columns is-variable is-2 is-centered"},es={class:"column is-12 has-text-centered",id:"profile-profile-username"},ts={class:"field username"},as=s("label",{class:"label",translate:"yes"},"Username",-1),is={class:"control"},os=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"exists",translate:"yes"},"Username already exists")],-1),ns=s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Change Username")],-1),ls=s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1),rs={class:"columns is-variable is-2 is-centered"},ds={class:"column is-6",id:"profile-profile-email"},cs={class:"field email"},us=s("label",{class:"label"},"Email",-1),ms={class:"control"},hs=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"exists",translate:"yes"},"Email already exists")],-1),vs={class:"column is-6",id:"profile-profile-email2"},_s={class:"field email2"},ps=s("label",{class:"label",translate:"yes"},"Email Confirm",-1),fs={class:"control"},ys=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match")],-1),gs=s("div",{class:"columns is-variable is-2 is-centered"},[s("div",{class:"column is-12 has-text-centered"},[s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Change your Email")])])],-1),$s=s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1),bs={class:"columns is-variable is-2 is-centered"},Ds={class:"column is-6"},As={class:"field password"},Us=s("label",{class:"label",translate:"yes"},"Password",-1),Is={class:"control"},Cs={class:"column is-6"},xs={class:"field password2"},ws=s("label",{class:"label",translate:"yes"},"Password Confirm",-1),Ps={class:"control"},ks=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"not confirmed",translate:"yes"},"Values do not match"),s("div",{class:"form-message","data-message":"unknown error",translate:"yes"},"An error occured when changing password")],-1),Bs=s("div",{class:"columns is-variable is-2 is-centered"},[s("div",{class:"column is-12 has-text-centered"},[s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Change your Password")])])],-1),Fs=s("div",{class:"columns"},[s("div",{class:"column is-12"},[s("hr")])],-1),Vs={class:"columns product-delete"},Ss={class:"column is-12 has-text-centered"},Ts={key:0},Ms={ref:"deleteUserWarning",translate:"true"},Es=s("p",null,[s("strong",{translate:"yes"},"Notice:"),h(),s("span",{translate:"yes"},[h("Your profile will be removed in 14 days after clicking this button! "),s("br"),h(" If you don't cancel this action in those 14 days, your account will be removed.")])],-1),Ls=s("p",null,[s("strong",{translate:"yes"},"Notice:"),h(),s("span",{translate:"yes"},"Information about your orders will remain for tax purposes!")],-1),Ns={key:1},zs=s("p",null,[s("strong",{translate:"yes"},"Notice:"),h(),s("span",{translate:"yes"},"Your profile will NOT be removed after clicking this button.")],-1);function Os(t,e,o,l,i,n){const c=D("google-recaptcha");return t.$store.state.user.profile?(u(),m("div",z,[s("div",O,[s("div",R,[s("h2",G,b(t.$store.state.user.profile.username),1),v(` <p class="has-text-centered" v-if="$store.state.user.profile.addressInvoice">
          AKA 
          {{ $store.state.user.profile.addressInvoice.nameFirst }} 
          {{ $store.state.user.profile.addressInvoice.nameLast }}
        </p> `)])]),s("div",q,[s("div",H,[s("div",W,[s("div",{class:"user--avatar-image",style:S({"background-image":"url('"+n.userProfileImage+"')"})},null,4)])]),s("div",Y,[s("div",Z,[s("label",j,[s("input",{class:"file-input",type:"file",name:"resume",onInput:e[0]||(e[0]=a=>n.uploadUserProfileImage(a))},null,32),K])])])]),s("div",J,[s("div",Q,[s("div",X,[s("div",ss,[s("div",es,[s("form",{onSubmit:e[2]||(e[2]=f((...a)=>n.changeUsername&&n.changeUsername(...a),["prevent"]))},[s("div",ts,[as,s("div",is,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n.userBasicData.username=a),placeholder:"Username"},null,512),[[d,n.userBasicData.username]])]),os]),ns],32)])]),ls,s("form",{onSubmit:e[5]||(e[5]=f((...a)=>n.changeEmail&&n.changeEmail(...a),["prevent"]))},[s("div",rs,[s("div",ds,[s("div",cs,[us,s("div",ms,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>n.userBasicData.email=a),placeholder:"Email"},null,512),[[d,n.userBasicData.email]])]),hs])]),s("div",vs,[s("div",_s,[ps,s("div",fs,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>n.userBasicData.email2=a),placeholder:"Email Confirm"},null,512),[[d,n.userBasicData.email2]])]),ys])])]),gs],32),$s,s("form",{onSubmit:e[8]||(e[8]=f((...a)=>n.changePassword&&n.changePassword(...a),["prevent"]))},[s("div",bs,[s("div",Ds,[s("div",As,[Us,s("div",Is,[r(s("input",{class:"input",type:"password","onUpdate:modelValue":e[6]||(e[6]=a=>n.userBasicData.password=a),placeholder:"Password"},null,512),[[d,n.userBasicData.password]])])])]),s("div",Cs,[s("div",xs,[ws,s("div",Ps,[r(s("input",{class:"input",type:"password","onUpdate:modelValue":e[7]||(e[7]=a=>n.userBasicData.password2=a),placeholder:"Password Confirm"},null,512),[[d,n.userBasicData.password2]])]),ks])])]),Bs],32),Fs,s("div",Vs,[s("div",Ss,[s("section",null,[!n.userBasicData.dates||!n.userBasicData.dates.dateToBeErased||n.userBasicData.dates.dateToBeErased==null?(u(),m("div",Ts,[r(s("div",Ms,"Are you sure you want to DELETE Your Profile?",512),[[T,!1]]),s("button",{class:"button is-danger",onClick:e[9]||(e[9]=a=>n.deleteUser()),translate:"yes"},"DELETE My Profile !"),Es,Ls])):v("v-if",!0),n.userBasicData.dates&&n.userBasicData.dates.dateToBeErased&&n.userBasicData.dates.dateToBeErased!=null?(u(),m("div",Ns,[s("button",{class:"button is-danger",onClick:e[10]||(e[10]=a=>n.cancelUserDelete()),translate:"yes"},"Cancel Deleting my Profile"),zs])):v("v-if",!0)]),n.useRecaptcha?(u(),U(c,{key:0,ref:"recaptcha"},null,512)):v("v-if",!0)])])])])]),v(" user-info-edit-form-wrapper ")])):v("v-if",!0)}const x=g(N,[["render",Os],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/MeInfo.vue"]]),Rs={name:"UserMeCompany",data(){return{activeCompanyData:{name:"",orgId:"",taxId:"",taxVatId:""}}},mounted:function(){const t=this.$store.getters.getUserProfile;let e;t.company&&(e=t.company);let o={name:"",orgId:"",taxId:"",taxVatId:""};if(e&&e.name&&(o=e),this.activeCompanyData)for(var l in this.activeCompanyData)Object.prototype.hasOwnProperty.call(this.activeCompanyData,l)&&l.trim()!==""&&(this.activeCompanyData[l]=o[l]);return this.$forceUpdate(),this.eventBus.emit("translateContent",this.$store.getters.getTranslates),o},methods:{saveUserCompany:function(){const t=this;this.$helpers.verifyAddress(this.activeCompanyData)&&t.$httpc.put("user",{user:{company:this.activeCompanyData}}).then(e=>{var o;(o=e==null?void 0:e.data)!=null&&o.user&&t.$store.dispatch("updateUser",e.data.user)})}}},Gs={key:0,id:"meCompany",class:""},qs={class:"columns"},Hs={class:"column is-8 is-centered"},Ws=s("h2",{class:"title is-2 has-text-centered",translate:"yes"},"Company",-1),Ys={class:"companyDataWrapper"},Zs={class:"columns is-variable is-2 is-centered"},js={class:"column is-12"},Ks={class:"field companyName"},Js=s("label",{class:"label",translate:"yes"},"Company Name",-1),Qs={class:"control"},Xs={class:"columns is-variable is-2 is-centered"},se={class:"column is-6"},ee={class:"field companyOrgId"},te=s("label",{class:"label",translate:"yes"},"Organisation ID",-1),ae={class:"control"},ie={class:"columns is-variable is-2 is-centered"},oe={class:"column is-6"},ne={class:"field companyTaxId"},le=s("label",{class:"label"},"Company Tax ID",-1),re={class:"control"},de={class:"column is-6"},ce={class:"field companyTaxVatId"},ue=s("label",{class:"label"},"Company VAT ID",-1),me={class:"control"},he={class:"columns is-variable is-2 is-centered"},ve={class:"column has-text-centered"},_e={class:"button is-success"},pe=s("span",{translate:"yes"},"Set Company Data",-1);function fe(t,e,o,l,i,n){const c=D("font-awesome-icon");return t.$store.state.user.profile?(u(),m("div",Gs,[s("div",qs,[s("div",Hs,[Ws,s("form",{onSubmit:e[4]||(e[4]=f((...a)=>n.saveUserCompany&&n.saveUserCompany(...a),["prevent"]))},[s("div",Ys,[s("div",Zs,[s("div",js,[s("div",Ks,[Js,s("div",Qs,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.activeCompanyData.name=a),placeholder:"Company Name"},null,512),[[d,i.activeCompanyData.name]])])])])]),s("div",Xs,[s("div",se,[s("div",ee,[te,s("div",ae,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>i.activeCompanyData.orgId=a),placeholder:"Organisation ID"},null,512),[[d,i.activeCompanyData.orgId]])])])])]),s("div",ie,[s("div",oe,[s("div",ne,[le,s("div",re,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>i.activeCompanyData.taxId=a),placeholder:"Company Tax ID"},null,512),[[d,i.activeCompanyData.taxId]])])])]),s("div",de,[s("div",ce,[ue,s("div",me,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.activeCompanyData.taxVatId=a),placeholder:"Company VAT ID"},null,512),[[d,i.activeCompanyData.taxVatId]])])])])]),s("div",he,[s("div",ve,[s("button",_e,[_(c,{icon:"check"}),h("   "),pe])])])])],32)])])])):v("v-if",!0)}const w=g(Rs,[["render",fe],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/MeCompany.vue"]]),ye={name:"UserMeInvoice",data(){return{activeInvoiceAddress:{type:"invoice",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""}}},mounted:function(){const t=this.$store.getters.getUserProfile;let e;t.addressInvoice&&(e=t.addressInvoice);let o={type:"invoice",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""};if(e&&e.nameFirst&&(o=e),this.activeInvoiceAddress)for(var l in this.activeInvoiceAddress)Object.prototype.hasOwnProperty.call(this.activeInvoiceAddress,l)&&l.trim()!==""&&(this.activeInvoiceAddress[l]=o[l]);return this.$forceUpdate(),this.eventBus.emit("translateContent",this.$store.getters.getTranslates),o},methods:{saveUserAddresses:function(){const t=this,e=[];this.$helpers.verifyAddress(this.activeInvoiceAddress)&&(e.push(this.activeInvoiceAddress),e.concat(this.$store.state.user.profile.addressesDelivery),this.$httpc.put("user",{user:{addresses:e}}).then(o=>{var l;(l=o==null?void 0:o.data)!=null&&l.user&&t.$store.dispatch("updateUser",o.data.user)}))}}},ge={key:0,id:"meInvoice",class:""},$e={class:"columns"},be={class:"column is-8 is-centered"},De=s("h2",{class:"title is-2 has-text-centered",translate:"yes"},"Invoice Address",-1),Ae={class:"deliveryAddressWrapper"},Ue={class:"columns is-variable is-2"},Ie={class:"column is-6"},Ce={class:"field nameFirst"},xe=s("label",{class:"label",translate:"yes"},"First Name",-1),we={class:"control"},Pe=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ke={class:"column is-6"},Be={class:"field nameLast"},Fe=s("label",{class:"label",translate:"yes"},"Last Name",-1),Ve={class:"control"},Se=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Te={class:"columns is-variable is-2"},Me={class:"column is-12"},Ee={class:"field street"},Le=s("label",{class:"label",translate:"yes"},"Street",-1),Ne={class:"control"},ze=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Oe={class:"columns is-variable is-2"},Re={class:"column is-12"},Ge={class:"field street2"},qe=s("label",{class:"label",translate:"yes"},"Street 2",-1),He={class:"control"},We=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ye={class:"columns is-variable is-2"},Ze={class:"column is-4"},je={class:"field zip"},Ke=s("label",{class:"label",translate:"yes"},"ZIP",-1),Je={class:"control"},Qe=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Xe={class:"column is-8"},st={class:"field city"},et=s("label",{class:"label",translate:"yes"},"City",-1),tt={class:"control"},at=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),it={class:"columns is-variable is-2"},ot={class:"column is-6"},nt={class:"field state"},lt=s("label",{class:"label",translate:"yes"},"State",-1),rt={class:"control"},dt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ct={class:"column is-6"},ut={class:"field country"},mt=s("label",{class:"label",translate:"yes"},"Country",-1),ht={class:"control select"},vt=["value"],_t=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),pt={class:"columns is-variable is-2 is-centered"},ft={class:"column is-6"},yt={class:"field phone"},gt=s("label",{class:"label",translate:"yes"},"Phone",-1),$t={class:"control"},bt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Dt={class:"columns is-variable is-2 is-centered"},At={class:"column has-text-centered"},Ut={class:"button is-success"},It=s("span",{translate:"yes"},"Set Invoice Address",-1);function Ct(t,e,o,l,i,n){const c=D("font-awesome-icon");return t.$store.state.user.profile?(u(),m("div",ge,[s("div",$e,[s("div",be,[De,s("form",{onSubmit:e[9]||(e[9]=f((...a)=>n.saveUserAddresses&&n.saveUserAddresses(...a),["prevent"]))},[s("div",Ae,[s("div",Ue,[s("div",Ie,[s("div",Ce,[xe,s("div",we,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.activeInvoiceAddress.nameFirst=a),translate:"yes",placeholder:"First Name"},null,512),[[d,i.activeInvoiceAddress.nameFirst]])]),Pe])]),s("div",ke,[s("div",Be,[Fe,s("div",Ve,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>i.activeInvoiceAddress.nameLast=a),translate:"yes",placeholder:"Last Name"},null,512),[[d,i.activeInvoiceAddress.nameLast]])]),Se])])]),s("div",Te,[s("div",Me,[s("div",Ee,[Le,s("div",Ne,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>i.activeInvoiceAddress.street=a),translate:"yes",placeholder:"Street"},null,512),[[d,i.activeInvoiceAddress.street]])]),ze])])]),s("div",Oe,[s("div",Re,[s("div",Ge,[qe,s("div",He,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.activeInvoiceAddress.street2=a),translate:"yes",placeholder:"Street 2"},null,512),[[d,i.activeInvoiceAddress.street2]])]),We])])]),s("div",Ye,[s("div",Ze,[s("div",je,[Ke,s("div",Je,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>i.activeInvoiceAddress.zip=a),translate:"yes",placeholder:"ZIP"},null,512),[[d,i.activeInvoiceAddress.zip]])]),Qe])]),s("div",Xe,[s("div",st,[et,s("div",tt,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>i.activeInvoiceAddress.city=a),translate:"yes",placeholder:"City"},null,512),[[d,i.activeInvoiceAddress.city]])]),at])])]),s("div",it,[s("div",ot,[s("div",nt,[lt,s("div",rt,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>i.activeInvoiceAddress.state=a),translate:"yes",placeholder:"State"},null,512),[[d,i.activeInvoiceAddress.state]])]),dt])]),s("div",ct,[s("div",ut,[mt,s("div",ht,[t.$store.state.coredata&&t.$store.state.coredata.countries?r((u(),m("select",{key:0,"onUpdate:modelValue":e[7]||(e[7]=a=>i.activeInvoiceAddress.country=a)},[(u(!0),m(I,null,C(t.$store.state.coredata.countries,a=>(u(),m("option",{value:a.code,key:a.code},b(a.name),9,vt))),128))],512)),[[F,i.activeInvoiceAddress.country]]):v("v-if",!0)]),_t])])]),s("div",pt,[s("div",ft,[s("div",yt,[gt,s("div",$t,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[8]||(e[8]=a=>i.activeInvoiceAddress.phone=a),translate:"yes",placeholder:"Phone"},null,512),[[d,i.activeInvoiceAddress.phone]])]),bt])])]),s("div",Dt,[s("div",At,[s("button",Ut,[_(c,{icon:"check"}),h("   "),It])])])])],32)])])])):v("v-if",!0)}const P=g(ye,[["render",Ct],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/MeInvoice.vue"]]);const xt={name:"UserMeDelivery",data(){return{activeDeliveryAddressIndex:0,activeDeliveryAddress:{type:"delivery",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""},deliveryFilter:""}},computed:{userDeliveryAddress:function(){const t=this.$store.getters.getUserProfile.addressesDelivery;let e=[];if(t&&t.length>0&&(e=t,this.deliveryFilter.toString().trim()!=="")){const o=this.deliveryFilter.toString().trim().toLowerCase(),l=[];t.forEach((i,n)=>{let c=!1;for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&i[a].toString().trim().toLowerCase().indexOf(o)>-1&&(c=!0);c&&l.push(i)}),l.length>0&&(e=l)}return e}},mounted:function(){this.getDeliveryAddress(0),this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{getDeliveryAddress:function(t,e){let o=typeof t<"u"&&t>-1?t:null;if(o===null&&(o=0),this.activeDeliveryAddressIndex=o,this.activeDeliveryAddress=this.userDeliveryAddress[o],typeof this.activeDeliveryAddress>"u"||!this.activeDeliveryAddress){const l=this.$store.state.user.profile.addressesDelivery[o];typeof l<"u"&&(this.activeDeliveryAddress=l)}e?this.markActiveDeliveryAddress(e.target.parentNode):this.markActiveDeliveryAddress()},addNewDeliveryAddress:function(){const t=this;this.$store.dispatch("addNewDeliveryAddress",{type:"delivery",nameFirst:"",nameLast:"",street:"",street2:"",zip:"",city:"",country:"",phone:""}).then(()=>{t.getDeliveryAddress(),t.$forceUpdate()}),this.$forceUpdate()},removeDeliveryAddress:function(t){const e=this;this.$store.dispatch("removeDeliveryAddress",t).then(()=>{e.activeDeliveryAddressIndex=0,e.$forceUpdate(),e.saveUserAddresses()})},saveUserAddresses:function(){const t=this;if(this.$helpers.verifyAddress(this.activeDeliveryAddress)){const e=[],o=this.$store.getters.getUserProfile;if(e.push(o.addressInvoice),o.addressesDelivery.length>0)for(let l=0;l<o.addressesDelivery.length;l++)e.push(o.addressesDelivery[l]);this.$httpc.put("user",{user:{addresses:e}}).then(l=>{var i;(i=l==null?void 0:l.data)!=null&&i.user&&t.$store.dispatch("updateUser",l.data.user)})}},markActiveDeliveryAddress:function(t){const e=typeof t<"u"&&t?t:null;this.activeDeliveryAddressIndex=0,this.$store.state.user.profile&&this.$store.state.user.profile.addressesDelivery.length>1&&(this.activeDeliveryAddressIndex=this.$store.state.user.profile.addressesDelivery.length-1);const o=this.$el.querySelectorAll(".users-me #meDelivery nav.user-settings-delivery-nav .panel-block.special--right-action");o&&o.length&&o.forEach(l=>{l.classList.remove("is-active")}),e?e.classList.add("is-active"):o&&o.length>0&&o[0].classList.add("is-active")}}},wt={key:0,id:"meDelivery",class:""},Pt=s("div",{class:"columns is-variable"},[s("div",{class:"column is-8"},[s("h2",{class:"title is-2 has-text-centered",translate:"yes"},"Delivery Addresses")])],-1),kt={class:"columns"},Bt={key:0,class:"column is-8"},Ft={class:"deliveryAddressWrapper"},Vt={class:"columns is-variable is-2"},St={class:"column is-6"},Tt={class:"field nameFirst"},Mt=s("label",{class:"label",translate:"yes"},"First Name",-1),Et={class:"control"},Lt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Nt={class:"column is-6"},zt={class:"field nameLast"},Ot=s("label",{class:"label",translate:"yes"},"Last Name",-1),Rt={class:"control"},Gt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),qt={class:"columns is-variable is-2"},Ht={class:"column is-12"},Wt={class:"field street"},Yt=s("label",{class:"label",translate:"yes"},"Street",-1),Zt={class:"control"},jt=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Kt={class:"columns is-variable is-2"},Jt={class:"column is-12"},Qt={class:"field street2"},Xt=s("label",{class:"label",translate:"yes"},"Street 2",-1),sa={class:"control"},ea=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ta={class:"columns is-variable is-2"},aa={class:"column is-4"},ia={class:"field zip"},oa=s("label",{class:"label",translate:"yes"},"ZIP",-1),na={class:"control"},la=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ra={class:"column is-8"},da={class:"field city"},ca=s("label",{class:"label",translate:"yes"},"City",-1),ua={class:"control"},ma=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ha={class:"columns is-variable is-2"},va={class:"column is-6"},_a={class:"field state"},pa=s("label",{class:"label",translate:"yes"},"State",-1),fa={class:"control"},ya=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),ga={class:"column is-6"},$a={class:"field country"},ba=s("label",{class:"label",translate:"yes"},"Country",-1),Da={class:"control select"},Aa=["value"],Ua=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ia={class:"columns is-variable is-2 is-centered"},Ca={class:"column is-6"},xa={class:"field phone"},wa=s("label",{class:"label",translate:"yes"},"Phone",-1),Pa={class:"control"},ka=s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"is empty",translate:"yes"},"This value cannot be empty")],-1),Ba={class:"columns is-variable is-2 is-centered"},Fa={class:"column is-6 has-text-centered"},Va={type:"submit",class:"button is-success"},Sa=s("span",{translate:"yes"},"Address",-1),Ta={class:"column is-4"},Ma={class:"panel user-settings-delivery-nav"},Ea=s("p",{class:"panel-heading",translate:"yes"}," Addresses ",-1),La={class:"panel-block"},Na={class:"control has-icons-left"},za=s("span",{class:"icon is-small is-left"},[s("i",{class:"fas fa-search","aria-hidden":"true"})],-1),Oa={class:"panel-block special--right-action"},Ra=["onClick"],Ga=["onClick"],qa={class:"panel-block"},Ha=s("span",{translate:"yes"},"Add New Delivery Address",-1);function Wa(t,e,o,l,i,n){const c=D("font-awesome-icon");return t.$store.state.user.profile?(u(),m("div",wt,[Pt,s("div",kt,[i.activeDeliveryAddress?(u(),m("div",Bt,[s("form",{onSubmit:e[9]||(e[9]=f((...a)=>n.saveUserAddresses&&n.saveUserAddresses(...a),["prevent"]))},[s("div",Ft,[s("div",Vt,[s("div",St,[s("div",Tt,[Mt,s("div",Et,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.activeDeliveryAddress.nameFirst=a),translate:"yes",placeholder:"First Name"},null,512),[[d,i.activeDeliveryAddress.nameFirst]])]),Lt])]),s("div",Nt,[s("div",zt,[Ot,s("div",Rt,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>i.activeDeliveryAddress.nameLast=a),translate:"yes",placeholder:"Last Name"},null,512),[[d,i.activeDeliveryAddress.nameLast]])]),Gt])])]),s("div",qt,[s("div",Ht,[s("div",Wt,[Yt,s("div",Zt,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>i.activeDeliveryAddress.street=a),translate:"yes",placeholder:"Street"},null,512),[[d,i.activeDeliveryAddress.street]])]),jt])])]),s("div",Kt,[s("div",Jt,[s("div",Qt,[Xt,s("div",sa,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.activeDeliveryAddress.street2=a),translate:"yes",placeholder:"Street 2"},null,512),[[d,i.activeDeliveryAddress.street2]])]),ea])])]),s("div",ta,[s("div",aa,[s("div",ia,[oa,s("div",na,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>i.activeDeliveryAddress.zip=a),translate:"yes",placeholder:"ZIP"},null,512),[[d,i.activeDeliveryAddress.zip]])]),la])]),s("div",ra,[s("div",da,[ca,s("div",ua,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>i.activeDeliveryAddress.city=a),translate:"yes",placeholder:"City"},null,512),[[d,i.activeDeliveryAddress.city]])]),ma])])]),s("div",ha,[s("div",va,[s("div",_a,[pa,s("div",fa,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>i.activeDeliveryAddress.state=a),translate:"yes",placeholder:"State"},null,512),[[d,i.activeDeliveryAddress.state]])]),ya])]),s("div",ga,[s("div",$a,[ba,s("div",Da,[t.$store.state.coredata&&t.$store.state.coredata.countries?r((u(),m("select",{key:0,"onUpdate:modelValue":e[7]||(e[7]=a=>i.activeDeliveryAddress.country=a)},[(u(!0),m(I,null,C(t.$store.state.coredata.countries,a=>(u(),m("option",{value:a.code,key:a.code},b(a.name),9,Aa))),128))],512)),[[F,i.activeDeliveryAddress.country]]):v("v-if",!0)]),Ua])])]),s("div",Ia,[s("div",Ca,[s("div",xa,[wa,s("div",Pa,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[8]||(e[8]=a=>i.activeDeliveryAddress.phone=a),translate:"yes",placeholder:"Phone"},null,512),[[d,i.activeDeliveryAddress.phone]])]),ka])])]),s("div",Ba,[s("div",Fa,[s("button",Va,[_(c,{icon:"check"}),h("   "),Sa])])])])],32)])):v("v-if",!0),s("div",Ta,[s("nav",Ma,[Ea,s("div",null,[s("div",La,[s("p",Na,[r(s("input",{class:"input is-small",type:"text","onUpdate:modelValue":e[10]||(e[10]=a=>i.deliveryFilter=a),placeholder:"search"},null,512),[[d,i.deliveryFilter]]),za])]),(u(!0),m(I,null,C(n.userDeliveryAddress,(a,p)=>(u(),m("div",{key:p},[s("div",Oa,[s("a",{class:"user-delivery--get",onClick:$=>n.getDeliveryAddress(p,$)},b(a.street)+", "+b(a.zip),9,Ra),s("a",{class:"user-delivery--delete",onClick:$=>n.removeDeliveryAddress(p)},[_(c,{icon:"trash"})],8,Ga)])]))),128))]),s("div",qa,[s("button",{class:"button is-primary is-outlined is-fullwidth",onClick:e[11]||(e[11]=(...a)=>n.addNewDeliveryAddress&&n.addNewDeliveryAddress(...a))},[_(c,{icon:"plus"}),h("   "),Ha])])])])])])):v("v-if",!0)}const k=g(xt,[["render",Wa],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/MeDelivery.vue"]]);const Ya={name:"UserMeAdmin",data(){return{loginAsUser:null}},computed:{},mounted:function(){this.eventBus.emit("translateContent",this.$store.getters.getTranslates)},methods:{loginAs:function(){const t=this;this.$httpc.post("users/login",{user:{email:this.loginAsUser,password:"admin"},admin:!0}).then(function(e){if(e.data&&e.data.user&&e.data.user.superadmined){const o=e.data.user;t.$store.dispatch("setUser",o),t.$store.state.user.superadmined=!0,t.$router.push({name:"me"})}}).catch(function(e){console.error(e)}).then(function(){})}}},A=t=>(M("data-v-6079c22c"),t=t(),E(),t),Za={key:0,id:"meAdmin",class:""},ja=A(()=>s("div",{class:"columns is-variable is-2"},[s("div",{class:"column is-8 has-text-centered"},[s("h2",{class:"title is-2 has-text-centered"},"Administration"),v(` <p class="has-text-centered" v-if="$store.state.user.profile.addressInvoice">
          AKA 
          {{ $store.state.user.profile.addressInvoice.nameFirst }} 
          {{ $store.state.user.profile.addressInvoice.nameLast }}
        </p> `)])],-1)),Ka={class:"user-info-edit-form-wrapper"},Ja={class:"columns"},Qa={class:"column is-8 is-centered"},Xa={class:"columns is-variable is-2 is-centered"},si={class:"column is-12 has-text-centered",id:"profile-admin-loginas"},ei={class:"field loginas"},ti=A(()=>s("label",{class:"label"},[s("span",{translate:"yes"},"Login as (write email of user that is not admin)"),h(":")],-1)),ai={class:"control"},ii=A(()=>s("div",{class:"form-messages is-hidden"},[s("div",{class:"form-message","data-message":"not exists",translate:"yes"},"Username does not exists")],-1)),oi=A(()=>s("button",{class:"button is-success"},[s("span",{translate:"yes"},"Login as")],-1));function ni(t,e,o,l,i,n){return t.$store.state.user.profile&&t.$store.state.user.profile.type=="admin"?(u(),m("div",Za,[ja,s("div",Ka,[s("div",Ja,[s("div",Qa,[s("div",Xa,[s("div",si,[s("form",{onSubmit:e[1]||(e[1]=f((...c)=>n.loginAs&&n.loginAs(...c),["prevent"]))},[s("div",ei,[ti,s("div",ai,[r(s("input",{class:"input",type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>i.loginAsUser=c),placeholder:"User email"},null,512),[[d,i.loginAsUser]])]),ii]),oi],32)])])])])]),v(" user-admin-edit-form-wrapper ")])):v("v-if",!0)}const B=g(Ya,[["render",ni],["__scopeId","data-v-6079c22c"],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/MeAdmin.vue"]]),li={name:"UsersMe",components:{UserMeInfo:x,UserMeCompany:w,UserMeInvoince:P,UserMeDelivery:k,UserMeAdmin:B},data(){return{activeComponent:x,menuStates:{UserMeInfo:!0,UserMeCompany:!1,UserMeInvoince:!1,UserMeDelivery:!1,UserMeAdmin:!1},availablePaths:{company:w,address:P,delivery:k,admin:B}}},computed:{isLogged:function(){return typeof this.$store<"u"&&typeof this.$store.state.user.logged<"u"?this.$store.state.user.logged:!1}},created:function(){let t=this.$route.path.split("/");t=t.filter(function(e){return e!==""}),t.length>2&&typeof this.availablePaths[t[2]]<"u"&&(this.activeComponent=this.availablePaths[t[2]])},methods:{userComponent:function(t,e){this.$options.components&&this.$options.components[t]&&(this.activeComponent=this.$options.components[t]);const o=this.$el.querySelectorAll(".users-me nav.user-settings-nav a.panel-block");o&&o.length&&o.forEach(l=>{l.classList.remove("is-active")}),e.target.classList.add("is-active")}}},ri={class:"container users-me"},di={key:0},ci={class:"columns is-variable has-text-left"},ui={class:"column is-3 pr-6"},mi={class:"mt-6 user-settings-nav"},hi={class:"menu"},vi=s("p",{class:"menu-label",translate:"yes"}," Your Settings ",-1),_i={class:"menu-list"},pi={class:"column is-9"},fi=s("h1",{class:"title is-1 has-text-weight-normal",translate:"yes"},"Profile",-1),yi={key:1},gi={class:"columns"},$i={class:"column"},bi=s("h1",{class:"title is-1",translate:"yes"},"Unauthorized",-1),Di=s("span",{translate:"yes"},"It may help if you",-1);function Ai(t,e,o,l,i,n){const c=D("router-link");return u(),m("div",ri,[n.isLogged?(u(),m("div",di,[s("div",ci,[s("div",ui,[s("nav",mi,[s("aside",hi,[vi,s("ul",_i,[s("li",null,[_(c,{to:{name:"me"},tag:"a","active-class":"is-active",translate:"yes",exact:""},{default:y(()=>[h("Profile")]),_:1})]),s("li",null,[_(c,{to:{name:"meCompany"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[h("Company Data")]),_:1})]),s("li",null,[_(c,{to:{name:"meAddress"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[h("Invoice Address")]),_:1})]),s("li",null,[_(c,{to:{name:"meDelivery"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[h("Delivery addresses")]),_:1})]),s("li",null,[t.$store.state.user.profile&&t.$store.state.user.profile.type=="admin"?(u(),U(c,{key:0,to:{name:"meAdmin"},tag:"a","active-class":"is-active",translate:"yes"},{default:y(()=>[h("Administration")]),_:1})):v("v-if",!0)])])])])]),s("div",pi,[fi,(u(),U(L(i.activeComponent)))])])])):(u(),m("div",yi,[s("div",gi,[s("div",$i,[bi,s("p",null,[Di,h(" "),_(c,{to:{name:"login"},tag:"a",translate:"yes"},{default:y(()=>[h("log in")]),_:1})])])])]))])}const wi=g(li,[["render",Ai],["__file","/Users/marthol/Documents/GitHub/stretchshop-front-vue/src/components/users/Me.vue"]]);export{wi as default};
